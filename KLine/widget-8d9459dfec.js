webpackJsonp([2],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){(0,u.render)(s.default.createElement(c.Provider,{store:y},s.default.createElement(l.Router,{history:g,routes:p.default})),document.getElementById("container_outer"))}var a=n(1),o=n(4),s=r(o),u=n(156),l=n(157),c=n(220),f=n(248),h=n(709),p=r(h),d=n(638);(0,a.polyfill)();var y=(0,d.configureStore)(l.browserHistory,window.__INITIALSTATE__),g=(0,f.syncHistoryWithStore)(l.browserHistory,y);"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?i():document.addEventListener("DOMContentLoaded",i)},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   3.3.1
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function a(e){q=e}function o(e){$=e}function s(){return function(){return t.nextTick(h)}}function u(){return function(){z(h)}}function l(){var e=0,t=new Z(h),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;e<X;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}X=0}function p(){try{var e=n(3);return z=e.runOnLoop||e.runOnContext,u()}catch(e){return f()}}function d(e,t){var n=arguments,r=this,i=new this.constructor(g);void 0===i[ie]&&N(i);var a=r._state;return a?!function(){var e=n[a-1];$(function(){return k(a,i,e,r._result)})}():S(r,i,e,t),i}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return w(n,e),n}function g(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ue.error=e,ue}}function b(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function E(e,t,n){$(function(e){var r=!1,i=b(n,t,function(n){r||(r=!0,t!==n?w(e,n):x(e,n))},function(t){r||(r=!0,I(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,I(e,i))},e)}function O(e,t){t._state===oe?x(e,t._result):t._state===se?I(e,t._result):S(t,void 0,function(t){return w(e,t)},function(t){return I(e,t)})}function T(e,t,n){t.constructor===e.constructor&&n===d&&t.constructor.resolve===y?O(e,t):n===ue?I(e,ue.error):void 0===n?x(e,t):i(n)?E(e,t,n):x(e,t)}function w(t,n){t===n?I(t,_()):e(n)?T(t,n,m(n)):x(t,n)}function P(e){e._onerror&&e._onerror(e._result),C(e)}function x(e,t){e._state===ae&&(e._result=t,e._state=oe,0!==e._subscribers.length&&$(C,e))}function I(e,t){e._state===ae&&(e._state=se,e._result=t,$(P,e))}function S(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+oe]=n,i[a+se]=r,0===a&&e._state&&$(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?k(n,r,i,a):i(a);e._subscribers.length=0}}function A(){this.error=null}function R(e,t){try{return e(t)}catch(e){return le.error=e,le}}function k(e,t,n,r){var a=i(n),o=void 0,s=void 0,u=void 0,l=void 0;if(a){if(o=R(n,r),o===le?(l=!0,s=o.error,o=null):u=!0,t===o)return void I(t,v())}else o=r,u=!0;t._state!==ae||(a&&u?w(t,o):l?I(t,s):e===oe?x(t,o):e===se&&I(t,o))}function M(e,t){try{t(function(t){w(e,t)},function(t){I(e,t)})}catch(t){I(e,t)}}function D(){return ce++}function N(e){e[ie]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[ie]||N(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):I(this.promise,j())}function j(){return new Error("Array Methods must be provided an Array")}function F(e){return new L(this,e).promise}function B(e){var t=this;return new t(Y(e)?function(n,r){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(g);return I(n,e),n}function V(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this[ie]=D(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&V(),this instanceof G?M(this,e):U())}function W(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=G}var K=void 0;K=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=K,X=0,z=void 0,q=void 0,$=function(e,t){ne[X]=e,ne[X+1]=t,X+=2,2===X&&(q?q(h):re())},Q="undefined"!=typeof window?window:void 0,J=Q||{},Z=J.MutationObserver||J.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?s():Z?l():te?c():void 0===Q?p():f();var ie=Math.random().toString(36).substring(16),ae=void 0,oe=1,se=2,ue=new A,le=new A,ce=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ae&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===y){var i=m(e);if(i===d&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===G){var a=new n(g);T(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},L.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ae&&(this._remaining--,e===se?I(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;S(e,void 0,function(e){return n._settledAt(oe,t,e)},function(e){return n._settledAt(se,t,e)})},G.all=F,G.race=B,G.resolve=y,G.reject=H,G._setScheduler=a,G._setAsap=o,G._asap=$,G.prototype={constructor:G,then:d,catch:function(e){return this.then(null,e)}},W(),G.polyfill=W,G.Promise=G,G})}).call(t,n(2),function(){return this}())},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),c=r(l),f=n(276),h=r(f),p=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.closeModal=s.closeModal.bind(s),s}return o(t,e),u(t,[{key:"closeModal",value:function(){var e=this.refs.component;e.closeModal.call(e)}},{key:"render",value:function(){var e=this,t=this.props.dispatch,n=this.props.toggleModal,r=n.open,i=n.title,a=n.Component,o=n.className,u=n.initProps,l=s({dispatch:t},u);return(a.propNames||[]).forEach(function(t){l[t]=e.props[t]}),c.default.createElement(h.default,{isOpen:r,className:"react-modal "+o,overlayClassName:"react-modal-overlay"},c.default.createElement("div",{className:"modal-wrapper"},c.default.createElement("div",{className:"modal-content"},c.default.createElement("div",{className:"modal-header"},c.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.closeModal},c.default.createElement("span",{"aria-hidden":"true"},"×")),c.default.createElement("h4",{className:"modal-title"},i,a.AdditionalHeader?a.AdditionalHeader:null)),c.default.createElement(a,s({ref:"component"},l)))))}}]),t}(c.default.Component);t.default=p},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),l=r(u),c=n(264),f=r(c),h=n(297),p=n(300),d=n(355),y=r(d),g=[{id:p.TOOL_CURSOR,key:"cursor",name:"光标",icon:l.default.createElement("path",{d:"M14.607,10.842l-8.19-1.317l-4.045,7.018v-16L14.607,10.842z"})},{id:p.TOOL_CROSSCURSOR,key:"crosscursor",name:"十字光标",icon:l.default.createElement("path",{d:"M-0.013,8.5h7 M10.013,8.5h7 M8.5,17.013v-7 M8.5,6.987v-7"})},{id:p.TOOL_HORISEGLINE,key:"horisegline",name:"水平线段",icon:l.default.createElement("path",{d:"M0.5,8.499h16 M0.502,6v5 M16.5,6v5"})},{id:p.TOOL_HORISTRAIGHTLINE,key:"horistraightline",name:"水平直线",icon:l.default.createElement("path",{d:"M0,8.5h17 M8.5,6v5"})},{id:p.TOOL_HORIRAYLINE,key:"horirayline",name:"水平射线",icon:l.default.createElement("path",{d:"M0.5,8.493h16.516 M0.502,5.986v5.012"})},{id:p.TOOL_VERTISTRAIGHTLINE,key:"vertistraightline",name:"垂直线",icon:l.default.createElement("path",{d:"M8.5,17V0 M6,8.5h5"})},{id:p.TOOL_PRICELINE,key:"priceline",name:"价格线",icon:l.default.createElement("path",{d:"M0.5,7v5 M0.5,9.5H17 M2.512,2.992v4 M5.51,2.992v4 M2.512,3.5H5.51M5.51,6.5H2.512 M7.513,2.992v4 M10.511,2.992v4 M7.513,3.5h2.998 M10.511,6.5H7.513 M12.514,2.992v4 M15.512,2.992v4 M12.514,3.5h2.998 M15.512,6.5h-2.998"})},{id:p.TOOL_DRAWFIBRETRACE,key:"fibretrace",name:"斐波纳契回调",icon:l.default.createElement("path",{d:"M0,2.479h17 M8.5-0.021v5 M17,13.479H0 M8.5,10.979v5 M0,8.499h17"})},{id:p.TOOL_SEGLINE,key:"segline",name:"线段",icon:l.default.createElement("path",{d:"M2.06,14.94l12.879-12.88 M0,12.878l4.12,4.123 M12.881,0L17,4.121"})},{id:p.TOOL_STRAIGHTLINE,key:"straightline",name:"直线",icon:l.default.createElement("path",{d:"M10.484,6.515L17,0.001 M6.512,10.48L0,16.998 M4.351,8.322l4.329,4.326 M8.322,4.351l4.324,4.329"})},{id:p.TOOL_RAYLINE,key:"rayline",name:"射线",icon:l.default.createElement("path",{d:"M2.002,14.995L17,0.001 M-0.492,12.505l4.989,4.985 M4.928,7.084l4.987,4.987"})},{id:p.TOOL_ARROWLINE,key:"arrowline",name:"箭头",icon:l.default.createElement("path",{d:"M2.901,16.098L17.517,1.488 M0.718,13.641l4.65,4.648 M14.021,1.488h4.002 M17.517,1v4"})},{id:p.TOOL_TRIPARALLELLINE,key:"triparallelline",name:"价格通道线",icon:l.default.createElement("path",{d:"M10.218,7.037l6.962-6.962 M0.076,17.181L7.03,10.22 M4.932,8.113l4.21,4.21 M8.113,4.929l4.208,4.212 M-0.059,8.269l8.327-8.329 M6.29,6.287l-4.249-4.25 M16.24,9.719l-6.521,6.521"})},{id:p.TOOL_BIPARALLELLINE,key:"biparallelline",name:"平行直线",icon:l.default.createElement("path",{d:"M10.453,6.547l6.614-6.617 M6.498,10.496l-6.565,6.572 M8.648,12.649L4.386,8.384 M12.601,8.698L8.331,4.42 M6.227,6.227L1.701,1.701 M8.016-0.125l-8.469,8.469"})},{id:p.TOOL_BIPARALLERAYLINE,key:"biparallelrayline",name:"平行射线",icon:l.default.createElement("path",{d:"M4.998,14.96L17.225,2.74 M2.549,12.508l4.901,4.901 M7.092,7.968l4.897,4.896 M-0.499,5.476l4.404,4.403 M1.567,7.667l7.722-7.721"})},{id:p.TOOL_DRAWFIBFANS,key:"fibfans",name:"斐波纳契扇形",icon:l.default.createElement("path",{d:"M0.947,12.383L13.39-0.077 M0.947,12.383l16.292-4.289 M0.949,12.383l16.433,4.211 M-0.37,9.263l2.87,6.644 M6.546,2.764l4.096,4.092"})},{id:p.TOOL_FIBSPIRAL,key:"fibspiral",name:"斐波纳契螺线",new:!0,iconFile:l.default.createElement("svg",{className:"tool-fibspiral",width:"18",height:"18",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},l.default.createElement("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},l.default.createElement("path",{d:"M1,0.83026996 C1,0.83026996 6.682,6.51226996 9.267,9.09726996 C10.115,9.94526996 10.859,11.40727 10.033,12.52927 C9.171,13.69927 7.453,13.52327 6.523,12.53727 C5.237,11.17527 5.289,9.01926996 6.639,7.72126996 C8.306,6.11926996 10.944,6.18426996 12.532,7.86626996 C14.493,9.94326996 14.414,13.23127 12.355,15.20927 C9.813,17.65227 5.79,17.55327 3.369,14.98927 C0.379,11.82127 0.5,6.80826996 3.639,3.79126996 C7.515,0.0662699598 13.65,0.21726996 17.341,4.12826996","stroke-width":"0.972"})))},{id:p.TOOL_RULER,key:"ruler",name:"测量工具",new:!0,iconFile:l.default.createElement("svg",{className:"tool-ruler",width:"17",height:"17",viewBox:"0 0 17 17",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},l.default.createElement("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},l.default.createElement("g",{"fill-rule":"nonzero"},l.default.createElement("path",{d:"M14,13 L13,13 L11,13 L10,13 L7,13 L6,13 L4,13 L4,11 L4,10 L4,8 L4,7 L4,4 L0,4 L0,17 L17,17 L17,13 L14,13 Z M16,16 L1,16 L1,5 L3,5 L3,7 L2,7 L2,8 L3,8 L3,10 L2,10 L2,11 L3,11 L3,14 L6,14 L6,15 L7,15 L7,14 L10,14 L10,15 L11,15 L11,14 L13,14 L13,15 L14,15 L14,14 L16,14 L16,16 Z",id:"XMLID_437_"}),l.default.createElement("path",{d:"M7,11 L8,11 L8,9 L10,9 L10,2 L8,2 L8,0 L7,0 L7,2 L5,2 L5,9 L7,9 L7,11 Z M6,8 L6,3 L7,3 L8,3 L9,3 L9,8 L8,8 L7,8 L6,8 Z",id:"XMLID_440_"}),l.default.createElement("path",{d:"M13,12 L14,12 L14,10 L16,10 L16,3 L14,3 L14,1 L13,1 L13,3 L11,3 L11,10 L13,10 L13,12 Z M12,9 L12,4 L13,4 L14,4 L15,4 L15,9 L14,9 L13,9 L12,9 Z",id:"XMLID_443_"}))))},{id:p.TOOL_CLEAR,key:"clear",name:"清除",icon:l.default.createElement("path",{d:"M11,3V1V0h-1H6H5v1v2H0v1h2v12v1h1h10h1v-1V4h2V3H11z M6,1h4v2H6V1z M13,16H3V4h2h1h4h1h2V16z M6,6h1v8H6V6zM9,6h1v8H9V6z"})}],_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"componentDidMount",value:function(){f.default.rebuild()}},{key:"switchTool",value:function(e){var t=this.props.dispatch;t((0,h.switchTool)(e))}},{key:"clearTools",value:function(e){var t=y.default.getInstance(),n=t.tool,r=n.getToolObjectCount();if(!(r<=0))return n.toolObjects.splice(0,r),t.dispatch((0,h.switchTool)(t._beforeDrawingTool)),t.redraw("OverlayCanvas"),!1}},{key:"onLeftBarSwitchBtnClick",value:function(){var e=this.props.dispatch;e((0,h.toggleLeftBar)())}},{key:"render",value:function(){var e=this,t=this.props,n=(t.fullscreen,t.selectTool),r=t.leftBar,i=t.meta,a=this.props.selectMarket,o=(a.marketName,a.coinSymbol,a.currency,a.coin);return l.default.createElement("div",{id:"left_bar",className:"flex-none"+(r?"":" closed"),ref:"leftBar"},l.default.createElement("div",{className:"wrap"},l.default.createElement("ul",{id:"chart_tools"},g.map(function(t){var r=t.id,i=t.name,a=t.icon,o=t.key;return l.default.createElement("li",{key:r,"data-tip":i,className:"tool-"+o+"-wrap"+(t.new?" new":""),"data-for":"tooltip_right"},l.default.createElement("a",{className:n===r?"active":"",onClick:function(t){return t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),r===p.TOOL_CLEAR?e.clearTools(t):e.switchTool(r)}},t.iconFile?t.iconFile:l.default.createElement("svg",{className:"tool-"+o,x:"0px",y:"0px",width:t.width?t.width:"19px",height:t.height?t.height:"19px",viewBox:t.viewBox?t.viewBox:"-1 -1 19 19"},a)))}))),l.default.createElement("a",{href:"javascript:void(0);",className:"btn-switch",title:(r?"隐藏":"展开")+"工具栏",onClick:function(){return e.onLeftBarSwitchBtnClick()}},l.default.createElement("span",{className:"triangle"})),i.onWidget?null:l.default.createElement("a",{href:"http://b.sosobtc.com/"+o.coin+"_"+o.mid+".html",id:"old_version_link",target:"_blank"},"返回旧版"))}}]),t}(l.default.Component);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return{type:Ln,scale:e}}function a(e,t,n){return function(r){return(0,it.default)(st.URL_PREFIX+"/api/feedback",{method:"POST",credentials:"include",body:(0,st.serialize)({title:e,contact:t,describe:n}),headers:y({"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"})}).then(function(e){return A(r,e)}).then(R)}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update";return{type:Nn,tickers:e,action:t}}function s(e){return function(t){return(0,it.default)(st.URL_PREFIX+"/api/ticker",{method:"DELETE",credentials:"include",body:(0,st.serialize)({ticker:e}),headers:y({"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"})}).then(function(e){return A(t,e)}).then(R).then(function(n){return t(o([e],"delete"))})}}function u(e){return function(t){return(0,it.default)(st.URL_PREFIX+"/api/tickers",{method:"POST",credentials:"include",body:(0,st.serialize)({tickers:e.join("|")}),headers:y({"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"})}).then(function(e){return A(t,e)}).then(R).then(function(e){return t(o(e.data))})}}function l(e,t){return{type:Dn,index:e,items:t}}function c(e){return{type:Mn,ticker:e}}function f(e){return{type:kn,ticker:e}}function h(e){return{type:Rn,cat:e}}function p(e){return{type:An,cat:e}}function d(){return{type:Cn}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ut.parse(document.cookie),n=new Headers;n.append("X-Requested-With","XMLHttpRequest"),n.append("X-XSRF-TOKEN",t["XSRF-TOKEN"]);for(var r in e)e[r]&&n.append(r,e[r]);return n}function g(e){return{type:Sn,warning:e}}function _(e){return function(t){return(0,it.default)(st.URL_PREFIX+("/api/warning/"+e.id),{method:"DELETE",credentials:"include",headers:y()}).then(function(e){return A(t,e)}).then(R).then(function(n){return t(g(e))})}}function v(e){return{type:In,warnings:e}}function m(e){return function(t){return(0,it.default)(st.URL_PREFIX+"/api/warning",{method:"POST",body:(0,st.serialize)(e),credentials:"include",headers:y({"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"})}).then(function(e){return A(t,e)}).then(R).then(function(e){return t(b([e.warning]))})}}function b(e){return{type:xn,warnings:e}}function E(){return function(e){return(0,it.default)(st.URL_PREFIX+"/api/warnings",{method:"GET",credentials:"include",headers:y()}).then(function(t){return A(e,t)}).then(R).then(function(t){return e(b(t.warnings))})}}function O(e){return{type:Pn,roe:e}}function T(e){return{type:En,mid:e}}function w(e,t){return t||(t=null),{type:On,cid:e,currency:t}}function P(e){return{type:Tn,currency:e}}function x(e,t){return{type:wn,warning:e,value:t}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:bn,open:e}}function S(){return{type:mn}}function C(e,t){return{type:vn,symbol:e,data:t}}function A(e,t){var n=void 0;if(t.status>=200&&t.status<300)return Wn&&(Wn=!1,e($(Un)),e(q(Gn))),t;throw 503!==t.status||Wn||(Wn=!0,e(q(Un))),n=new Error(t.statusText),n.response=t,n}function R(e){return e.json()}function k(){return{type:ft}}function M(){return{type:_n}}function D(){return{type:gn}}function N(){return{type:dn}}function L(){return{type:yn}}function j(){return{type:fn}}function F(e,t){return{type:hn,imageUri:t,error:e}}function B(){return{type:pn}}function H(e){return function(t){t(j());var n=document.createElement("img");n.onload=function(){t(F(null,e))},n.onerror=function(e){t(F(e||"加载图片失败！"))},n.src=e}}function V(){return{type:ln}}function U(e,t){return{type:cn,file:e,result:t}}function G(e){return function(t){t(V());var n=new FormData;return n.append("pic",e),(0,it.default)("/api/upload",{method:"POST",body:n,credentials:"include",headers:y()}).then(function(e){return A(t,e)}).then(R).then(function(n){return t(U(e,n))})}}function W(e){return{type:sn,text:e}}function K(e){return{type:un,text:e}}function Y(e){return{type:on,usernames:e}}function X(e){Array.isArray(e)||(e=[e]);var t=st.URL_PREFIX+"/api/username?"+(0,st.serialize)({uids:e});return function(e){return(0,it.default)(t,{credentials:"include"}).then(function(t){return A(e,t)}).then(R).then(function(t){return e(Y(t.data))})}}function z(e){return{type:an,messages:e}}function q(e){return{type:nn,notification:e}}function $(e){return{type:rn,notification:e}}function Q(){return{type:en}}function J(e){return{type:tn,token:e}}function Z(){var e=st.URL_PREFIX+"/api/chat-token";return function(t){return t(Q()),(0,it.default)(e,{credentials:"include"}).then(function(e){return A(t,e)}).then(R).then(function(e){return t(J(e.data.token_chat))})}}function ee(){return{type:Zt}}function te(e,t){var n=function(e,n){var r=void 0,i=void 0;i=Date.now(),r=setInterval(function(){t()===!0?(clearInterval(r),e()):Date.now()-i>3e5&&n()},100)};return new Promise(function(t,r){var i=document,a=i.createElement("script"),o=i.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.defer=!0,a.src=e,o.parentNode.insertBefore(a,o),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,n(t,r))}:a.onload=function(){n(t,r)}})}function ne(){return function(e){return Xn?e(ee()):zn?e(k()):(zn=!0,Promise.all([te(Kn,function(){return RongIMClient&&"function"==typeof RongIMClient.init}),te(Yn,function(){return RongIMLib&&RongIMLib.RongIMEmoji&&"function"==typeof RongIMLib.RongIMEmoji.init})]).then(function(){zn=!1,Xn=!0,e(ee())},function(){zn=!1,console.log("RongIM rejected!")}))}}function re(){return{type:Qt}}function ie(e){return tt({},e,{type:Jt})}function ae(){var e=st.URL_PREFIX+"/api/login-status";return function(t){return t(re()),(0,it.default)(e,{credentials:"include"}).then(function(e){return A(t,e)}).then(R).then(function(e){return t(ie(e.data))})}}function oe(e,t){return{type:$t,tick:e,price:t}}function se(e){return{type:qt,limit:e}}function ue(e){return{type:zt,limit:e}}function le(e){return{type:Wt,group:e}}function ce(){return{type:Kt}}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:Yt,data:e,updatedByHttp:t}}function he(e){return{type:Xt,price:e}}function pe(e,t){return{type:Gt,id:e,Component:t}}function de(){return{type:Ut}}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:Vt,data:e,reload:t,receivedAt:Date.now()}}function ge(){return{type:Bt}}function _e(e,t){return tt({type:Ht,data:e},t,{receivedAt:Date.now()})}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Ft,tool:e,initPoint:t}}function me(e,t,n){return{type:jt,indicator:e,index:t,value:n}}function be(e,t){return{type:Lt,indicator:e,params:t}}function Ee(e){return{type:Nt,style:e}}function Oe(e){return{type:Dt,indicator:e}}function Te(e){return{type:Mt,setting:e}}function we(){return{type:kt}}function Pe(){return{type:Rt}}function xe(){return{type:At}}function Ie(e,t){return{type:Ct,top:e,right:t}}function Se(e){return{type:St,theme:e}}function Ce(){return{type:It}}function Ae(e){return{type:xt,period:e}}function Re(e){return{type:Pt,mid:e}}function ke(e,t){return{type:wt,coin:t,market:e}}function Me(){return{type:Tt}}function De(e){return{type:vt,indicators:e}}function Ne(e,t){return{type:mt,index:e,indicator:t}}function Le(e){return{type:bt,show:e}}function je(e,t){return{type:e,indicator:t}}function Fe(){return{type:gt}}function Be(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:_t,title:e,component:t,className:n,initProps:r}}function He(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:ht,showLoading:e}}function Ve(e){return{type:pt,data:e,receivedAt:Date.now()}}function Ue(){return{type:dt}}function Ge(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=st.URL_PREFIX+"/data/period?symbol="+e+"&step="+t;return n&&(i+="&since="+n),function(e){return e(He(r)),(0,it.default)(i).then(function(t){return A(e,t)}).then(R).then(function(t){return e(Ve(t))})}}function We(e){var t=st.URL_PREFIX+"/data/depth?symbol="+e;return function(e){return e(Ue()),(0,it.default)(t).then(function(t){return A(e,t)}).then(R).then(function(t){return e(fe(t,!0))})}}function Ke(e){var t=st.URL_PREFIX+"/data/quota?"+(0,st.serialize)(e);return function(n){return n(ge()),(0,it.default)(t,{credentials:"include"}).then(function(e){return A(n,e)}).then(R).then(function(t){return n(_e(t,e))})}}function Ye(e){var t="/data/trades?symbol="+e;return function(e){return e(de()),(0,it.default)(t).then(function(e){return e.json()}).then(function(t){return e(ye(t,!0))})}}function Xe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Fn,refresh:e}}function ze(e,t){return{type:jn,data:e,append:t,receivedAt:Date.now()}}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="/api/news"+(""==e?"":"?from="+e);return function(r){return r(Xe(""==e)),(0,it.default)(n).then(function(e){return A(r,e)}).then(R).then(function(e){return r(ze(e,t))})}}function $e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Bn,replace:e}}function Qe(e,t){return{type:Hn,data:e,append:t}}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="/api/weibo",i="over";return 0==n?i="over":1==n&&""!=t?(i="post",r+="?start="+t):2==n&&""!=e&&(i="pre",r+="?end="+e),function(e){return e($e()),(0,it.default)(r,{credentials:"include"}).then(function(t){return A(e,t)}).then(R).then(function(t){return e(Qe(t,i))})}}function Ze(e){return{type:Vn,data:e}}function et(){var e="/api/weibo-count";return function(t){return t($e()),(0,it.default)(e,{credentials:"include"}).then(function(e){return A(t,e)}).then(R).then(function(e){return t(Ze(e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.RECEIVE_WEIBO_COUNT=t.RECEIVE_WEIBO_LIST=t.REQUEST_WEIBO_LIST=t.REQUEST_NEWS_LIST=t.RECEIVE_NEWS_LIST=t.SWITCH_AXIS_SCALE=t.UPDATE_CUSTOM_TICKERS=t.UPDATE_TICKER_DRAGGING_INDEX=t.REMOVE_USER_TICKER=t.PUSH_USER_TICKER=t.TOGGLE_TICKER_MODAL_LIST=t.TOGGLE_MORE_TICKERS=t.AUTH_RONGIM=t.DELETE_WARNING=t.TOGGLE_WARNINGS=t.RECEIVE_WARNINGS=t.UPDATE_SYS_ROE=t.CHANGE_WARNING_VALUE=t.SELECT_ALARM_CURRENCY=t.SELECT_ALARM_COIN=t.SELECT_ALARM_MARKET=t.TOGGLE_LEFT_BAR=t.TOGGLE_TOP_NAV=t.UPDATE_TICKER=t.DEPTH_VIEW_MOUNTED=t.TOGGLE_EMOJI=t.CLOSE_EMOJI=t.OPEN_EMOJI=t.CLOSE_IMAGE_VIEWER=t.IMAGE_VIEWER_LOADED=t.OPEN_IMAGE_VIEWER=t.IMAGE_UPLOADED=t.UPLOAD_IMAGE=t.APPEND_MESSAGE=t.EDIT_MESSAGE=t.RECEIVE_USERNAMES=t.PUSH_BITREES_MESSAGE=t.REMOVE_NOTIFICATION=t.ADD_NOTIFICATION=t.RECEIVE_BITREES_TOKEN=t.REQUEST_BITREES_TOKEN=t.RECEIVE_RONGIM=t.RECEIVE_LOGIN_STATUS=t.REQUEST_LOGIN_STATUS=t.UPDATE_DAY_OPEN=t.CHANGE_ORDER_LIMIT=t.CHANGE_DEPTH_LIMIT=t.CLEAN_DEPTH=t.UPDATE_DEPTH=t.CLEAR_DEPTH=t.INIT_DEPTH=t.SWITCH_SUB_COMPONENT=t.REQUEST_TRADE_DATA=t.RECEIVE_TRADE_DATA=t.RECEIVE_QUOTA_DATA=t.REQUEST_QUOTA_DATA=t.SWITCH_TOOL=t.SET_INDICATOR_SINGLE_PARAM=t.SET_INDICATOR_PARAMS=t.SWITCH_STICK_STYLE=t.SWITCH_MAIN_INDICATOR=t.SHOW_SETTING=t.INCR_TIMER=t.UPDATE_TIMER=t.TOGGLE_FULL_SCREEN=t.SHOW_PERIODS=t.SWITCH_THEME=t.TOGGLE_THEME=t.SWITCH_PERIOD=t.SHOW_MARKET=t.SWITCH_MARKET=t.MAX_INDICATOR_LENGTH=t.DEL_INDICATOR=t.ADD_INDICATOR=t.SWITCH_INDICATOR_NAV=t.SET_INDICATOR_BY_INDEX=t.SET_INDICATORS=t.OPEN_MODAL=t.CLOSE_MODAL=t.RECEIVE_DEPTH_DATA=t.REQUEST_DEPTH_DATA=t.RECEIVE_PERIOD_DATA=t.REQUEST_PERIOD_DATA=t.DONOTING=void 0;var tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nt=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.switchAxisScale=i,t.postFeedback=a,t.deleteTicker=s,t.postTickers=u,t.updateTickerDraggingIndex=l,t.removeUserTicker=c,t.pushUserTicker=f,t.toggleTickerModalList=h,t.toggleMoreTickers=p,t.authRongIM=d,t.deleteWarning=_,t.toggleWarnings=v,t.postWarning=m,t.fetchWarnings=E,t.updateSysRoe=O,t.selectAlarmMarket=T,t.selectAlarmCoin=w,t.selectAlarmCurrency=P,t.changeWarningValue=x,t.toggleLeftBar=I,t.toggleTopNav=S,t.updateTicker=C,t.depthViewMounted=M,t.toggleEmoji=D,t.openEmoji=N,t.closeEmoji=L,t.closeImageViewer=B,t.openImageViewer=H,t.uploadImage=G,t.editMessage=W,t.appendMessage=K,t.fetchUsernames=X,t.pushBitreesMessage=z,t.addNotification=q,t.removeNotification=$,t.fetchBitreesToken=Z,t.requestRongIM=ne,t.login=ae,t.updateDayOpen=oe,t.changeOrderLimit=se,t.changeDepthLimit=ue,t.initDepth=le,t.clearDepth=ce,t.updateDepth=fe,t.cleanDepth=he,t.switchSubComponent=pe,t.receiveTradeData=ye,t.switchTool=ve,t.setIndicatorSingleParam=me,t.setIndicatorParams=be,t.switchStickStyle=Ee,t.switchMainIndicator=Oe,t.showSetting=Te,t.incrTimer=we,t.updateTimer=Pe,t.toggleFullScreen=xe,t.showPeriods=Ie,t.switchTheme=Se,t.toggleTheme=Ce,t.switchPeriod=Ae,t.showMarket=Re,t.switchMarket=ke,t.enlargeMaxIndicatorLength=Me,t.setIndicators=De,t.setIndicatorByIndex=Ne,t.switchIndicatorNav=Le,t.switchIndicator=je,t.closeModal=Fe,t.openModal=Be,t.fetchPeriodData=Ge,t.fetchDepthData=We,t.fetchQuotaData=Ke,t.fetchTradeData=Ye,t.requestNewsList=Xe,t.receiveNewsList=ze,t.getNewsList=qe,t.requestWeiboList=$e,t.receiveWeiboList=Qe,t.getWeiboList=Je,t.receiveWeiboCount=Ze,t.getWeiboCount=et;var rt=n(298),it=r(rt),at=n(256),ot=r(at),st=n(300),ut=void 0;ot.default.canUseDOM&&(ut=n(354));var lt=(0,st.NOLY_IDS)(84),ct=nt(lt,84),ft=ct[0],ht=ct[1],pt=ct[2],dt=ct[3],yt=ct[4],gt=ct[5],_t=ct[6],vt=ct[7],mt=ct[8],bt=ct[9],Et=ct[10],Ot=ct[11],Tt=ct[12],wt=ct[13],Pt=ct[14],xt=ct[15],It=ct[16],St=ct[17],Ct=ct[18],At=ct[19],Rt=ct[20],kt=ct[21],Mt=ct[22],Dt=ct[23],Nt=ct[24],Lt=ct[25],jt=ct[26],Ft=ct[27],Bt=ct[28],Ht=ct[29],Vt=ct[30],Ut=ct[31],Gt=ct[32],Wt=ct[33],Kt=ct[34],Yt=ct[35],Xt=ct[36],zt=ct[37],qt=ct[38],$t=ct[39],Qt=ct[40],Jt=ct[41],Zt=ct[42],en=ct[43],tn=ct[44],nn=ct[45],rn=ct[46],an=ct[47],on=ct[48],sn=ct[49],un=ct[50],ln=ct[51],cn=ct[52],fn=ct[53],hn=ct[54],pn=ct[55],dn=ct[56],yn=ct[57],gn=ct[58],_n=ct[59],vn=ct[60],mn=ct[61],bn=ct[62],En=ct[63],On=ct[64],Tn=ct[65],wn=ct[66],Pn=ct[67],xn=ct[68],In=ct[69],Sn=ct[70],Cn=ct[71],An=ct[72],Rn=ct[73],kn=ct[74],Mn=ct[75],Dn=ct[76],Nn=ct[77],Ln=ct[78],jn=ct[79],Fn=ct[80],Bn=ct[81],Hn=ct[82],Vn=ct[83];t.DONOTING=ft,t.REQUEST_PERIOD_DATA=ht,t.RECEIVE_PERIOD_DATA=pt,t.REQUEST_DEPTH_DATA=dt,t.RECEIVE_DEPTH_DATA=yt,t.CLOSE_MODAL=gt,t.OPEN_MODAL=_t,t.SET_INDICATORS=vt,t.SET_INDICATOR_BY_INDEX=mt,t.SWITCH_INDICATOR_NAV=bt,t.ADD_INDICATOR=Et,t.DEL_INDICATOR=Ot,
t.MAX_INDICATOR_LENGTH=Tt,t.SWITCH_MARKET=wt,t.SHOW_MARKET=Pt,t.SWITCH_PERIOD=xt,t.TOGGLE_THEME=It,t.SWITCH_THEME=St,t.SHOW_PERIODS=Ct,t.TOGGLE_FULL_SCREEN=At,t.UPDATE_TIMER=Rt,t.INCR_TIMER=kt,t.SHOW_SETTING=Mt,t.SWITCH_MAIN_INDICATOR=Dt,t.SWITCH_STICK_STYLE=Nt,t.SET_INDICATOR_PARAMS=Lt,t.SET_INDICATOR_SINGLE_PARAM=jt,t.SWITCH_TOOL=Ft,t.REQUEST_QUOTA_DATA=Bt,t.RECEIVE_QUOTA_DATA=Ht,t.RECEIVE_TRADE_DATA=Vt,t.REQUEST_TRADE_DATA=Ut,t.SWITCH_SUB_COMPONENT=Gt,t.INIT_DEPTH=Wt,t.CLEAR_DEPTH=Kt,t.UPDATE_DEPTH=Yt,t.CLEAN_DEPTH=Xt,t.CHANGE_DEPTH_LIMIT=zt,t.CHANGE_ORDER_LIMIT=qt,t.UPDATE_DAY_OPEN=$t,t.REQUEST_LOGIN_STATUS=Qt,t.RECEIVE_LOGIN_STATUS=Jt,t.RECEIVE_RONGIM=Zt,t.REQUEST_BITREES_TOKEN=en,t.RECEIVE_BITREES_TOKEN=tn,t.ADD_NOTIFICATION=nn,t.REMOVE_NOTIFICATION=rn,t.PUSH_BITREES_MESSAGE=an,t.RECEIVE_USERNAMES=on,t.EDIT_MESSAGE=sn,t.APPEND_MESSAGE=un,t.UPLOAD_IMAGE=ln,t.IMAGE_UPLOADED=cn,t.OPEN_IMAGE_VIEWER=fn,t.IMAGE_VIEWER_LOADED=hn,t.CLOSE_IMAGE_VIEWER=pn,t.OPEN_EMOJI=dn,t.CLOSE_EMOJI=yn,t.TOGGLE_EMOJI=gn,t.DEPTH_VIEW_MOUNTED=_n,t.UPDATE_TICKER=vn,t.TOGGLE_TOP_NAV=mn,t.TOGGLE_LEFT_BAR=bn,t.SELECT_ALARM_MARKET=En,t.SELECT_ALARM_COIN=On,t.SELECT_ALARM_CURRENCY=Tn,t.CHANGE_WARNING_VALUE=wn,t.UPDATE_SYS_ROE=Pn,t.RECEIVE_WARNINGS=xn,t.TOGGLE_WARNINGS=In,t.DELETE_WARNING=Sn,t.AUTH_RONGIM=Cn,t.TOGGLE_MORE_TICKERS=An,t.TOGGLE_TICKER_MODAL_LIST=Rn,t.PUSH_USER_TICKER=kn,t.REMOVE_USER_TICKER=Mn,t.UPDATE_TICKER_DRAGGING_INDEX=Dn,t.UPDATE_CUSTOM_TICKERS=Nn,t.SWITCH_AXIS_SCALE=Ln,t.RECEIVE_NEWS_LIST=jn,t.REQUEST_NEWS_LIST=Fn,t.REQUEST_WEIBO_LIST=Bn,t.RECEIVE_WEIBO_LIST=Hn,t.RECEIVE_WEIBO_COUNT=Vn;var Un={uid:"SERVICEUNAVAILABLENOTIFICATION",title:"系统通知",message:"系统正在更新版本，请稍后…",autoDismiss:0,level:"error"},Gn={uid:"SERVICEAVAILABLENOTIFICATION",title:"系统通知",message:"系统已更新",level:"success"},Wn=!1,Kn="//cdn.ronghub.com/RongIMLib-2.1.3.min.js",Yn="//cdn.ronghub.com/RongEmoji-2.1.3.min.js",Xn=!1,zn=!1},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=void 0,n=void 0,r=void 0;for(r=[],t=n=0;0<=e?n<e:n>e;t=0<=e?++n:--n)r.push(B++);return r}function a(e){var t=void 0,n=void 0,r=void 0;if(e.length)return e.slice(0);n={};for(t in e)j.call(e,t)&&(r=e[t],n[t]=r);return n}function o(e){return e[e.length-1]}function s(e,t){return"function"==typeof e&&(t=e,e="profile "+t.name),("undefined"!=typeof console&&null!==console?console.time:void 0)?(console.time(e),t(),console.timeEnd(e)):t()}function u(){return console.log.apply(console,arguments)}function l(){return console.log.apply(console,[new Date].concat(F.call(arguments)))}function c(e,t){return setTimeout(t,e)}function f(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(n=arguments[0],r=3<=arguments.length?F.call(arguments,1,i=arguments.length-1):(i=1,[]),t=arguments[i++],s=[],a=0,o=t.length;a<o;a++)e=t[a],"object"===("undefined"==typeof e?"undefined":R(e))&&e.length?s.push(n.apply(null,F.call(r).concat(F.call(e)))):s.push(n.apply(null,F.call(r).concat([e])));return s}function h(e,t){var n=void 0,r=void 0,i=void 0;return i=!1,r=e,n=function(){function n(){r>0?c(16,function(){n(r-=16)}):a()}function a(){return t(),i=!1}return r=e,!!i||(i=!0,void n())}}function p(e){var t=void 0;return t=function(){function t(t){return t?e(i):r.apply(null,n)}var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;a=arguments[0],n=3<=arguments.length?F.call(arguments,1,o=arguments.length-1):(o=1,[]),r=arguments[o++],a.apply(null,F.call(n).concat([function(){t((i=arguments[0],n=2<=arguments.length?F.call(arguments,1):[],i))}]))}}function d(e,t,n,r){var i;if(Array.isArray(t))(0,k.forEach)(t,function(t,i){n||nn.test(e)?r(e,t):d(e+"["+("object"===("undefined"==typeof t?"undefined":R(t))&&null!=t?i:"")+"]",t,n,r)});else if(n||"object"!==("undefined"==typeof t?"undefined":R(t)))r(e,t);else for(i in t)d(e+"["+i+"]",t[i],n,r)}function y(e,t){var n,r=[],i=function(e,t){var n=(0,k.isFunction)(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e))(0,k.forEach)(e,function(e){i(e.name,e.value)});else for(n in e)d(n,e[n],t,i);return r.join("&")}function g(e,t){if(null==e)throw new TypeError("can't convert "+e+" to object");if(e=""+e,t=+t,t!=t&&(t=0),t<0)throw new RangeError("repeat count must be non-negative");if(t==1/0)throw new RangeError("repeat count must be less than infinity");if(t=Math.floor(t),0==e.length||0==t)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1==(1&t)&&(n+=e),t>>>=1,0!=t;)e+=e;return n}function _(e){var t=String(e).split(/[eE]/);if(1==t.length)return t[0];var n="",r=e<0?"-":"",i=t[0].replace(".",""),a=Number(t[1])+1;return a<0?(n=r+"0.",n+=g("0",-a),n+i.replace(/^\-/,"")):(a-=i.length,n+=g("0",a),i+n)}function v(e){return e=e.toString(),1===e.length?"0"+e:e}function m(e){return v(e.getHours())+":"+v(e.getMinutes())+":"+v(e.getSeconds())}function b(e){return v(e.getHours())+":"+v(e.getMinutes())}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return[e.getFullYear(),v(e.getMonth()+1),v(e.getDate())].join(t)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;return"string"==typeof e&&(e=[e]),e.forEach(function(e){"undefined"==typeof yn[e]?(dn.push(e),yn[e]=t):yn[e]>t&&(yn[e]=t)}),!0}function T(e,t){"string"==typeof e&&(e=[e]);var n=void 0;return e.forEach(function(e){yn[e]&&yn[e]>=t&&(n=dn.indexOf(e))>-1&&dn.splice(n,1)}),!0}function w(e){return vn[e]}function P(e){return _n[e]}function x(e){return!isNaN(parseFloat(e))&&isFinite(e)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=L.default.get(e.coin_name),r=void 0;return r=["etc","eth","btc"].indexOf(e.currency)>-1?e.coin.slice(0,-3):"xbt"===e.coin?"btc":e.coin.length>3&&0===e.coin.indexOf("btc")?t?n:"btc":e.coin.length>3&&0===e.coin.indexOf("ltc")?t?n:"ltc":e.coin,[n,r.toUpperCase(),e.currency.toUpperCase()]}function S(){if("function"==typeof window.ga){var e;(e=window).ga.apply(e,arguments)}}function C(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=[],r=0,i=e.length;r<i;++r)n.push([t(e[r]),t(e[++r])]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.socket=t.unflatten=t.ga=t.humanize_date=t.humanize_time_short=t.getCoinName=t.isNumeric=t.getCurrencyName=t.getCurrencySymbol=t.removePersistTicker=t.persistTicker=t.humanize_time_2=t.noExponents=t.repeat=t.serialize=t.ok_init=t.cooldown_init=t.batch=t.sleep=t.debug=t.p=t.profile=t.last=t.clone=t.NOLY_IDS=t.__slice=t.__hasProp=t.TICKERPRIORITY=t.WARNINGTICKERPRIORITY=t.TOPTICKERPRIORITY=t.PERSISTTICKERPRIORITYMAPPING=t.PERSISTTICKERS=t.SUB_COMPONENT_WEIBO=t.SUB_COMPONENT_NEWS=t.SUB_COMPONENT_BITREES=t.SUB_COMPONENT_CHAT=t.SUB_COMPONENT_ALARMS=t.SUB_COMPONENT_TRADES=t.SUB_COMPONENT_ORDERS=t.SUB_COMPONENT_MARKETS=t.AXIS_SCALES=t.AXIX_SCALE_LOGARITHMIC=t.AXIS_SCALE_LINEAR=t.SETTING_TOOLS=t.SETTING_INDICATOR_PARAMS=t.SETTING_THEME=t.SETTING_AXIS_SCALE=t.SETTING_STICK_STYLE=t.SETTING_MAIN_INDICATOR=t.STICK_STYLES=t.STICK_STYLE_OHLC=t.STICK_STYLE_CANDLEHLC=t.STICK_STYLE_CANDLE=t.TOP_TICKERS=t.BTC38TICKERKEYS=t.BITTREXTICKERKEYS=t.POLONIEXTICKERKEYS=t.OTHERTICKERKEYS=t.DOGETICKERKEYS=t.ETHTICKERKEYS=t.LTCTICKERKEYS=t.BTCTICKERKEYS=t.BTC38TICKERS=t.BITTREXTICKERS=t.POLONIEXTICKERS=t.OTHERTICKERS=t.DOGETICKERS=t.ETHTICKERS=t.LTCTICKERS=t.BTCTICKERS=t.COINS=t.MARKETS=t.AVAILABLE_PERIODS=t.PERIOD_LINE=t.PERIOD_MINUTE=t.PERIOD_3MINUTES=t.PERIOD_5MINUTES=t.PERIOD_10MINUTES=t.PERIOD_15MINUTES=t.PERIOD_30MINUTES=t.PERIOD_HOUR=t.PERIOD_2HOURS=t.PERIOD_4HOURS=t.PERIOD_6HOURS=t.PERIOD_12HOURS=t.PERIOD_DAY=t.PERIOD_3DAYS=t.PERIOD_WEEK=t.PERIOD_MONTH=t.MAIN_INDICATORS=t.PARAM_INDICATORS=t.INDICATORS=t.INDICATOR_StochRSI=t.INDICATOR_PSY=t.INDICATOR_BOLL=t.INDICATOR_MTM=t.INDICATOR_ROC=t.INDICATOR_KDJ=t.INDICATOR_SAR=t.INDICATOR_WR=t.INDICATOR_RSI=t.INDICATOR_EMV=t.INDICATOR_OBV=t.INDICATOR_VR=t.INDICATOR_BRAR=t.INDICATOR_TRIX=t.INDICATOR_DMA=t.INDICATOR_DMI=t.INDICATOR_MACD=t.INDICATOR_VOLUME=t.INDICATOR_EMA=t.INDICATOR_MA=t.INDICATOR_NEWBIE=t.INDICATOR_LSI=t.INDICATOR_BTI=t.INDICATOR_NONE=t.SOCKET_ADDRESS=t.APP_PROTOCAL_SSL=t.onWidget=t.currencySymbol=t.currencyName=t.pageTitle=t.URL_PREFIX=t.STATE_AFTER=t.STATE_DRAWING=t.STATE_BEFORE=t.TOOL_RULER=t.TOOL_FIBSPIRAL=t.TOOL_CLEAR=t.TOOL_BANDLINE=t.TOOL_TRIPARALLELLINE=t.TOOL_BIPARALLERAYLINE=t.TOOL_BIPARALLELLINE=t.TOOL_PRICELINE=t.TOOL_VERTISTRAIGHTLINE=t.TOOL_HORISEGLINE=t.TOOL_HORIRAYLINE=t.TOOL_HORISTRAIGHTLINE=t.TOOL_RAYLINE=t.TOOL_ARROWLINE=t.TOOL_STRAIGHTLINE=t.TOOL_SEGLINE=t.TOOL_DRAWFIBFANS=t.TOOL_DRAWFIBRETRACE=t.TOOL_DRAWLINES=t.TOOL_CROSSCURSOR=t.TOOL_CURSOR=t.TX_COM_TID=t.TX_TYPE=t.TX_CREATED_AT=t.TX_TICK=t.TX_AMOUNT=t.TX_PRICE=t.TX_TID=t.PERIOD_BTI=t.PERIOD_LSI=t.PERIOD_NEWBIE=t.PERIOD_VOLUME=t.PERIOD_CLOSE=t.PERIOD_LOW=t.PERIOD_HIGH=t.PERIOD_OPEN=t.PERIOD_DATE=void 0;var A=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=n(255),M=n(256),D=r(M),N=n(301),L=r(N),j={}.hasOwnProperty,F=[].slice,B=0,H=i(9),V=A(H,9),U=V[0],G=V[1],W=V[2],K=V[3],Y=V[4],X=V[5],z=V[6],q=V[7],$=V[8];t.PERIOD_DATE=U,t.PERIOD_OPEN=G,t.PERIOD_HIGH=W,t.PERIOD_LOW=K,t.PERIOD_CLOSE=Y,t.PERIOD_VOLUME=X,t.PERIOD_NEWBIE=z,t.PERIOD_LSI=q,t.PERIOD_BTI=$;var Q=i(7),J=A(Q,7),Z=J[0],ee=J[1],te=J[2],ne=J[3],re=J[4],ie=J[5],ae=J[6];t.TX_TID=Z,t.TX_PRICE=ee,t.TX_AMOUNT=te,t.TX_TICK=ne,t.TX_CREATED_AT=re,t.TX_TYPE=ie,t.TX_COM_TID=ae;var oe=i(21),se=A(oe,21),ue=se[0],le=se[1],ce=se[2],fe=se[3],he=se[4],pe=se[5],de=se[6],ye=se[7],ge=se[8],_e=se[9],ve=se[10],me=se[11],be=se[12],Ee=se[13],Oe=se[14],Te=se[15],we=se[16],Pe=se[17],xe=se[18],Ie=se[19],Se=se[20];t.TOOL_CURSOR=ue,t.TOOL_CROSSCURSOR=le,t.TOOL_DRAWLINES=ce,t.TOOL_DRAWFIBRETRACE=fe,t.TOOL_DRAWFIBFANS=he,t.TOOL_SEGLINE=pe,t.TOOL_STRAIGHTLINE=de,t.TOOL_ARROWLINE=ye,t.TOOL_RAYLINE=ge,t.TOOL_HORISTRAIGHTLINE=_e,t.TOOL_HORIRAYLINE=ve,t.TOOL_HORISEGLINE=me,t.TOOL_VERTISTRAIGHTLINE=be,t.TOOL_PRICELINE=Ee,t.TOOL_BIPARALLELLINE=Oe,t.TOOL_BIPARALLERAYLINE=Te,t.TOOL_TRIPARALLELLINE=we,t.TOOL_BANDLINE=Pe,t.TOOL_CLEAR=xe,t.TOOL_FIBSPIRAL=Ie,t.TOOL_RULER=Se;var Ce=i(3),Ae=A(Ce,3),Re=Ae[0],ke=Ae[1],Me=Ae[2];t.STATE_BEFORE=Re,t.STATE_DRAWING=ke,t.STATE_AFTER=Me;var De=window.$pageTitle||"",Ne=window.$currencyName||"",Le=window.$currencySymbol||"",je=window.onWidget||!1;t.URL_PREFIX=je?"/widgetembed":"";t.pageTitle=De,t.currencyName=Ne,t.currencySymbol=Le,t.onWidget=je;var Fe=t.APP_PROTOCAL_SSL=window.location&&window.location.protocol.indexOf("https")>-1,Be=t.SOCKET_ADDRESS=je?"https://pluginio.sosobtc.com":Fe?"https://io.sosobtc.com":"http://io.sosobtc.com:6789",He=t.INDICATOR_NONE="NONE",Ve=t.INDICATOR_BTI="BTI",Ue=t.INDICATOR_LSI="LSI",Ge=t.INDICATOR_NEWBIE="Newbie",We=t.INDICATOR_MA="MA",Ke=t.INDICATOR_EMA="EMA",Ye=t.INDICATOR_VOLUME="VOLUME",Xe=t.INDICATOR_MACD="MACD",ze=t.INDICATOR_DMI="DMI",qe=t.INDICATOR_DMA="DMA",$e=t.INDICATOR_TRIX="TRIX",Qe=t.INDICATOR_BRAR="BRAR",Je=t.INDICATOR_VR="VR",Ze=t.INDICATOR_OBV="OBV",et=t.INDICATOR_EMV="EMV",tt=t.INDICATOR_RSI="RSI",nt=t.INDICATOR_WR="WR",rt=t.INDICATOR_SAR="SAR",it=t.INDICATOR_KDJ="KDJ",at=t.INDICATOR_ROC="ROC",ot=t.INDICATOR_MTM="MTM",st=t.INDICATOR_BOLL="BOLL",ut=t.INDICATOR_PSY="PSY",lt=t.INDICATOR_StochRSI="StochRSI",ct=(t.INDICATORS=[{key:Ye,name:Ye},{key:Xe,name:Xe},{key:ze,name:ze},{key:qe,name:qe},{key:$e,name:$e},{key:Qe,name:Qe},{key:Je,name:Je},{key:Ze,name:Ze},{key:et,name:et},{key:tt,name:tt},{key:nt,name:nt},{key:rt,name:rt},{key:it,name:it},{key:at,name:at},{key:ot,name:ot},{key:st,name:st},{key:ut,name:ut},{key:lt,name:lt},{key:We,name:We},{key:Ke,name:Ke}].concat(je?[]:[{key:Ve,name:Ve},{key:Ue,name:Ue},{key:Ge,name:Ge}]),t.PARAM_INDICATORS=[We,Ke,Ye,Xe,ze,qe,$e,Qe,Je,Ze,et,tt,nt,it,at,ot,st,ut,lt],t.MAIN_INDICATORS=[We,Ke,st,rt,He],t.PERIOD_MONTH={period:2592e3,name:"月线"}),ft=t.PERIOD_WEEK={period:604800,name:"周线"},ht=t.PERIOD_3DAYS={period:259200,name:"3天"},pt=t.PERIOD_DAY={period:86400,name:"1天"},dt=t.PERIOD_12HOURS={period:43200,name:"12小时"},yt=t.PERIOD_6HOURS={period:21600,name:"6小时"},gt=t.PERIOD_4HOURS={period:14400,name:"4小时"},_t=t.PERIOD_2HOURS={period:7200,name:"2小时"},vt=t.PERIOD_HOUR={period:3600,name:"1小时"},mt=t.PERIOD_30MINUTES={period:1800,name:"30分钟"},bt=t.PERIOD_15MINUTES={period:900,name:"15分钟"},Et=t.PERIOD_10MINUTES={period:600,name:"10分钟"},Ot=t.PERIOD_5MINUTES={period:300,name:"5分钟"},Tt=t.PERIOD_3MINUTES={period:180,name:"3分钟"},wt=t.PERIOD_MINUTE={period:60,name:"1分钟"},Pt=(t.PERIOD_LINE={period:"line",name:"分时"},t.AVAILABLE_PERIODS=[ct,ft,ht,pt,dt,yt,gt,_t,vt,mt,bt,Et,Ot,Tt,wt],t.MARKETS=(0,k.cloneDeep)(window.MARKETS||[])),xt=t.COINS=(0,k.cloneDeep)(window.COINS||[]),It=t.BTCTICKERS=[],St=t.LTCTICKERS=[],Ct=t.ETHTICKERS=[],At=t.DOGETICKERS=[],Rt=t.OTHERTICKERS=[],kt=t.POLONIEXTICKERS=[],Mt=t.BITTREXTICKERS=[],Dt=t.BTC38TICKERS=[],Nt=t.BTCTICKERKEYS=[],Lt=t.LTCTICKERKEYS=[],jt=t.ETHTICKERKEYS=[],Ft=t.DOGETICKERKEYS=[],Bt=t.OTHERTICKERKEYS=[],Ht=t.POLONIEXTICKERKEYS=[],Vt=t.BITTREXTICKERKEYS=[],Ut=t.BTC38TICKERKEYS=[];L.default.setLocale("zh-CN"),xt.forEach(function(e){var t=e.mid,n=(0,k.find)(Pt,{mid:t});if(n){if(n.hidden&&n.hide_other)return;var r=n.marketName||(n.marketName=L.default.get(n.name)),i=L.default.get(e.coin_name);["okcoinfutures","bitvc"].indexOf(t)>-1?e.coinName=i:e.coinName=["btc"===e.currency?e.coin.slice(0,-3).toUpperCase():e.coin.toUpperCase()].concat(i.length?i:[]).join("-"),e.marketName=r,e=a(e),"btc"===e.coin_type?(It.push(e),Nt.push(e.db_key)):"ltc"===e.coin_type?(St.push(e),Lt.push(e.db_key)):("eth"===e.coin?(Ct.push(e),jt.push(e.db_key)):"doge"===e.coin&&(At.push(e),Ft.push(e.db_key)),"poloniex"===t?(kt.push(e),Ht.push(e.db_key)):"bittrex"===t?(Mt.push(e),Vt.push(e.db_key)):"btc38"===t?(Dt.push(e),Ut.push(e.db_key)):(Rt.push(e),Bt.push(e.db_key)))}});var Gt=(t.TOP_TICKERS={btc:[["okcoin","btc","cny"],["bitstamp","btc","usd"],["huobi","btc","cny"]],ltc:[["okcoin","ltc","cny"],["btce","ltc","usd"],["btc38","ltc","cny"]]},t.STICK_STYLE_CANDLE="CandleStick"),Wt=t.STICK_STYLE_CANDLEHLC="CandleStickHLC",Kt=t.STICK_STYLE_OHLC="OHLC",Yt=(t.STICK_STYLES=[Gt,Wt,Kt],i(6)),Xt=A(Yt,6),zt=Xt[0],qt=Xt[1],$t=Xt[2],Qt=Xt[3],Jt=Xt[4],Zt=Xt[5];t.SETTING_MAIN_INDICATOR=zt,t.SETTING_STICK_STYLE=qt,t.SETTING_AXIS_SCALE=$t,t.SETTING_THEME=Qt,t.SETTING_INDICATOR_PARAMS=Jt,t.SETTING_TOOLS=Zt;var en="linear",tn="logarithmic";t.AXIS_SCALE_LINEAR=en,t.AXIX_SCALE_LOGARITHMIC=tn;var nn=(t.AXIS_SCALES=[{key:en,name:"线性坐标"},{key:tn,name:"对数坐标"}],/\[\]$/),rn=i(8),an=A(rn,8),on=an[0],sn=an[1],un=an[2],ln=an[3],cn=an[4],fn=an[5],hn=an[6],pn=an[7];t.SUB_COMPONENT_MARKETS=on,t.SUB_COMPONENT_ORDERS=sn,t.SUB_COMPONENT_TRADES=un,t.SUB_COMPONENT_ALARMS=ln,t.SUB_COMPONENT_CHAT=cn,t.SUB_COMPONENT_BITREES=fn,t.SUB_COMPONENT_NEWS=hn,t.SUB_COMPONENT_WEIBO=pn;var dn=t.PERSISTTICKERS=[],yn=t.PERSISTTICKERPRIORITYMAPPING={},gn=(t.TOPTICKERPRIORITY=1,t.WARNINGTICKERPRIORITY=2,t.TICKERPRIORITY=3),_n={cny:"￥",usd:"$",btc:"฿",jpy:"円",inr:"₹",krw:"₩",etc:"",eth:"",usdt:"",bcc:""},vn={cny:"元",usd:"美元",btc:"比特币",jpy:"日元",inr:"印度卢比",krw:"韩元",etc:"",eth:"",usdt:"",bcc:""};t.__hasProp=j,t.__slice=F,t.NOLY_IDS=i,t.clone=a,t.last=o,t.profile=s,t.p=u,t.debug=l,t.sleep=c,t.batch=f,t.cooldown_init=h,t.ok_init=p,t.serialize=y,t.repeat=g,t.noExponents=_,t.humanize_time_2=m,t.persistTicker=O,t.removePersistTicker=T,t.getCurrencySymbol=P,t.getCurrencyName=w,t.isNumeric=x,t.getCoinName=I,t.humanize_time_short=b,t.humanize_date=E,t.ga=S,t.unflatten=C;t.socket=D.default.canUseDOM?n(302)(Be):{};String.fromFloat=function(e,t){for(var n=e.toFixed(t),r=n.length-1;r>=0;r--){if("."==n[r])return n.substring(0,r);if("0"!=n[r])return n.substring(0,r+1)}}},function(e,t,n){var r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,o){i=[],r=new(o()),a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a))}(void 0,function(){var e={defaultLocale:"en"},t=function(t){t=t||{},this.defaultLocale=t.defaultLocale||e.defaultLocale};return t.prototype.setMessages=function(e){this.messages=e},t.prototype.get=function(e,t){if(!this.has(e))return e;var n=this._getMessage(e,t);return null===n?e:(t&&(n=this._applyReplacements(n,t)),n)},t.prototype.has=function(e){return!("string"!=typeof e||!this.messages)&&null!==this._getMessage(e)},t.prototype.choice=function(e,t,n){n="undefined"!=typeof n?n:{},n.count=t;var r=this.get(e,n);if(null===r||void 0===r)return r;for(var i=r.split("|"),a=[],o=/{\d+}\s(.+)|\[\d+,\d+\]\s(.+)|\[\d+,Inf\]\s(.+)/,s=0;s<i.length;s++)if(i[s]=i[s].trim(),o.test(i[s])){var u=i[s].split(/\s/);a.push(u.shift()),i[s]=u.join(" ")}if(1===i.length)return r;for(var s=0;s<a.length;s++)if(this._testInterval(t,a[s]))return i[s];return t>1?i[1]:i[0]},t.prototype.setLocale=function(e){this.locale=e},t.prototype.getLocale=function(){return this.locale||this.defaultLocale},t.prototype._parseKey=function(e){if("string"!=typeof e)return null;var t=e.split(".");return{source:this.getLocale()+"."+t[0],entries:t.slice(1)}},t.prototype._getMessage=function(e){if(e=this._parseKey(e),void 0===this.messages[e.source])return null;for(var t=this.messages[e.source];e.entries.length&&(t=t[e.entries.shift()]););return"string"!=typeof t?null:t},t.prototype._applyReplacements=function(e,t){for(var n in t)e=e.split(":"+n).join(t[n]);return e},t.prototype._testInterval=function(e,t){return!1},t}),function(n){var r={"zh-CN.messages":{data:{save:"数据暂时未能保存，请稍后重试。"}},"zh-CN.global":{symbols:{btc:"btc",ltc:"ltc",xbt:"btc",btcweek:"BTC本周",btcnextweek:"BTC次周",btcquarter:"BTC本季",ltcweek:"LTC本周",ltcnextweek:"LTC次周",ltcquarter:"LTC本季"},btc:"btc",ltc:"ltc",okcoin:"OKCoin币行",okcoincom:"OKCoin国际",okcoinfutures:"OKCoin合约",btctrade:"BTCTrade",jubi:"聚币网",huobi:"火币网",796:"796期货",btc38:"比特时代",btcchina:"比特币中国",btccpro:"BTCC Pro",bitstamp:"Bitstamp",coinbase:"CoinBase",bitfinex:"Bitfinex",btce:"BTC-E",itbit:"itBit",bitvc:"BitVC期货",cnbtc:"中国比特币",btc100:"BTC100",huobiusd:"火币美元现货",yunbi:"云币网",bter:"比特儿",bitbays:"币贝网",yuanbaohui:"元宝网",poloniex:"Poloniex",haobtc:"HaoBTC",kraken:"Kraken",btcbox:"BTCBOX",bittrex:"Bittrex",dayibi:"大壹币",dahonghuo:"大红火",btc9:"币久网",bitmex:"BitMEX",bitmexqh:"BitMEX掉期合约",bitmexcny:"BitMEX人民币期货",bitmexusd:"BitMEX美元期货",19800:"19800",buyscc:"鼎盛未来",btcxindia:"BTCXIndia",o2btc:"O2BTC",bichuang:"币创网",bitflyer:"bitFlyer",quoine:"Quoine",coincheck:"coincheck",zaif:"Zaif",korbit:"Korbit",coinone:"coinone",lakebtc:"LakeBTC",szzc:"海枫藤",etcwin:"币盈网","100bi":"百币网",huazhong:"华中数字",btcd1:"比特币第一交易所",huiz:"北京数字资产",bithumb:"bithumb",gemini:"GEMINI",szzc51:"51数字资产",viabtc:"微比特",liqui:"Liqui",quanbijs:"全币经世",yunliancoin:"云联网",jys100:"金钥匙",btop:"B.top",biduobao:"币多宝",bitstar:"BitStar",gbcp:"GBCP",bullbtc:"牛比特",binance:"币安",okex:"OKEX",dex:"DEX",dragonb:"dragonb",hitbtc:"Hitbtc",dsx:"Dsx",livecoin:"Livecoin",yobtc:"优比特","12lian":"12链",tabs:{btc:"BTC",ltc:"LTC",eth:"ETH",etc:"ETC",bcc:"BCC",yunbi:"云币网",jubi:"聚币网",poloniex:"P网",bichuang:"币创网",bittrex:"B网",btc38:"BTC38",atc:"其他币",szzc:"海枫藤",etcwin:"币盈网",liqui:"Liqui",binance:"币安",yobtc:"优比特",bter:"比特儿",btcchina:"比特币中国"},coin_names:{btc:"比特币",ltc:"莱特币",btcweek:"BTC本周",btcnextweek:"BTC次周",btcquarter:"BTC本季",ltcweek:"LTC本周",ltcnextweek:"LTC次周",ltcquarter:"LTC本季",bts:"比特股",doge:"狗狗币",xrp:"瑞波币",xlm:"恒星币",nxt:"未来币",blk:"黑币",bils:"比利股",bost:"增长币",mec:"美卡币",wdc:"世界币",qrk:"夸克币",ybc:"元宝币",zcc:"招财币",bec:"比奥币",ppc:"点点币",anc:"阿侬币",apc:"苹果币",unc:"联合币",xpm:"质数币",ric:"黎曼币",src:"安全币",tag:"悬赏币",dgc:"数码币",eac:"地球币",vpn:"微币",xem:"新经币",ncs:"资产股",xcn:"氪石币",voot:"幽灵币",sys:"系统币",nrs:"诺尔股",med:"地中海币",nmc:"域名币",pts:"原型股",xcp:"合约币",ftc:"羽毛币",ifc:"无限币",vtc:"绿币",max:"最大币",mint:"薄荷币",tix:"彩币",dvc:"开发币",zet:"泽塔币",frc:"运输币",net:"",tips:"帽子币",btb:"比特金",exc:"极点币",red:"红币",mmc:"记忆币",yac:"雅币",dtc:"数据币",cmc:"宇宙币",cnc:"中国币",bqc:"烧烤币",btq:"比特券",dash:"达世币",eth:"以太坊",ggp:"共赢积分",cec:"",sak:"鲨鱼基金",plc:"保罗币",drk:"暗黑币",bc:"黑币",tfc:"传送币",fz:"冰河币",jbc:"聚宝币",vrc:"维理币",dnc:"安网币",gooc:"谷壳币",abc:"太一股",trmb:"太一元",irc:"储备币",fct:"公证币",axf:"美基金",vap:"增值积分",cic:"众创币",rhc:"犀牛币",xsi:"稳定股",yby:"乐橙币",smc:"智能币",mc:"猴币",tmc:"时代币",bbr:"布尔币",bcn:"字节币",btcd:"比特黑",btsx:"比特股",cent:"便士币",cga:"A字币",dgb:"DGB币",dns:"域名股",emc:"崛起币",emc2:"锿币",flo:"弗洛林币",flt:"彩蝶币",geo:"地理币",grc:"格雷德币",huc:"猎手币",maid:"互联网币",mtc:"猴宝币",myr:"多彩币",ozc:"氧源积分",pink:"代币",qec:"企鹅币",rby:"红宝石币",rdd:"蜗牛币",str:"恒星币",sync:"同步币",vnl:"韦恩币",xbt:"比特币",xmg:"魔笛币",xmr:"门罗币",dgd:"Digix",dcs:"社区股",sc:"云储币",pls:"游戏股",dao:"道资金",lsk:"应用链",waves:"",vox:"瓦氪币",club:"",sar:"萨尔币",amp:"",plp:"保罗积分",pnc:"牡丹通宝",atc:"蚂蚁币",atc_19800:"财产币",wmc:"雾霾币",dgg:"数字金",etc:"",steem:"",sbd:"",exp:"",afc:"亚冠币",ktc:"肯特币",mxi:"明星币",kp:"大韩积分",nav:"",lbc:"",bfx:"",nbc:"新赛波币",xyc:"逍遥币",kpc:"开普勒币",pot:"",pvox:"体素币",naut:"",burst:"",qora:"简约币",omni:"",clam:"贝壳币",game:"游戏币",game_yuanbaohui:"游戏点",bcy:"",sdc:"暗影币",nsr:"",sjcx:"",xst:"",zec:"",bmc:"宝马币",chc:"区链币",gmc:"游乐币",cfc:"匠人币",kc:"K币",ytc:"一号币",ysc:"云商币",elc:"进化币",gss:"魔鬼币","1st":"第一滴血",sts:"红人豆",txp:"同行积分",ardr:"阿朵币",rep:"",dtv:"",ans:"小蚁股",brk:"",xzc:"",zmc:"",gnt:"",hsp:"乐享积分",hlb:"活力币",bkc:"百库币",cir:"流通币",anc_19800:"小蚁币",lkc:"幸运币",met:"美通币",lsk_jubi:"",xas:"阿希币",rss:"红贝壳",rio:"里约币",scc:"收藏币",tdg:"淘地股",fhc:"凤凰币",loho:"乐活积分",jhc:"金花币",mbc:"移动币",lsc:"梁山币",tyzb:"通缘众宝币",vic:"创投币",zlc:"众联币",lisk:"应用链",zxc:"众行币",ltn:"莱特积分",vtc_buyscc:"胜利币",smc_buyscc:"赛马积分",lyc:"琅琊币",jc:"椒币",jzc:"金泽币",cyc:"创元币",ylc:"运量币",auc:"黄金兑",blc:"百乐积分",ets:"象由股",lmc:"邻萌宝",o2:"氧源积分",ecf:"锎宝汇",fcb:"翡翠宝",xqg:"小企股",fts:"未来股",yyc:"优游股",xzc_btc38:"零币",etp:"熵",brw:"区块赛车",win:"",pasc:"",xbc:"",bcc:"",bcu:"",g:"G积分",rrt:"",time:"",ark:"",dcr:"",ftc_bittrex:"",tbcr:"",tbc:"",jtc:"伽特币",fdc:"芬达币",gcc:"金猫币",mgc:"众合币",tdi:"通源积分",via:"",dtb:"",ldc:"引领币",bcs:"链亨币",hjb:"恒金币",strat:"",skt:"鲨之信",ryjy:"如意金元",wings:"",rlc:"",pivx:"",trst:"",lun:"",gup:"",gno:"",sdc_bittrex:"",fortis:"富通积分",fldc:"",gbyte:"",rise:"",ok:"",tkn:"",szc:"数字币",xcc:"新储币",gyp:"公益币",qtum:"量子链",ant:"",xvg:"",bxjf:"百孝积分",jlyh:"金粒一号",byth:"碧玉通汇",bela:"",neos:"",rads:"",nxc:"",note:"",xvc:"",btm:"",fec:"精品币",btz:"币投资产",ylc_1:"云联币",xtc:"物联币",ytc_1:"游艇币",hsc:"恒生币",ylg:"云联股",klc:"康旅币",lsc_1:"鲁商币",fxc:"富烯币",bat:"",ubq:"",wdc_1:"智慧币",ftc_1:"公证币",egc:"生态币",obs:"",bash:"幸运链",yq:"蕴奇积分",jdfb:"金帝福宝",iot:"",gxs:"公信宝",bxl:"百孝链",zgc:"黄金链",cfi:"",myst:"",ptoy:"",grs:"",jsz:"金手指",llc:"楼兰币",puc:"爱瞳币",peb:"普银",pgc:"乐园通",xsgs:"雪山古树",mryc:"美人鱼",round:"",plu:"",vsl:"",icn:"",edg:"",taas:"",bcap:"",hmq:"",incnt:"",mln:"",dct:"",mgo:"",ltg:"莱特股",syc:"三蚁币",cuc:"币联币",zbtd:"中宝通兑",mhc:"门户币",the:"泰和汇",bl:"币链",quk:"",qukr:"",acc:"聚农币",omt:"最优币",shc:"盛和币",mc_buyscc:"梦想币",zen:"",oedi:"",oedir:"",qrl:"",nmr:"",bnt:"",snt:"",eos:"",lzq:"蓝洲券",mcc:"行云币",xlmr:"",xlm_1:"",btcr:"",gbc:"",gbcr:"",ico:"",pay:"",mco:"",ugt:"",tic:"钛币",snm:"",blc_100bi:"贝蓝币",wxc:"文襄合约",neo:"",bnb:"",xel:"",omg:"",cvc:"",dhg:"",zcl:"",bjc:"久链",zecs:"算力合约",ins:"印链",adt:"",fid:"飞币",hanr:"",han:"",bcc_btcd1:"贝贝币",er:"",coval:"",bch:"",blc_btcd1:"",dex:"",inf:"讯链币",san:"",btk:"",dnt:"",gas:"",elc_jubi:"投票链",stx:"",ics:"",adx:"",cdt:"",storj:"",hcc:"医疗链",neogas:"小蚁币",wdc_yobtc:"",ug:"U股",shs:"分享股",xdsh:"新世币",xmy:"多彩币",mtl:"",swift:"",oax:"",acc_dragonb:"资产本币",npc:"节点本币",vsc:"","12ct":"蝶链币",tlc:"藏宝大陆",act:"",hsr:"Hcash",usdt:"",zrx:"",ven:"唯链",xnc:"玄链",rts:"瑞资链",wzc:"玩赚币",oc:"一币",jyc:"金鱼币",btp:"新比特",snc:"社交链",psc:"众兴币",yoyo:"",kll:"康旅链",sigma:"西格玛",anc_100bi:"安全链",wtc:"沃尔顿链",ipc:"知产币",ubc:"优wifi",llt:"",lrc:"",pst:"",doc:"域链",cmc_szzc:"云宝",wcg:"华克金",ebc:"亿书",ptb:"",kmd:"",trig:"",ae:"",iota:"",tnt:"",pdc:"",kec:"",axf_buyscc:""}},"zh-CN.kline":{periods:{text:"周期",line:"分时"}},"zh-CN.validation":{accepted:"The :attribute must be accepted.",active_url:"The :attribute is not a valid URL.",after:"The :attribute must be a date after :date.",alpha:"The :attribute may only contain letters.",alpha_dash:"The :attribute may only contain letters, numbers, and dashes.",alpha_num:"The :attribute may only contain letters and numbers.",array:"The :attribute must be an array.",before:"The :attribute must be a date before :date.",between:{numeric:"The :attribute must be between :min and :max.",file:"The :attribute must be between :min and :max kilobytes.",string:":attribute必须是:min到:max个字符",array:"The :attribute must have between :min and :max items."},boolean:"The :attribute field must be true or false.",confirmed:"The :attribute confirmation does not match.",date:"The :attribute is not a valid date.",date_format:"The :attribute does not match the format :format.",different:"The :attribute and :other must be different.",digits:"The :attribute must be :digits digits.",digits_between:"The :attribute must be between :min and :max digits.",email:":attribute字段必须是合法的邮箱地址",exists:"The selected :attribute is invalid.",filled:"The :attribute field is required.",image:"The :attribute must be an image.",in:"The selected :attribute is invalid.",integer:"The :attribute must be an integer.",ip:"The :attribute must be a valid IP address.",json:"The :attribute must be a valid JSON string.",max:{numeric:"The :attribute may not be greater than :max.",file:"The :attribute may not be greater than :max kilobytes.",string:":attribute不能超过:max个字符",array:"The :attribute may not have more than :max items."},mimes:"The :attribute must be a file of type: :values.",min:{numeric:"The :attribute must be at least :min.",file:"The :attribute must be at least :min kilobytes.",string:"The :attribute must be at least :min characters.",array:"The :attribute must have at least :min items."},not_in:"The selected :attribute is invalid.",numeric:"The :attribute must be a number.",regex:"The :attribute format is invalid.",required:":attribute是必填的。",required_if:"The :attribute field is required when :other is :value.",required_unless:"The :attribute field is required unless :other is in :values.",required_with:"The :attribute field is required when :values is present.",required_with_all:"The :attribute field is required when :values is present.",required_without:"The :attribute field is required when :values is not present.",required_without_all:"The :attribute field is required when none of :values are present.",same:"The :attribute and :other must match.",size:{numeric:"The :attribute must be :size.",file:"The :attribute must be :size kilobytes.",string:"The :attribute must be :size characters.",array:"The :attribute must contain :size items."},string:"The :attribute must be a string.",timezone:"The :attribute must be a valid zone.",unique:"The :attribute has already been taken.",url:"The :attribute format is invalid.",custom:{"attribute-name":{"rule-name":"custom-message"}},attributes:[]},"en.global":{btc:"BTC",ltc:"LTC",okcoin:"OKCoin"},"en.kline":{periods:{line:"Line"}},"en.pagination":{previous:"&laquo; Previous",next:"Next &raquo;"},"en.validation":{accepted:"The :attribute must be accepted.",active_url:"The :attribute is not a valid URL.",after:"The :attribute must be a date after :date.",alpha:"The :attribute may only contain letters.",alpha_dash:"The :attribute may only contain letters, numbers, and dashes.",alpha_num:"The :attribute may only contain letters and numbers.",array:"The :attribute must be an array.",before:"The :attribute must be a date before :date.",between:{numeric:"The :attribute must be between :min and :max.",file:"The :attribute must be between :min and :max kilobytes.",string:"The :attribute must be between :min and :max characters.",array:"The :attribute must have between :min and :max items."},boolean:"The :attribute field must be true or false.",confirmed:"The :attribute confirmation does not match.",date:"The :attribute is not a valid date.",date_format:"The :attribute does not match the format :format.",different:"The :attribute and :other must be different.",digits:"The :attribute must be :digits digits.",digits_between:"The :attribute must be between :min and :max digits.",email:"The :attribute must be a valid email address.",exists:"The selected :attribute is invalid.",filled:"The :attribute field is required.",image:"The :attribute must be an image.",in:"The selected :attribute is invalid.",integer:"The :attribute must be an integer.",ip:"The :attribute must be a valid IP address.",json:"The :attribute must be a valid JSON string.",max:{numeric:"The :attribute may not be greater than :max.",file:"The :attribute may not be greater than :max kilobytes.",string:"The :attribute may not be greater than :max characters.",array:"The :attribute may not have more than :max items."},mimes:"The :attribute must be a file of type: :values.",min:{numeric:"The :attribute must be at least :min.",file:"The :attribute must be at least :min kilobytes.",string:"The :attribute must be at least :min characters.",array:"The :attribute must have at least :min items."},not_in:"The selected :attribute is invalid.",numeric:"The :attribute must be a number.",regex:"The :attribute format is invalid.",required:"The :attribute field is required.",required_if:"The :attribute field is required when :other is :value.",required_unless:"The :attribute field is required unless :other is in :values.",required_with:"The :attribute field is required when :values is present.",required_with_all:"The :attribute field is required when :values is present.",required_without:"The :attribute field is required when :values is not present.",required_without_all:"The :attribute field is required when none of :values are present.",same:"The :attribute and :other must match.",size:{numeric:"The :attribute must be :size.",file:"The :attribute must be :size kilobytes.",string:"The :attribute must be :size characters.",array:"The :attribute must contain :size items."},string:"The :attribute must be a string.",timezone:"The :attribute must be a valid zone.",unique:"The :attribute has already been taken.",url:"The :attribute format is invalid.",custom:{"attribute-name":{"rule-name":"custom-message"}},attributes:[]},"en.passwords":{password:"Passwords must be at least six characters and match the confirmation.",reset:"Your password has been reset!",sent:"We have e-mailed your password reset link!",token:"This password reset token is invalid.",user:"We can't find a user with that e-mail address."},"en.auth":{failed:"These credentials do not match our records.",throttle:"Too many login attempts. Please try again in :seconds seconds."}};"object"===o(t)?e.exports.setMessages(r):Lang.setMessages(r)}(window)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(356),s=r(o),u=n(361),l=r(u),c=n(362),f=r(c),h=n(369),p=r(h),d=n(370),y=r(d),g=n(371),_=r(g),v=n(372),m=r(v),b=n(373),E=r(b),O=n(374),T=r(O),w=n(375),P=r(w),x=n(376),I=r(x),S=n(377),C=r(S),A=n(378),R=r(A),k=n(379),M=r(k),D=n(380),N=r(D),L=n(381),j=r(L),F=n(382),B=r(F),H=n(383),V=r(H),U=n(384),G=r(U),W=n(385),K=r(W),Y=n(386),X=r(Y),z=n(387),q=r(z),$=n(388),Q=r($),J=n(389),Z=r(J),ee=n(390),te=r(ee),ne=n(391),re=r(ne),ie=n(367),ae=r(ie),oe=n(392),se=n(393),ue=r(se),le=n(394),ce=r(le),fe=n(395),he=r(fe),pe=n(300),de=n(360),ye=n(396),ge=r(ye),_e=n(398),ve=r(_e),me=n(399),be=r(me),Ee=n(400),Oe=r(Ee),Te=n(401),we=r(Te),Pe=n(402),xe=r(Pe),Ie=n(403),Se=r(Ie),Ce=n(359),Ae=r(Ce),Re=n(406),ke=r(Re),Me=n(364),De=r(Me),Ne=n(297),Le=n(425),je=r(Le),Fe=n(429),Be=r(Fe),He=n(430),Ve=r(He),Ue=n(431),Ge=r(Ue),We=n(476),Ke=r(We),Ye=n(477),Xe=r(Ye),ze=n(478),qe=r(ze),$e=n(479),Qe=r($e),Je=n(480),Ze=r(Je),et=n(481),tt=r(et),nt=n(482),rt=r(nt),it=n(483),at=r(it),ot=n(484),st=r(ot),ut=n(485),lt=r(ut),ct=n(486),ft=r(ct),ht=n(487),pt=r(ht),dt=n(488),yt=r(dt),gt=n(489),_t=r(gt),vt=function(){
function e(){i(this,e),this._dataSources={},this._dataSourceCache={},this._dataProviders={},this._frames={},this._areas={},this._timelines={},this._ranges={},this._plotters={},this._themes={},this._titles={},this._frameMousePos={},this._dsChartStyle={},this._dragStarted=!1,this._oldX=0,this._fakeIndicators={},this._captureMouseWheelDirectly=!0,this._chart={},this._chart.defaultFrame=null,this._drawingTool=pe.TOOL_CROSSCURSOR,this._beforeDrawingTool=this._drawingTool,this._language="zh-cn",this._mainCanvas=null,this._overlayCanvas=null,this._mainContext=null,this._overlayContext=null,this._data=null,this._charStyle="CandleStick",this.dispatcher=null,this.step=900,this.symbol=null,this.coin=null,this.dataScale=null,this.$depth=null,this.tools={},this.tool=null,this.ratio=1,this.axisScale=pe.AXIS_SCALE_LINEAR,this.timer=null}return a(e,null,[{key:"getInstance",value:function(){return e.__instance instanceof e||(e.__instance=new e),e.__instance}}]),a(e,[{key:"setRatio",value:function(e){this.ratio=e<<0}},{key:"setAxisScale",value:function(e,t){this.axisScale=t;var n=this.getRange(e+".main");if(void 0!=n){var r=this.isLogScaleY();n.setLogScaleY(r)}}},{key:"getAxisScale",value:function(){return this.axisScale}},{key:"isLogScaleY",value:function(){return this.axisScale===pe.AXIX_SCALE_LOGARITHMIC}},{key:"setDataScale",value:function(e){this.dataScale=(0,pe.clone)(e)}},{key:"getDataScale",value:function(){return this.dataScale}},{key:"setDispatch",value:function(e){this.dispatcher=e}},{key:"dispatch",value:function(){return this.dispatcher.apply(this,arguments)}},{key:"setSymbol",value:function(e){this.symbol=e}},{key:"setCoin",value:function(e){null==(this.tool=this.tools[e.symbol])&&(this.tool=this.tools[e.symbol]=new _t.default(e.symbol)),this.coin=e}},{key:"setStep",value:function(e){this.step=e}},{key:"setupLoop",value:function(){var e=this;this.timer&&clearTimeout(this.timer);var t=void 0;this.timer=setTimeout(t=function(){var n=e.coin,r=e.getDataSource("frame0.k0").getLastDate(),i=void 0;i=r===-1?null:r.toString(),e.dispatch((0,Ne.fetchPeriodData)(n.symbol,e.step,i,!1)).then(function(){e.dispatch((0,Ne.updateTimer)()),e.timer=setTimeout(t,1e4)})},1e4)}},{key:"updateDataAndDisplay",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=this.coin;this.setCurrentDataSource("frame0.k0",r.symbol+"."+this.step),this.setNormalMode();var i=this.getDataSource("frame0.k0").getLastDate(),a=void 0;a=i===-1?null:i.toString(),this.dispatch((0,Ne.fetchPeriodData)(r.symbol,this.step,a)).then(function(){return!(!r.http_only&&t)||e.dispatch((0,Ne.fetchDepthData)(r.symbol))}).then(function(){e.redraw("All",!0),r.http_only?e.setupLoop():(clearTimeout(e.timer),pe.socket.emit("market.subscribe",r.db_key,function(){pe.socket.emit("market.trades",function(t,r){r.length&&e.dispatch((0,Ne.receiveTradeData)(r,!0)),n(t)}),pe.socket.emit("market.dayOpen",function(t,n){null==t&&Array.isArray(n)&&n.length&&e.dispatch((0,Ne.updateDayOpen)(n[0],n[1]))})})),e.dispatch((0,Ne.updateTimer)())})}},{key:"updateDataSource",value:function(e){Array.isArray(e)&&e.length&&(this._data=e.map(function(e){return e[0]*=1e3,e.slice()}),this.updateData("frame0.k0",this._data))}},{key:"updateDepth",value:function(e){this.$depth=e,this.redraw("All",!1)}},{key:"getDepth",value:function(){return this.$depth}},{key:"setMainIndicatorInterface",value:function(e){this._mainIndicator=e,e==pe.INDICATOR_NONE?this.removeMainIndicator("frame0.k0"):this.setMainIndicator("frame0.k0",e),this.redraw("All",!0)}},{key:"setIndicators",value:function(e){this.removeIndicatorInterface(3,!1),this.removeIndicatorInterface(2,!1),this.removeIndicatorInterface(1,!1);for(var t=0,n=e.length;t<n;++t)this.setIndicatorInterface(t+1,e[t]);this.selectedIndicators=e,this.redraw("All",!0)}},{key:"setIndicatorInterface",value:function(e,t){if("NONE"==t){var n=this.getIndicatorAreaName("frame0.k0",e);""!=n&&this.removeIndicatorInterface(e)}else{var n=this.getIndicatorAreaName("frame0.k0",e);""==n?ke.default.createIndicatorChartComps("frame0.k0",t):this.setIndicator(n,t)}}},{key:"removeIndicatorInterface",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getIndicatorAreaName("frame0.k0",e);this.removeIndicator(n),t&&this.redraw("All",!0)}},{key:"redraw",value:function(e,t){(void 0==e||t)&&(e="All"),"All"!=e&&"MainCanvas"!=e||(t&&this.getFrame("frame0").setChanged(!0),this.layout(this._mainContext,"frame0",0,0,this._mainCanvas.width/this.ratio,this._mainCanvas.height/this.ratio),this.drawMain("frame0",this._mainContext)),"All"!=e&&"OverlayCanvas"!=e||(this._overlayContext.clearRect(0,0,this._overlayCanvas.width/this.ratio,this._overlayCanvas.height/this.ratio),this.drawOverlay("frame0",this._overlayContext))}},{key:"bindCanvas",value:function(e,t){"main"==e?(this._mainCanvas=t,this._mainContext=t.getContext("2d")):"overlay"==e&&(this._overlayCanvas=t,this._overlayContext=t.getContext("2d"))}},{key:"getChart",value:function(){return this._chart.defaultFrame}},{key:"setCurrentDrawingTool",value:function(t){this._drawingTool=e.DrawingTool[t],this.setRunningMode(this._drawingTool)}},{key:"getChartStyle",value:function(e){var t=this._dsChartStyle[e];return void 0==t?"CandleStick":t}},{key:"setChartStyle",value:function(e,t){if(this._dsChartStyle[e]!=t){var n,r,i=e+".main",a=i+".main",o=i+".main";switch(t){case"CandleStick":case"CandleStickHLC":case"OHLC":switch(n=this.getDataProvider(a),void 0!=n&&n instanceof s.default||(n=new s.default(a),this.setDataProvider(a,n),n.updateData()),this.setMainIndicator(e,ae.default.mainIndicator),t){case"CandleStick":r=new Oe.default(o);break;case"CandleStickHLC":r=new we.default(o);break;case"OHLC":r=new be.default(o)}this.setPlotter(o,r),r=new xe.default(i+".decoration"),this.setPlotter(r.getName(),r);break;case"Line":n=new l.default(a),this.setDataProvider(n.getName(),n),n.setIndicator(new _.default),this.removeMainIndicator(e),r=new ge.default(o),this.setPlotter(o,r),this.removePlotter(i+".decoration")}this.getArea(r.getAreaName()).setChanged(!0),this._dsChartStyle[e]=t}}},{key:"setNormalMode",value:function(){this._drawingTool=this._beforeDrawingTool,this._drawingTool===pe.TOOL_CURSOR?this.showCursor():this.hideCursor()}},{key:"setRunningMode",value:function(e){var t=this.getDataSource("frame0.k0"),n=t.getCurrentToolObject();if(null!=n&&n.state!=pe.STATE_AFTER&&t.delToolObject(),t.getToolObjectCount()>10&&e!==this._beforeDrawingTool&&e!==pe.TOOL_RULER)return this.dispatch((0,Ne.switchTool)([pe.TOOL_CROSSCURSOR,pe.TOOL_CURSOR].indexOf(e)>-1?(this._drawingTool=e,e):this._beforeDrawingTool)),void(this._drawingTool===pe.TOOL_CURSOR?this.showCursor():this.hideCursor());switch(this._drawingTool=e,e!==pe.TOOL_CROSSCURSOR&&this.showCursor(),e){case pe.TOOL_CURSOR:this._beforeDrawingTool=e;break;case pe.TOOL_ARROWLINE:t.addToolObject(new Ke.default("frame0.k0"));break;case pe.TOOL_BANDLINE:t.addToolObject(new pt.default("frame0.k0"));break;case pe.TOOL_BIPARALLELLINE:t.addToolObject(new at.default("frame0.k0"));break;case pe.TOOL_BIPARALLERAYLINE:t.addToolObject(new st.default("frame0.k0"));break;case pe.TOOL_CROSSCURSOR:this._beforeDrawingTool=e;break;case pe.TOOL_FIBSPIRAL:t.addToolObject(new ft.default("frame0.k0"));break;case pe.TOOL_DRAWFIBFANS:t.addToolObject(new lt.default("frame0.k0"));break;case pe.TOOL_DRAWFIBRETRACE:t.addToolObject(new yt.default("frame0.k0"));break;case pe.TOOL_DRAWLINES:t.addToolObject(new Ve.default("frame0.k0"));break;case pe.TOOL_HORIRAYLINE:t.addToolObject(new Qe.default("frame0.k0"));break;case pe.TOOL_HORISEGLINE:t.addToolObject(new Xe.default("frame0.k0"));break;case pe.TOOL_HORISTRAIGHTLINE:t.addToolObject(new qe.default("frame0.k0"));break;case pe.TOOL_PRICELINE:t.addToolObject(new Be.default("frame0.k0"));break;case pe.TOOL_RAYLINE:t.addToolObject(new Ge.default("frame0.k0"));break;case pe.TOOL_SEGLINE:t.addToolObject(new je.default("frame0.k0"));break;case pe.TOOL_STRAIGHTLINE:t.addToolObject(new Ve.default("frame0.k0"));break;case pe.TOOL_TRIPARALLELLINE:t.addToolObject(new rt.default("frame0.k0"));break;case pe.TOOL_VERTISTRAIGHTLINE:t.addToolObject(new Ze.default("frame0.k0"));break;case pe.TOOL_RULER:t.addToolObject(new tt.default("frame0.k0"))}}},{key:"getTitle",value:function(e){return this._titles[e]}},{key:"setTitle",value:function(e,t){this._titles[e]=t}},{key:"setCurrentDataSource",value:function(e,t){var n=this.getCachedDataSource(t);if(null!=n)this.setDataSource(e,n,!0);else{var r=this.getDataSource(e);null!=r&&(r instanceof Ae.default&&(n=new Ae.default(t)),this.setDataSource(e,n,!0),this.setCachedDataSource(t,n))}}},{key:"getDataSource",value:function(e){return this._dataSources[e]}},{key:"setDataSource",value:function(e,t,n){this._dataSources[e]=t,n&&this.updateData(e,null)}},{key:"getCachedDataSource",value:function(e){return this._dataSourceCache[e]}},{key:"setCachedDataSource",value:function(e,t){this._dataSourceCache[e]=t}},{key:"getDataProvider",value:function(e){return this._dataProviders[e]}},{key:"setDataProvider",value:function(e,t){this._dataProviders[e]=t}},{key:"removeDataProvider",value:function(e){delete this._dataProviders[e]}},{key:"getFrame",value:function(e){return this._frames[e]}},{key:"setFrame",value:function(e,t){this._frames[e]=t}},{key:"removeFrame",value:function(e){delete this._frames[e]}},{key:"getArea",value:function(e){return this._areas[e]}},{key:"setArea",value:function(e,t){this._areas[e]=t}},{key:"removeArea",value:function(e){delete this._areas[e]}},{key:"getTimeline",value:function(e){return this._timelines[e]}},{key:"setTimeline",value:function(e,t){this._timelines[e]=t}},{key:"removeTimeline",value:function(e){delete this._timelines[e]}},{key:"getRange",value:function(e){return this._ranges[e]}},{key:"setRange",value:function(e,t){this._ranges[e]=t}},{key:"removeRange",value:function(e){delete this._ranges[e]}},{key:"getPlotter",value:function(e){return this._plotters[e]}},{key:"setPlotter",value:function(e,t){this._plotters[e]=t}},{key:"removePlotter",value:function(e){delete this._plotters[e]}},{key:"getTheme",value:function(e){return this._themes[e]}},{key:"setTheme",value:function(e,t){this._themes[e]=t}},{key:"getFrameMousePos",value:function(e,t){void 0!=this._frameMousePos[e]?(t.x=this._frameMousePos[e].x,t.y=this._frameMousePos[e].y):(t.x=-1,t.y=-1)}},{key:"setFrameMousePos",value:function(e,t,n){this._frameMousePos[e]={x:t,y:n}}},{key:"drawArea",value:function(e,t,n){var r=t.getNameObject().getCompAt(2);if("timeline"==r){if(t.getHeight()<20)return}else if(t.getHeight()<30)return;if(!(t.getWidth()<30)){r=t.getName();var i,a,o=n.length;for(a=0;a<o;a++)i=this._plotters[r+n[a]],void 0!=i&&i.Draw(e)}}},{key:"drawAreaMain",value:function(e,t){var n,r=this._dataSources[t.getDataSourceName()];n=r.getDataCount()<1?[".background"]:[".background",".grid",".main",".secondary"],this.drawArea(e,t,n),t.setChanged(!1)}},{key:"drawAreaOverlay",value:function(e,t){var n,r=this._dataSources[t.getDataSourceName()];n=r.getDataCount()<1?[".selection"]:[".decoration",".selection",".info",".tool"],this.drawArea(e,t,n)}},{key:"drawMain",value:function(e,t){var n=!1;if(!n)for(var r in this._areas){var i=this._areas[r];i.getFrameName()!=e||i instanceof Se.default||this.drawAreaMain(t,i)}var a;for(var o in this._timelines)a=this._timelines[o],a.getFrameName()==e&&a.setUpdated(!1);for(var o in this._ranges)a=this._ranges[o],a.getFrameName()==e&&a.setUpdated(!1);for(var o in this._areas)a=this._areas[o],a.getFrameName()==e&&a.setChanged(!1)}},{key:"drawOverlay",value:function(e,t){for(var n in this._areas){var r=this._areas[n];r instanceof Se.default&&r.getFrameName()==e&&r.drawGrid(t)}for(var n in this._areas){var r=this._areas[n];r instanceof Se.default||r.getFrameName()==e&&this.drawAreaOverlay(t,r)}}},{key:"updateQuotaData",value:function(e,t,n){var r=this.getDataSource(e);if(void 0!=r){if(null!=n){if(!r.updateQuota(t,n))return!1;if(r.getUpdateMode()==de.DONOTHING)return!0}else r.setUpdateMode(de.REFRESH);var i=this.getTimeline(e);if(void 0!=i&&i.update(),r.getDataCount()<1)return!0;var a,o,s=[".main",".secondary"];for(var u in this._areas)if(a=this._areas[u],!(a instanceof Se.default)&&a.getDataSourceName()==e){o=a.getName();for(var l=0;l<s.length;l++){var c=this.getDataProvider(o+s[l]);void 0!=c&&c.updateData()}}return!0}}},{key:"updateData",value:function(e,t){var n=this.getDataSource(e);if(void 0!=n){if(null!=t){if(!n.update(t,this.step))return!1;if(n.getUpdateMode()==de.DONOTHING)return!0}else n.setUpdateMode(de.REFRESH);var r=this.getTimeline(e);if(void 0!=r&&r.update(),n.getDataCount()<1)return!0;var i,a,o=[".main",".secondary"];for(var s in this._areas)if(i=this._areas[s],!(i instanceof Se.default)&&i.getDataSourceName()==e){a=i.getName();for(var u=0;u<o.length;u++){var l=this.getDataProvider(a+o[u]);void 0!=l&&l.updateData()}}return!0}}},{key:"pushData",value:function(e,t){var n=this.getDataSource(e);if(void 0!=n){var r=n.getLastColumn();if(r){for(var i,a,o,s=r[pe.PERIOD_DATE],u=1e3*this.step,l={},c=function(){return 2592e3===this.step?function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(n,r,1,8);return i.getTime()}:function(e){return e-e%u}}.call(this),f=0,h=t.length;f<h;++f){a=(0,pe.clone)(t[f]),a[pe.TX_TICK]*=1e3,a[pe.TX_TICK]=c(a[pe.TX_TICK]),a[pe.TX_TICK]===s?o=!1:(s=a[pe.TX_TICK],o=!0);var p=parseFloat(a[pe.TX_PRICE]),d=parseFloat(a[pe.TX_AMOUNT]);l[a[pe.TX_TICK]]?(i=l[a[pe.TX_TICK]],i[pe.PERIOD_VOLUME]+=d,i[pe.PERIOD_CLOSE]=p,i[pe.PERIOD_HIGH]<p?i[pe.PERIOD_HIGH]=p:i[pe.PERIOD_LOW]>p&&(i[pe.PERIOD_LOW]=p)):o?(i=l[a[pe.TX_TICK]]={},i[pe.PERIOD_DATE]=a[pe.TX_TICK],i[pe.PERIOD_OPEN]=i[pe.PERIOD_HIGH]=i[pe.PERIOD_LOW]=i[pe.PERIOD_CLOSE]=p,i[pe.PERIOD_VOLUME]=d):(i=l[a[pe.TX_TICK]]=(0,pe.clone)(r),i[pe.PERIOD_HIGH]<p?i[pe.PERIOD_HIGH]=p:i[pe.PERIOD_LOW]>p&&(i[pe.PERIOD_LOW]=p),i[pe.PERIOD_CLOSE]=p,i[pe.PERIOD_VOLUME]+=d)}var y=[];for(var g in l)({}).hasOwnProperty.call(l,g)&&y.push(l[g]);var _=this.updateData(e,y);return _&&this.updateRange(e),_}}}},{key:"updateRange",value:function(e){var t=this.getDataSource(e);if(!(t.getDataCount()<1)){var n,r,i=[".main",".secondary"];for(var a in this._areas)if(n=this._areas[a],!(n instanceof Se.default)&&n.getDataSourceName()==e){r=n.getName();for(var o=0;o<i.length;o++){var s=this.getDataProvider(r+i[o]);void 0!=s&&s.updateRange()}var u=this.getTimeline(e);if(void 0!=u&&u.getMaxItemCount()>0){var l=this.getRange(r);void 0!=l&&l.update()}}}}},{key:"layout",value:function(e,t,n,r,i,a){var o=this.getFrame(t);o.measure(e,i-n,a-r),o.layout(n,r,i,a);for(var s in this._timelines){var u=this._timelines[s];u.getFrameName()==t&&u.onLayout()}for(var s in this._dataSources)s.substring(0,t.length)==t&&this.updateRange(s)}},{key:"SelectRange",value:function(e,t){for(var n in this._ranges){var r=this._ranges[n].getAreaName(),i=e.getName();r==i?this._ranges[n].selectAt(t):this._ranges[n].unselect()}}},{key:"scale",value:function(e,t){if(null==this._highlightedFrame)return!1;var n=this._highlightedFrame.getHighlightedArea();if(void 0!=this.getRange(n.getName())){var r=n.getDataSourceName(),i=this.getTimeline(r);if(null!=i){this.hideCrossCursor();var a=i.scale(t);if(!0!==a)return!1;this.updateRange(r);var o=e.target.getBoundingClientRect(),s=e.clientX-o.left,u=e.clientY-o.top;return this.showCrossCursor(n,s,u),!0}return!1}return!1}},{key:"showCursor",value:function(e){void 0===e&&(e="default"),this._mainCanvas.style.cursor=e,this._overlayCanvas.style.cursor=e}},{key:"hideCursor",value:function(){this._mainCanvas.style.cursor="none",this._overlayCanvas.style.cursor="none"}},{key:"showCrossCursor",value:function(e,t,n){var r=this.getRange(e.getName());return!(void 0==r||(r.selectAt(n),r=this.getTimeline(e.getDataSourceName()),void 0==r||!r.selectAt(t)))}},{key:"hideCrossCursor",value:function(e){if(null!=e)for(var t in this._timelines){var n=this._timelines[t];n!=e&&n.unselect()}else for(var t in this._timelines)this._timelines[t].unselect();for(var t in this._ranges)this._ranges[t].unselect()}},{key:"clearHighlight",value:function(){null!=this._highlightedFrame&&(this._highlightedFrame.highlight(null),this._highlightedFrame=null)}},{key:"onToolMouseMove",value:function(e,t,n){var r=!1;e+=".";for(var i in this._dataSources)if(0==i.indexOf(e)){var a=this._dataSources[i];a instanceof Ae.default&&a.toolManager.acceptMouseMoveEvent(t,n)&&(r=!0)}return r}},{key:"onToolMouseDown",value:function(e,t,n){var r=!1;e+=".";for(var i in this._dataSources)if(0==i.indexOf(e)){var a=this._dataSources[i];a instanceof Ae.default&&a.toolManager.acceptMouseDownEvent(t,n)&&(r=!0)}return r}},{key:"onToolMouseUp",value:function(e,t,n){var r=!1;e+=".";for(var i in this._dataSources)if(0==i.indexOf(e)){var a=this._dataSources[i];a instanceof Ae.default&&a.toolManager.acceptMouseUpEvent(t,n)&&(r=!0)}return r}},{key:"onToolMouseDrag",value:function(e,t,n){var r=!1;e+=".";for(var i in this._dataSources)if(0==i.indexOf(e)){var a=this._dataSources[i];a instanceof Ae.default&&a.toolManager.acceptMouseDownMoveEvent(t,n)&&(r=!0)}return r}},{key:"onMouseMove",value:function(e,t,n,r){var i=this.getFrame(e);if(void 0!==i){if(this.setFrameMousePos(e,t,n),this.hideCrossCursor(),this._highlightedFrame!=i&&this.clearHighlight(),null!=this._capturingMouseArea)return void this._capturingMouseArea.onMouseMove(t,n);var a=i.contains(t,n);if(null!=a){var o,s,u=a.length;for(s=u-1;s>=0;s--)if(o=a[s],o=o.onMouseMove(t,n),null!=o)return void(o instanceof Se.default||(i.highlight(o),this._highlightedFrame=i))}}}},{key:"onMouseLeave",value:function(e,t,n,r){var i=this.getFrame(e);void 0!=i&&(this.setFrameMousePos(e,t,n),this.hideCrossCursor(),this.clearHighlight(),null!=this._capturingMouseArea&&(this._capturingMouseArea.onMouseLeave(t,n),this._capturingMouseArea=null),this._dragStarted=!1)}},{key:"onMouseDown",value:function(e,t,n){var r=this.getFrame(e);if(void 0!=r){var i=r.contains(t,n);if(null!=i){var a,o,s=i.length;for(o=s-1;o>=0;o--)if(a=i[o],a=a.onMouseDown(t,n),null!=a)return void(this._capturingMouseArea=a)}}}},{key:"onMouseUp",value:function(e,t,n){var r=this.getFrame(e);void 0!=r&&this._capturingMouseArea&&(null==this._capturingMouseArea.onMouseUp(t,n)&&0==this._dragStarted&&(null!=this._selectedFrame&&this._selectedFrame!=r&&this._selectedFrame.select(null),this._capturingMouseArea.isSelected()?(r.select(null),this._selectedFrame=null):(r.select(this._capturingMouseArea),this._selectedFrame=r)),this._capturingMouseArea=null,this._dragStarted=!1)}},{key:"deleteToolObject",value:function(){var e=this.getDataSource("frame0.k0"),t=e.getSelectToolObjcet();null!=t&&e.delSelectToolObject();var n=e.getCurrentToolObject();null!=n&&n.getState()!=pe.STATE_AFTER&&e.delToolObject(),this.setNormalMode()}},{key:"deleteRulerToolObject",value:function(){var e=this.getDataSource("frame0.k0");e.delRulerToolObject()}},{key:"unloadTemplate",value:function(e){var t=this.getFrame(e);if(void 0!=t){for(var n in this._dataSources)n.match(e+".")&&delete this._dataSources[n];for(var n in this._dataProviders)this._dataProviders[n].getFrameName()==e&&delete this._dataProviders[n];delete this._frames[e];for(var n in this._areas)this._areas[n].getFrameName()==e&&delete this._areas[n];for(var n in this._timelines)this._timelines[n].getFrameName()==e&&delete this._timelines[n];for(var n in this._ranges)this._ranges[n].getFrameName()==e&&delete this._ranges[n];for(var n in this._plotters)this._plotters[n].getFrameName()==e&&delete this._plotters[n];delete this._themes[e],delete this._frameMousePos[e]}}},{key:"createIndicatorAndRange",value:function(e,t,n){var r,i;switch(t){case pe.INDICATOR_BTI:r=new Z.default,i=new oe.ZeroBasedPositiveRange(e);break;case pe.INDICATOR_LSI:r=new te.default,i=new ce.default(e);break;case pe.INDICATOR_NEWBIE:r=new re.default,i=new oe.ZeroBasedPositiveRange(e);break;case pe.INDICATOR_MA:r=new f.default,i=new oe.PositiveRange(e);break;case pe.INDICATOR_EMA:r=new p.default,i=new oe.PositiveRange(e);break;case pe.INDICATOR_VOLUME:r=new m.default,i=new oe.ZeroBasedPositiveRange(e);break;case pe.INDICATOR_MACD:r=new E.default,i=new ce.default(e);break;case pe.INDICATOR_DMI:r=new C.default,i=new he.default(e);break;case pe.INDICATOR_DMA:r=new N.default,i=new ue.default(e);break;case pe.INDICATOR_TRIX:r=new j.default,i=new ue.default(e);break;case pe.INDICATOR_BRAR:r=new B.default,i=new ue.default(e);break;case pe.INDICATOR_VR:r=new V.default,i=new ue.default(e);break;case pe.INDICATOR_OBV:r=new R.default,i=new ue.default(e);break;case pe.INDICATOR_EMV:r=new G.default,i=new ue.default(e);break;case pe.INDICATOR_RSI:r=new I.default,i=new he.default(e);break;case pe.INDICATOR_WR:r=new K.default,i=new he.default(e);break;case pe.INDICATOR_SAR:r=new y.default,i=new oe.PositiveRange(e);break;case pe.INDICATOR_KDJ:r=new T.default,i=new he.default(e);break;case pe.INDICATOR_ROC:r=new X.default,i=new ue.default(e);break;case pe.INDICATOR_MTM:r=new q.default,i=new ue.default(e);break;case pe.INDICATOR_BOLL:r=new M.default,i=new ue.default(e);break;case pe.INDICATOR_PSY:r=new Q.default,i=new ue.default(e);break;case pe.INDICATOR_StochRSI:r=new P.default,i=new he.default(e);break;default:return null}return{indic:r,range:i}}},{key:"setMainIndicator",value:function(e,t){var n=e+".main",r=this.getDataProvider(n+".main");if(void 0==r||!(r instanceof s.default))return!1;var i;switch(t){case"MA":i=new f.default;break;case"EMA":i=new p.default;break;case"BOLL":i=new M.default;break;case"SAR":i=new y.default;break;case"NONE":return this.removeMainIndicator("frame0.k0"),!0;default:return!1}var a=n+".secondary",o=this.getDataProvider(a);void 0==o&&(o=new l.default(a),this.setDataProvider(o.getName(),o)),o.setIndicator(i);var u=this.getPlotter(a);return void 0==u&&(u=new ge.default(a),this.setPlotter(u.getName(),u)),this.getArea(n).setChanged(!0),!0}},{key:"getIndicator",value:function(e){var t=this.getArea(e);if(void 0==t||"main"==t.getNameObject().getCompAt(2))return null;var n=this.getDataProvider(e+".secondary");return void 0!=n&&n instanceof l.default?n.getIndicator():null}},{key:"setIndicator",value:function(e,t){var n=this.getArea(e);if(void 0==n||"main"==n.getNameObject().getCompAt(2))return!1;var r=this.getDataProvider(e+".secondary");if(void 0==r||!(r instanceof l.default))return!1;var i=this.createIndicatorAndRange(e,t);if(null==i)return!1;var a=i.indic,o=i.range;if(this.removeDataProvider(e+".main"),this.removePlotter(e+".main"),this.removeRange(e),this.removePlotter(e+"Range.decoration"),r.setIndicator(a),this.setRange(e,o),!a.isAuthorized())return!0;if(o.switchIndicatorNav(ae.default.indicatorNav),o.isIndicatorNavShown()?o.setPaddingBottom(24):o.setPaddingBottom(4),o.setPaddingTop(20),o.setMinInterval(20),a instanceof m.default){var u=new ve.default(e+"Range.decoration");this.setPlotter(u.getName(),u)}else if(a instanceof M.default||a instanceof y.default){var r=new s.default(e+".main");this.setDataProvider(r.getName(),r),r.updateData();var u=new be.default(e+".main");this.setPlotter(u.getName(),u)}return!0}},{key:"removeMainIndicator",value:function(e){var t=e+".main",n=t+".secondary",r=this.getDataProvider(n);void 0!=r&&r instanceof l.default&&(this.removeDataProvider(n),this.removePlotter(n),this.getArea(t).setChanged(!0))}},{key:"removeIndicator",value:function(e){var t=this.getArea(e);if(void 0!=t&&"main"!=t.getNameObject().getCompAt(2)){var n=this.getDataProvider(e+".secondary");if(void 0!=n&&n instanceof l.default){var r=e+"Range",i=this.getArea(r);if(void 0!=i){var a=this.getArea(t.getDataSourceName()+".charts");if(void 0!=a){a.removeArea(t),this.removeArea(e),a.removeArea(i),this.removeArea(r),a.updateNextRowId();for(var o in this._dataProviders)this._dataProviders[o].getAreaName()==e&&this.removeDataProvider(o);for(var o in this._ranges)this._ranges[o].getAreaName()==e&&this.removeRange(o);for(var o in this._plotters)this._plotters[o].getAreaName()==e&&this.removePlotter(o);for(var o in this._plotters)this._plotters[o].getAreaName()==r&&this.removePlotter(o);for(var s=parseInt(e.slice(-1))+1,u=0;u<De.default.iconRef.length;){var c=De.default.iconRef[u];c.idx===s?De.default.iconRef.splice(u,1):++u}}}}}}},{key:"getIndicatorParameters",value:function(e){var t=this._fakeIndicators[e];if(void 0==t){var n=this.createIndicatorAndRange("",e);if(null==n)return null;this._fakeIndicators[e]=t=n.indic}var r,i=[],a=t.getParameterCount();for(r=0;r<a;r++)i.push(t.getParameterAt(r));return i}},{key:"switchIndicatorNav",value:function(e){var t,n,r,i;for(t in this._dataProviders){var a=this._dataProviders[t];if(a instanceof l.default){i=a.getAreaName();var o=this.getArea(i);void 0!=o&&"main"!=o.getNameObject().getCompAt(2)&&(n=a.getIndicator(),r=this.getRange(i),r.switchIndicatorNav(e),r.isIndicatorNavShown()?r.setPaddingBottom(24):r.setPaddingBottom(4),o.setChanged(!0))}}}},{key:"setIndicatorParameters",value:function(e,t){var n,r;for(n in this._dataProviders){var i=this._dataProviders[n];i instanceof l.default&&(r=i.getIndicator(),r.getName()==e&&(r.setParameters(t),i.refresh(),this.getArea(i.getAreaName()).setChanged(!0)))}}},{key:"getIndicatorAreaName",value:function(e,t){var n=this.getArea(e+".charts"),r=n.getAreaCount()>>1;return t<0||t>=r?"":n.getAreaAt(t<<1).getName()}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(e){this._language=e}}]),e}();t.default=vt},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(357),l=r(u),c=n(355),f=r(c),h=n(359),p=r(h),d=n(300),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._candlestickDS=null,n}return o(t,e),s(t,[{key:"updateData",value:function(){var e=f.default.getInstance(),t=e.getDataSource(this.getDataSourceName());t instanceof p.default&&(this._candlestickDS=t)}},{key:"getMinMaxAt",value:function(e,t){var n=this._candlestickDS.getDataAt(e);
//!data && console.log(index, this._candlestickDS);
return t.min=n[d.PERIOD_LOW],t.max=n[d.PERIOD_HIGH],!0}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._minValue=0,n._maxValue=0,n._minValueIndex=-1,n._maxValueIndex=-1,n}return o(t,e),s(t,[{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"calcRange",value:function(e,t,n,r){for(var i=Number.MAX_VALUE,a=-Number.MAX_VALUE,o=-1,s=-1,u={},l=t-1,c=e.length-1;c>=0;c--){var f=e[c];if(l<f)n[c]={min:i,max:a};else{for(;l>=f;l--)0!=this.getMinMaxAt(l,u)&&(i>u.min&&(i=u.min,o=l),a<u.max&&(a=u.max,s=l));n[c]={min:i,max:a}}null!=r&&(r[c]={minIndex:o,maxIndex:s})}}},{key:"updateRange",value:function(){var e=f.default.getInstance(),t=e.getTimeline(this.getDataSourceName()),n=[t.getFirstIndex()],r=[{}],i=[{}];this.calcRange(n,t.getLastIndex(),r,i),this._minValue=r[0].min,this._maxValue=r[0].max,this._minValueIndex=i[0].minIndex,this._maxValueIndex=i[0].maxIndex}}]),t}(l.default);t.default=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.CName=function(){function e(t){if(n(this,e),this._names=[],this._comps=[],t instanceof e)this._names=t._names,this._comps=t._comps;else{var r=t.split("."),i=r.length-1;if(i>0){this._comps=r,this._names.push(r[0]);for(var a=1;a<=i;a++)this._names.push(this._names[a-1]+"."+r[a])}else this._comps.push(t),this._names.push(t)}}return r(e,[{key:"getCompAt",value:function(e){return e>=0&&e<this._comps.length?this._comps[e]:""}},{key:"getName",value:function(e){if(e<0){if(this._names.length>0)return this._names[this._names.length-1]}else if(e<this._names.length)return this._names[e];return""}}]),e}(),a=function(){function e(t){n(this,e),this._name=t,this._nameObj=new i(t)}return r(e,[{key:"getFrameName",value:function(){return this._nameObj.getName(0)}},{key:"getDataSourceName",value:function(){return this._nameObj.getName(1)}},{key:"getAreaName",value:function(){return this._nameObj.getName(2)}},{key:"getName",value:function(){return this._nameObj.getName(-1)}},{key:"getNameObject",value:function(){return this._nameObj}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(300),c=n(360),f=r(c),h=n(355),p=r(h),d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._erasedCount=0,n._dataItems=[],n._decimalDigits=0,n.toolManager=p.default.getInstance().tool,n}return s(t,e),u(t,[{key:"getCacheSize",value:function(){return this._dataItems.length}},{key:"getDataCount",value:function(){return this._dataItems.length}},{key:"getUpdatedCount",value:function(){return this._updatedCount}},{key:"getAppendedCount",value:function(){return this._appendedCount}},{key:"getErasedCount",value:function(){return this._erasedCount}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"calcDecimalDigits",value:function(e){var t=""+e,n=t.indexOf(".");return n<0?0:t.length-1-n}},{key:"getLastColumn",value:function(){var e=this.getDataCount();return e<1?null:this.getDataAt(e-1)}},{key:"getLastDate",value:function(){var e=this.getLastColumn();return null===e?-1:e[l.PERIOD_DATE]}},{key:"getDataAt",value:function(e){return this._dataItems[e]}},{key:"updateQuota",value:function(e,t){var n,r=this._dataItems.length;if(r>0){var i,a,o,s,u,f;for(a=r-1,u=!1,f=!1,i=0,o=t.length;i<o;++i)for(n=t[i];a>=0&&(s=this._dataItems[a],s[l.PERIOD_DATE]>=n[0]);--a)if(s[l.PERIOD_DATE]===n[0]){void 0!==s[e]?(f=!0,s[e]!==n[1]&&(u=!0,s[e]=n[1],this._updatedCount++)):s[e]=n[1],--a;break}return f?this.setUpdateMode(u?c.UPDATE:c.DONOTHING):(this._updatedCount=r,this.setUpdateMode(c.UPDATE)),!0}return!1}},{key:"update",value:function(e,t){this._updatedCount=0,this._appendedCount=0,this._erasedCount=0;var n,r=this._dataItems.length;if(r>0){var a,o,s=r-1,u=this._dataItems[s],f=e.length;for(o=0;o<f;o++)if(a=e[o],a[0]==u[l.PERIOD_DATE])u[l.PERIOD_OPEN]==a[1]&&u[l.PERIOD_HIGH]==a[2]&&u[l.PERIOD_LOW]==a[3]&&u[l.PERIOD_CLOSE]==a[4]&&u[l.PERIOD_VOLUME]==a[5]||(u[l.PERIOD_DATE]=a[0],u[l.PERIOD_OPEN]=a[1],u[l.PERIOD_HIGH]=a[2],u[l.PERIOD_LOW]=a[3],u[l.PERIOD_CLOSE]=a[4],u[l.PERIOD_VOLUME]=a[5],this._updatedCount++);else if(a[0]>u[l.PERIOD_DATE]){var h=0;if(t<2592e3)h=Math.ceil((a[0]-u[l.PERIOD_DATE])/t/1e3)-1;else{var p=new Date(u[l.PERIOD_DATE]),d=new Date(a[0]),y=d.getFullYear()-p.getFullYear();h=d.getMonth()-p.getMonth()+12*y-1}h>0&&console.log("found",h);for(var g=0,_=new Date(u[l.PERIOD_DATE]);g<h;++g){var v;v={},i(v,l.PERIOD_DATE,t<2592e3?u[l.PERIOD_DATE]+(g+1)*t*1e3:(_.setMonth(_.getMonth()+1),_.getTime())),i(v,l.PERIOD_OPEN,u[l.PERIOD_CLOSE]),i(v,l.PERIOD_HIGH,u[l.PERIOD_CLOSE]),i(v,l.PERIOD_LOW,u[l.PERIOD_CLOSE]),i(v,l.PERIOD_CLOSE,u[l.PERIOD_CLOSE]),i(v,l.PERIOD_VOLUME,0),n=v,this._dataItems.push(n),this._appendedCount++}n={},n[l.PERIOD_DATE]=a[0],n[l.PERIOD_OPEN]=a[1],n[l.PERIOD_HIGH]=a[2],n[l.PERIOD_LOW]=a[3],n[l.PERIOD_CLOSE]=a[4],n[l.PERIOD_VOLUME]=a[5],u=n,this._dataItems.push(n),this._appendedCount++}return this._updatedCount>0&&0===this._appendedCount?(this.setUpdateMode(c.UPDATE),!0):this._appendedCount>0&&0===this._updatedCount?(this.setUpdateMode(c.APPEND),!0):this._updatedCount>0&&this._appendedCount>0?(this.setUpdateMode(c.REFRESH),!0):(this.setUpdateMode(c.DONOTHING),!1)}this.setUpdateMode(c.REFRESH),this._dataItems=[];var m,b,a,o,f=e.length;for(o=0;o<f;o++){for(a=e[o],b=1;b<=4;b++)m=this.calcDecimalDigits(a[b]),this._decimalDigits<m&&(this._decimalDigits=m);n={},n[l.PERIOD_DATE]=a[0],n[l.PERIOD_OPEN]=a[1],n[l.PERIOD_HIGH]=a[2],n[l.PERIOD_LOW]=a[3],n[l.PERIOD_CLOSE]=a[4],n[l.PERIOD_VOLUME]=a[5],this._dataItems.push(n)}return!0}},{key:"select",value:function(e){this.toolManager.selecedObject=e}},{key:"unselect",value:function(){this.toolManager.selecedObject=-1}},{key:"addToolObject",value:function(e){this.toolManager.addToolObject(e)}},{key:"delToolObject",value:function(){this.toolManager.delCurrentObject()}},{key:"getToolObject",value:function(e){return this.toolManager.getToolObject(e)}},{key:"getToolObjectCount",value:function(){return this.toolManager.toolObjects.length}},{key:"getCurrentToolObject",value:function(){return this.toolManager.getCurrentObject()}},{key:"getSelectToolObjcet",value:function(){return this.toolManager.getSelectedObject()}},{key:"delSelectToolObject",value:function(){this.toolManager.delSelectedObject()}},{key:"delRulerToolObject",value:function(){this.toolManager.delRulerObject()}}]),t}(f.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.APPEND=t.UPDATE=t.REFRESH=t.DONOTHING=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(300),c=n(358),f=r(c),h=(0,l.NOLY_IDS)(4),p=u(h,4),d=p[0],y=p[1],g=p[2],_=p[3];t.DONOTHING=d,t.REFRESH=y,t.UPDATE=g,t.APPEND=_;var v=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._updateMode=d,n}return o(t,e),s(t,[{key:"getUpdateMode",value:function(){return this._updateMode}},{key:"setUpdateMode",value:function(e){this._updateMode=e}},{key:"getCacheSize",value:function(){return 0}},{key:"getDataCount",value:function(){return 0}}]),t}(f.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(357),l=r(u),c=n(355),f=r(c),h=n(360),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._indicator=null,n}return o(t,e),s(t,[{key:"getIndicator",value:function(){return this._indicator}},{key:"setIndicator",value:function(e){this._indicator=e,this.refresh()}},{key:"refresh",value:function(){var e=f.default.getInstance(),t=e.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var n=this._indicator;n.clear();var r,i=t.getDataCount();for(n.reserve(i),r=0;r<i;r++)n.execute(t,r)}}},{key:"updateData",value:function(){var e=f.default.getInstance(),t=e.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var n=this._indicator,r=t.getUpdateMode();switch(r){case h.REFRESH:this.refresh();break;case h.APPEND:n.reserve(t.getAppendedCount());case h.UPDATE:var i,a=t.getDataCount(),o=t.getUpdatedCount()+t.getAppendedCount();for(i=a-o;i<a;i++)n.execute(t,i)}}}},{key:"getMinMaxAt",value:function(e,t){t.min=Number.MAX_VALUE,t.max=-Number.MAX_VALUE;var n,r=!1;if(this._indicator.isAuthorized()){var i,a=this._indicator.getOutputCount();for(i=0;i<a;i++)n=this._indicator.getOutputAt(i).execute(e),0==isNaN(n)&&(r=!0,t.min>n&&(t.min=n),t.max<n&&(t.max=n))}else t.min=0,t.max=0,r=!0;return r}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.MAParams;Array.isArray(n)||(n=h.default.MADefaultParams);var r=new u.ParameterExpr("M1",2,1e3,n[0]>=0?n[0]:7),o=new u.ParameterExpr("M2",2,1e3,n[1]>=0?n[1]:30),s=new u.ParameterExpr("M3",2,1e3,n[2]>=0?n[2]:0),l=new u.ParameterExpr("M4",2,1e3,n[3]>=0?n[3]:0),c=new u.ParameterExpr("M4",2,1e3,n[4]>=0?n[4]:0),f=new u.ParameterExpr("M4",2,1e3,n[5]>=0?n[5]:0);return e.addParameter(r),e.addParameter(o),e.addParameter(s),e.addParameter(l),e.addParameter(c),e.addParameter(f),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,r))),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,o))),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,s))),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,l))),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,c))),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,f))),e}return o(t,e),s(t,[{key:"getName",value:function(){return"MA"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SarExpr=t.SmaExpr=t.ExpmemaExpr=t.EmaExpr=t.MaExpr=t.StdExpr=t.SumExpr=t.CountExpr=t.LlvExpr=t.HhvExpr=t.RangeExpr=t.RangeOutputExpr=t.OutputExpr=t.OUTPUT_STYLE_COLUMNSTICK=t.OUTPUT_STYLE_SARPOINT=t.OUTPUT_STYLE_MACDSTICK=t.OUTPUT_STYLE_VOLUMESTICK=t.OUTPUT_STYLE_LINE=t.OUTPUT_STYLE_NONE=t.AssignExpr=t.IfExpr=t.OrExpr=t.AndExpr=t.RefExpr=t.AbsExpr=t.MaxExpr=t.EqExpr=t.LeExpr=t.LtExpr=t.GeExpr=t.GtExpr=t.DivExpr=t.MulExpr=t.SubExpr=t.AddExpr=t.NegExpr=t.OpABCDExpr=t.OpABCExpr=t.OpABExpr=t.OpAExpr=t.ParameterExpr=t.ConstExpr=t.BTIExpr=t.LSIExpr=t.NewbieExpr=t.VolumeExpr=t.CloseExpr=t.LowExpr=t.HighExpr=t.OpenExpr=t.Expr=t.ExprEnv=void 0;var o=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(300),c=t.ExprEnv=function(){function e(){a(this,e),this._ds=null,this._firstIndex=null}return u(e,null,[{key:"get",value:function(){return this.inst}},{key:"set",value:function(e){this.inst=e}}]),u(e,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(e){return this._ds=e}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(e){return this._firstIndex=e}}]),e}(),f=t.Expr=function(){function e(){a(this,e),this._rid=0}return u(e,[{key:"execute",value:function(e){}},{key:"reserve",value:function(e,t){}},{key:"clear",value:function(){}}]),e}(),h=(t.OpenExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_OPEN]}}]),t}(f),t.HighExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_HIGH]}}]),t}(f),t.LowExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_LOW]}}]),t}(f),t.CloseExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_CLOSE]}}]),t}(f),t.VolumeExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_VOLUME]}}]),t}(f),t.NewbieExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_NEWBIE]||0}}]),t}(f),t.LSIExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_LSI]||0}}]),t}(f),t.BTIExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return c.get()._ds.getDataAt(e)[l.PERIOD_BTI]||0}}]),t}(f),t.ConstExpr=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._value=e,n}return i(t,e),u(t,[{key:"execute",value:function(e){return this._value}}]),t}(f),t.ParameterExpr=function(e){function t(e,n,i,o){a(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s._name=e,s._minValue=n,s._maxValue=i,s._value=s._defaultValue=o,s}return i(t,e),u(t,[{key:"execute",value:function(e){return this._value}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e){0===e?e=0:e<this._minValue?e=this._minValue:e>this._maxValue&&(e=this._maxValue),this._value=e}}]),t}(f),t.OpAExpr=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._exprA=e,n}return i(t,e),u(t,[{key:"reserve",value:function(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t))}},{key:"clear",value:function(){this._exprA.clear()}}]),t}(f)),p=t.OpABExpr=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i._exprA=e,i._exprB=n,i}return i(t,e),u(t,[{key:"reserve",value:function(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),t}(f),d=t.OpABCExpr=function(e){function t(e,n,i){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._exprA=e,o._exprB=n,o._exprC=i,o}return i(t,e),u(t,[{key:"reserve",value:function(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t),this._exprC.reserve(e,t))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),t}(f),y=t.OpABCDExpr=function(e){function t(e,n,i,o){a(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s._exprA=e,s._exprB=n,s._exprC=i,s._exprD=o,s}return i(t,e),u(t,[{key:"reserve",value:function(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t),this._exprC.reserve(e,t),this._exprD.reserve(e,t))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),t}(f),g=(t.NegExpr=function(e){function t(e){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"execute",value:function(e){return-this._exprA.execute(e)}}]),t}(h),t.AddExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)+this._exprB.execute(e)}}]),t}(p),t.SubExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)-this._exprB.execute(e)}}]),t}(p),t.MulExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)*this._exprB.execute(e)}}]),t}(p),t.DivExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){var t=this._exprA.execute(e),n=this._exprB.execute(e);return 0===t?t:0===n?t>0?1e6:-1e6:t/n}}]),t}(p),t.GtExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)>this._exprB.execute(e)?1:0}}]),t}(p),t.GeExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)>=this._exprB.execute(e)?1:0}}]),t}(p),t.LtExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)<this._exprB.execute(e)?1:0}}]),t}(p),t.LeExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)<=this._exprB.execute(e)?1:0}}]),t}(p),t.EqExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return this._exprA.execute(e)===this._exprB.execute(e)?1:0}}]),t}(p),t.MaxExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return Math.max(this._exprA.execute(e),this._exprB.execute(e))}}]),t}(p),t.AbsExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return Math.abs(this._exprA.execute(e))}}]),t}(h),t.RefExpr=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._offset=-1,i}return i(t,e),u(t,[{key:"execute",value:function(e){if(this._offset<0&&(this._offset=this._exprB.execute(e),this._offset<0))throw"offset < 0";if(e-=this._offset,e<0)throw"index < 0";var t=this._exprA.execute(e);if(isNaN(t))throw"NaN";return t}}]),t}(p),t.AndExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return 0!=this._exprA.execute(e)&&0!=this._exprB.execute(e)?1:0}}]),t}(p),t.OrExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return 0!=this._exprA.execute(e)||0!=this._exprB.execute(e)?1:0}}]),t}(p),t.IfExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"execute",value:function(e){return 0!=this._exprA.execute(e)?this._exprB.execute(e):this._exprC.execute(e)}}]),t}(d),t.AssignExpr=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i._name=e,i._buf=[],i}return i(t,e),u(t,[{key:"getName",value:function(){return this._name}},{key:"execute",value:function(e){return this._buf[e]}},{key:"assign",value:function(e){if(this._buf[e]=this._exprA.execute(e),c.get()._firstIndex>=0&&isNaN(this._buf[e])&&!isNaN(this._buf[e-1]))throw this._name+".assign("+e+"): NaN"}},{key:"reserve",value:function(e,n){if(this._rid<e)for(var r=n;r>0;r--)this._buf.push(NaN);s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reserve",this).call(this,e,n)}},{key:"clear",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this),this._buf.length=0}}]),t}(h)),_=(0,l.NOLY_IDS)(6),v=o(_,6),m=v[0],b=v[1],E=v[2],O=v[3],T=v[4],w=v[5];t.OUTPUT_STYLE_NONE=m,t.OUTPUT_STYLE_LINE=b,t.OUTPUT_STYLE_VOLUMESTICK=E,t.OUTPUT_STYLE_MACDSTICK=O,t.OUTPUT_STYLE_SARPOINT=T,t.OUTPUT_STYLE_COLUMNSTICK=w;var P=t.OutputExpr=function(e){function t(e,n,i,o){a(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s._style=void 0===i?b:i,s._color=o,s}return i(t,e),u(t,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),t}(g),x=(t.RangeOutputExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"getName",value:function(){return this._name+this._exprA.getRange()}}]),t}(P),t.RangeExpr=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._range=-1,i._buf=[],i}return i(t,e),u(t,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(e){this._range<0&&this.initRange();var t=this._buf[e].resultA=this._exprA.execute(e),n=this._buf[e].result=this.calcResult(e,t);return n}},{key:"reserve",value:function(e,n){if(this._rid<e)for(var r=n;r>0;r--)this._buf.push({resultA:NaN,result:NaN});s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reserve",this).call(this,e,n)}},{key:"clear",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this),this._range=-1,this._buf.length=0}}]),t}(p)),I=(t.HhvExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=c.get()._firstIndex;if(n<0)return t;if(e>n){for(var r=this._range,i=t,a=e-r+1,o=Math.max(n,a);o<e;o++){var s=this._buf[o];i<s.resultA&&(i=s.resultA)}return i}return t}}]),t}(x),t.LlvExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=c.get()._firstIndex;if(n<0)return t;if(e>n){for(var r=this._range,i=t,a=e-r+1,o=Math.max(n,a);o<e;o++){var s=this._buf[o];i>s.resultA&&(i=s.resultA)}return i}return t}}]),t}(x),t.CountExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=c.get()._firstIndex;if(n<0)return 0;if(e>=n){var r=this._range-1;r>e-n&&(r=e-n);for(var i=0;r>=0;r--)0!=this._buf[e-r].resultA&&i++;return i}return 0}}]),t}(x),t.SumExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){var n=c.get()._firstIndex;if(n<0)return t;if(e>n){var r=this._range;return 0==r||r>=e+1-n?this._buf[e-1].result+t:this._buf[e-1].result+t-this._buf[e-r].resultA}return t}}]),t}(x),t.StdExpr=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._stdBuf=[],i}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=this._stdBuf[e],r=c.get()._firstIndex;if(r<0)return n.resultMA=t,0;if(e>r){var i=this._range;i>=e+1-r?(i=e+1-r,n.resultMA=this._stdBuf[e-1].resultMA*(1-1/i)+t/i):n.resultMA=this._stdBuf[e-1].resultMA+(t-this._buf[e-i].resultA)/i;for(var a=0,o=e-i+1;o<=e;o++)a+=Math.pow(this._buf[o].resultA-n.resultMA,2);return Math.sqrt(a/i)}return n.resultMA=t,0}},{key:"reserve",value:function(e,n){if(this._rid<e)for(var r=n;r>0;r--)this._stdBuf.push({resultMA:NaN});s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reserve",this).call(this,e,n)}},{key:"clear",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this),this._stdBuf.length=0}}]),t}(x),t.MaExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=c.get()._firstIndex;if(n<0)return t;if(e>n){var r=this._range;return r>=e+1-n?(r=e+1-n,this._buf[e-1].result*(1-1/r)+t/r):this._buf[e-1].result+(t-this._buf[e-r].resultA)/r}return t}}]),t}(x),t.EmaExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"initRange",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1);
}},{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=c.get()._firstIndex;if(n<0)return t;if(e>n){var r=this._buf[e-1];return this._alpha*(t-r.result)+r.result}return t}}]),t}(x));t.ExpmemaExpr=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"calcResult",value:function(e,t){var n=c.get()._firstIndex;if(n<0)return t;if(e>n){var r=this._range,i=this._buf[e-1];return r>=e+1-n?(r=e+1-n,i.result*(1-1/r)+t/r):this._alpha*(t-i.result)+i.result}return t}}]),t}(I),t.SmaExpr=function(e){function t(e,n,i){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return o._exprC=i,o._mul=null,o}return i(t,e),u(t,[{key:"initRange",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(e,t){if(0==this._range)return NaN;var n=c.get()._firstIndex;if(n<0)return t;if(e>n){var r=this._range;return r>e+1-n&&(r=e+1-n),((r-1)*this._buf[e-1].result+t*this._mul)/r}return t}}]),t}(x),t.SarExpr=function(e){function t(e,n,i,o){a(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o));return s._buf=[],s._range=-1,s._min=null,s._step=null,s._max=null,s}return i(t,e),u(t,[{key:"execute",value:function(e){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var t=this._buf[e],n=c.get(),r=n._firstIndex;if(r<0)t.longPos=!0,t.sar=n._ds.getDataAt(e)[l.PERIOD_LOW],t.ep=n._ds.getDataAt(e)[l.PERIOD_HIGH],t.af=.02;else{var i=n._ds.getDataAt(e)[l.PERIOD_HIGH],a=n._ds.getDataAt(e)[l.PERIOD_LOW],o=this._buf[e-1];if(t.sar=o.sar+o.af*(o.ep-o.sar),o.longPos){if(t.longPos=!0,i>o.ep?(t.ep=i,t.af=Math.min(o.af+this._step,this._max)):(t.ep=o.ep,t.af=o.af),t.sar>a){t.longPos=!1;var s=e-this._range+1;for(s=Math.max(s,r);s<e;s++){var u=n._ds.getDataAt(s)[l.PERIOD_HIGH];i<u&&(i=u)}t.sar=i,t.ep=a,t.af=.02}}else if(t.longPos=!1,a<o.ep?(t.ep=a,t.af=Math.min(o.af+this._step,this._max)):(t.ep=o.ep,t.af=o.af),t.sar<i){t.longPos=!0;var f=e-this._range+1;for(f=Math.max(f,r);f<e;f++){var h=n._ds.getDataAt(f)[l.PERIOD_LOW];a>h&&(a=h)}t.sar=a,t.ep=i,t.af=.02}}return t.sar}},{key:"reserve",value:function(e,n){if(this._rid<e)for(var r=n;r>0;r--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reserve",this).call(this,e,n)}},{key:"clear",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this),this._range=-1,this._buf.length=0,this._max=null,this._min=null,this._step=null}}]),t}(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(363),s=n(300),u=n(365),l=r(u),c=n(366),f=n(255),h=new Image;h.src=l.default.spritesheet.image;var p=function(){function e(){i(this,e),this._exprEnv=new o.ExprEnv,this._rid=0,this._params=[],this._assigns=[],this._outputs=[],this._authorized=!0,this._authMessage="抱歉！您还没有登录",this._icons={setting:{id:"setting"},delete:{id:"delete"}},this.indicators=(0,f.cloneDeep)(s.INDICATORS)}return a(e,null,[{key:"getIconStyle",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=e.ICONS[t]){var r="";return r=c.THEME_DARK===(0,c.getCurrentTheme)()?"_dark":"_light",!0===n&&(r="_hover"+r),l.default[t+r]||{}}}}]),a(e,[{key:"setIcon",value:function(t,n){var r=this._icons[t];return void 0!==r&&(e.iconRef.indexOf(r)===-1&&e.iconRef.push(r),r.x=n.x||r.x,r.y=n.y||r.y,r.w=n.w||r.w,r.h=n.h||r.h,r.idx=n.idx||r.idx,!0)}},{key:"getIcon",value:function(e){return this._icons[e]||null}},{key:"getIcons",value:function(){return this._icons}},{key:"getName",value:function(){return"indicator"}},{key:"setAuthorize",value:function(e){this._authorized=e}},{key:"isAuthorized",value:function(){return this._authorized===!0}},{key:"setAuthMessage",value:function(e){this._authMessage=e}},{key:"getAuthMessage",value:function(){return this._authMessage}},{key:"addParameter",value:function(e){this._params.push(e)}},{key:"addAssign",value:function(e){this._assigns.push(e)}},{key:"addOutput",value:function(e){this._outputs.push(e)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(e){return this._params[e]}},{key:"getTitle",value:function(){var e=[this.getName()];return this._params.length>0&&e.push("(",this._params.map(function(e){return e.getValue()}).join(","),")"),e.join("")}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(e){return this._outputs[e]}},{key:"clear",value:function(){this._exprEnv.setFirstIndex(-1);var e=void 0,t=void 0;for(t=this._assigns.length,e=0;e<t;e++)this._assigns[e].clear();for(t=this._outputs.length,e=0;e<t;e++)this._outputs[e].clear()}},{key:"reserve",value:function(e){this._rid++;var t=void 0,n=void 0;for(n=this._assigns.length,t=0;t<n;t++)this._assigns[t].reserve(this._rid,e);for(n=this._outputs.length,t=0;t<n;t++)this._outputs[t].reserve(this._rid,e)}},{key:"execute",value:function(e,t){if(!(t<0)&&this._authorized){this._exprEnv.setDataSource(e),o.ExprEnv.set(this._exprEnv);try{var n=void 0,r=void 0;for(r=this._assigns.length,n=0;n<r;n++)this._assigns[n].assign(t);for(r=this._outputs.length,n=0;n<r;n++)this._outputs[n].assign(t);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(t)}catch(e){if(this._exprEnv.getFirstIndex()>=0)throw e}}}},{key:"getParameters",value:function(){var e=[],t=void 0,n=this._params.length;for(t=0;t<n;t++)e.push(this._params[t].getValue());return e}},{key:"setParameters",value:function(e){if(e instanceof Array&&e.length==this._params.length)for(var t in this._params)this._params[t].setValue(e[t])}}]),e}();p.ICONS={setting:"settings_alt",delete:"close_alt"},p.iconRef=[],p.ICONBG=h,t.default=p},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={close_alt_dark:{x:227,y:211,width:16,height:16},close_alt_hover_dark:{x:180,y:230,width:16,height:16},close_alt_hover_light:{x:0,y:230,width:16,height:16},close_alt_light:{x:72,y:230,width:16,height:16},settings_alt_dark:{x:36,y:230,width:16,height:16},settings_alt_hover_dark:{x:18,y:230,width:16,height:16},settings_alt_hover_light:{x:144,y:230,width:16,height:16},settings_alt_light:{x:126,y:230,width:16,height:16},spritesheet:{width:276,height:259,image:"//static.sosobtc.com/images/all-sprite.png?vee35070e",name:"spritesheet",escaped_image:"/images/all-sprite.png",px:{height:"259px",width:"276px"}}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){switch(e){case y:se=y,ue=oe[y];break;case g:se=g,ue=oe[g];break;case d:default:se=d,ue=oe[d]}}function a(){return se}function o(e,t){if("object"!==("undefined"==typeof ue?"undefined":f(ue)))throw new Error("Call Theme#setTheme first!");if(!ue[e])return"";var n=ue[e];return Array.isArray(n)?t>=0?n[t]:n.slice(0):n}Object.defineProperty(t,"__esModule",{value:!0}),t.AREAALPHA1=t.AREAALPHA=t.VOLUMEBAR=t.TIMELINEBG=t.DISABLEDTEXT=t.PRIMARYTEXT=t.COLORS=t.CROSSHAIR=t.AXISFONT=t.LEGENDITEMHIDDEN=t.LEGENDITEMHOVER=t.LEGENDITEM=t.LEGENDBACKGROUND=t.DEPTHCHARTBACKGROUND=t.TOOLTIPFONT=t.TOOLTIPBORDER=t.TOOLTIPBACKGROUND=t.LARGEFONT=t.DEFAULTFONT=t.CIRCLECOLORSTROKE=t.CIRCLECOLORFILL=t.LINECOLORSELECTED=t.LINECOLORNORMAL=t.TEXTS=t.TEXTNEGATIVE=t.TEXTPOSITIVE=t.GRIDS=t.INDICATORS=t.RANGEMARK=t.CURSOR=t.BACKGROUNDALPHA=t.BACKGROUND=t.UNCHANGED=t.NEGATIVEDARK=t.POSITIVEDARK=t.ASKALPHABACKGROUND=t.BIDALPHABACKGROUND=t.ASKBACKGROUND=t.BIDBACKGROUND=t.NEGATIVE=t.POSITIVE=t.THEME_BLUE=t.THEME_LIGHT=t.THEME_DARK=void 0;var s,u,l,c,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.setTheme=i,t.getCurrentTheme=a,t.getThemeStyle=o;var p=n(300),d=t.THEME_DARK="dark",y=t.THEME_LIGHT="light",g=t.THEME_BLUE="blue",_=(0,p.NOLY_IDS)(40),v=h(_,41),m=v[0],b=v[1],E=v[2],O=v[3],T=v[4],w=v[5],P=v[6],x=v[7],I=v[8],S=v[9],C=v[10],A=v[11],R=v[12],k=v[13],M=v[14],D=v[15],N=v[16],L=v[17],j=v[18],F=v[19],B=v[20],H=v[21],V=v[22],U=v[23],G=v[24],W=v[25],K=v[26],Y=v[27],X=v[28],z=v[29],q=v[30],$=v[31],Q=v[32],J=v[33],Z=v[34],ee=v[35],te=v[36],ne=v[37],re=v[38],ie=v[39],ae=v[40];t.POSITIVE=m,t.NEGATIVE=b,t.BIDBACKGROUND=E,t.ASKBACKGROUND=O,t.BIDALPHABACKGROUND=T,t.ASKALPHABACKGROUND=w,t.POSITIVEDARK=P,t.NEGATIVEDARK=x,t.UNCHANGED=I,t.BACKGROUND=S,t.BACKGROUNDALPHA=C,t.CURSOR=A,t.RANGEMARK=R,t.INDICATORS=k,t.GRIDS=M,t.TEXTPOSITIVE=D,t.TEXTNEGATIVE=N,t.TEXTS=L,t.LINECOLORNORMAL=j,t.LINECOLORSELECTED=F,t.CIRCLECOLORFILL=B,t.CIRCLECOLORSTROKE=H,t.DEFAULTFONT=V,t.LARGEFONT=U,t.TOOLTIPBACKGROUND=G,t.TOOLTIPBORDER=W,t.TOOLTIPFONT=K,t.DEPTHCHARTBACKGROUND=Y,t.LEGENDBACKGROUND=X,t.LEGENDITEM=z,t.LEGENDITEMHOVER=q,t.LEGENDITEMHIDDEN=$,t.AXISFONT=Q,t.CROSSHAIR=J,t.COLORS=Z,t.PRIMARYTEXT=ee,t.DISABLEDTEXT=te,t.TIMELINEBG=ne,t.VOLUMEBAR=re,t.AREAALPHA=ie,t.AREAALPHA1=ae;var oe=(c={},r(c,d,(s={},r(s,m,"#49C043"),r(s,b,"#CC1414"),r(s,E,"#2a5c39"),r(s,O,"#6f3336"),r(s,T,"rgba(50,118,57,.8)"),r(s,w,"rgba(145,62,66,.8)"),r(s,P,"#004718"),r(s,x,"#3b0e08"),r(s,I,"#fff"),r(s,S,"#000"),r(s,C,"rgba(0,0,0,.8)"),r(s,A,"#666"),r(s,R,"#f9ee30"),r(s,k,["#9ab0bc","#c49f70","#f600ff","#6bf","#168181","#8b2f2d"]),r(s,M,["#202020","#252525","#666","#666","#666"]),r(s,D,"#1bd357"),r(s,N,"#ff6f5e"),r(s,L,["#444","#666","#888","#aaa","#ccc"]),r(s,j,"#a6a6a6"),r(s,F,"#fff"),r(s,B,"#000"),r(s,H,"#fff"),r(s,V,"12px Consolas, Monaco, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'"),r(s,U,"18px Consolas, Monaco, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'"),r(s,G,"rgba(0,0,0,.8)"),r(s,W,"#333"),r(s,K,"#888"),r(s,Y,"#000"),r(s,X,"rgba(0,0,0,.4)"),r(s,z,"#565656"),r(s,q,"#999"),r(s,$,"#333"),r(s,Q,"#888"),r(s,J,"#252525"),r(s,Z,["#ddd","#f9ee30","#f600ff","#6bf","#B2DF8A","#FB9A99"]),r(s,ee,"#418dcf"),r(s,te,"#666"),r(s,ne,"#000"),r(s,ie,"rgba(0,109,119,.6)"),r(s,ae,"rgba(0,109,119,.9)"),s)),r(c,y,(u={},r(u,m,"#449e69"),r(u,b,"#d63f2a"),r(u,E,"#2a5c39"),r(u,O,"#6f3336"),r(u,T,"rgba(50,118,57,.8)"),r(u,w,"rgba(145,62,66,.8)"),r(u,P,"#66d293"),r(u,x,"#ffadaa"),r(u,I,"#fff"),r(u,S,"#fff"),r(u,C,"rgba(255,255,255,.8)"),r(u,A,"#aaa"),r(u,R,"#f27935"),r(u,k,["#9ab0bc","#c49f70","#e849b9","#1478c8","#168181","#f33f3b"]),r(u,M,["#e1e1e1","#ccc","#ccc","#bbb","#aaa"]),r(u,D,"#53b37b"),r(u,N,"#db5542"),r(u,L,["#ccc","#aaa","#666","#666","#444"]),r(u,j,"#8c8c8c"),r(u,F,"#393c40"),r(u,B,"#ffffff"),r(u,H,"#393c40"),r(u,V,"12px Consolas, Monaco, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'"),r(u,U,"18px Consolas, Monaco, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'"),r(u,G,"rgba(255,255,255,.8)"),r(u,W,"#ccc"),r(u,K,"#4f4f4f"),r(u,Y,"#fff"),r(u,X,"rgba(210,210,210,.4)"),r(u,z,"#565656"),r(u,q,"#333"),r(u,$,"#999"),r(u,Q,"#4f4f4f"),r(u,J,"#afb1b3"),r(u,Z,["#2fd2b2","#ffb400","#e849b9","#1478c8","#B2DF8A","#FB9A99"]),r(u,ee,"#1877E6"),r(u,te,"#999"),r(u,ne,"#fff"),r(u,ie,"rgba(103,198,208,.6)"),r(u,ae,"rgba(103,198,208,.9)"),u)),r(c,g,(l={},r(l,m,"#62ba4f"),r(l,b,"#f8672d"),r(l,E,"#2a5c39"),r(l,O,"#6f3336"),r(l,T,"rgba(50,118,57,.8)"),r(l,w,"rgba(145,62,66,.8)"),r(l,P,"#004718"),r(l,x,"#3b0e08"),r(l,I,"#fff"),r(l,S,"#12222e"),r(l,C,"rgba(18,34,46,.8)"),r(l,A,"#666"),r(l,R,"#f9ee30"),r(l,k,["#9ab0bc","#c49f70","#f600ff","#6bf","#168181","#8b2f2d"]),r(l,M,["#202020","#656565","#666","#666","#666"]),r(l,D,"#1bd357"),r(l,N,"#ff6f5e"),r(l,L,["#444","#666","#888","#aaa","#ccc"]),r(l,j,"#a6a6a6"),r(l,F,"#fff"),r(l,B,"#000"),r(l,H,"#fff"),r(l,V,"12px Consolas, Monaco, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'"),r(l,U,"18px Consolas, Monaco, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'"),r(l,G,"rgba(0,0,0,.8)"),r(l,W,"#333"),r(l,K,"#888"),r(l,Y,"#000"),r(l,X,"rgba(0,0,0,.4)"),r(l,z,"#565656"),r(l,q,"#999"),r(l,$,"#333"),r(l,Q,"#888"),r(l,J,"#252525"),r(l,Z,["#777f8e","#f8962d","#DF8ADF","#1F78B4","#B2DF8A","#FB9A99"]),r(l,ee,"#418dcf"),r(l,te,"#666"),r(l,ne,"#343f47"),r(l,re,"#4C5962"),r(l,ie,"rgba(0,109,119,.6)"),r(l,ae,"rgba(0,109,119,.9)"),l)),c),se=void 0,ue=void 0;i(window.$theme?window.$theme:d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(256),a=r(i),o=n(255),s=n(355),u=(r(s),n(366)),l=n(300),c=void 0,f=void 0;a.default.canUseDOM&&(c=n(368),f=n(354));var h={theme:{key:"conf:theme",val:function(){return c.get(this.key)||u.THEME_DARK}},tools:{key:"conf:tools",val:function(){return c.get(this.key)||!1}},scale:{key:"conf:scale",val:function(){var e=c.get(this.key);return 0!==e&&(e=e||6),e}},areaHeight:{key:"system:areaHeight",val:function(){return c.get(this.key)||[]}},step:{key:"system:step",val:function(){return c.get(this.key)||900}},indicators:{key:"conf:indicators",val:function(){return c.get(this.key)||[l.INDICATOR_VOLUME]}},indicatorNav:{key:"conf:indicatorNav",val:function(){return c.get(this.key)!==!1}},mainIndicator:{key:"conf:mainIndicator",val:function(){return c.get(this.key)||l.INDICATOR_MA}},stickStyle:{key:"conf:stickStyle",val:function(){return c.get(this.key)||l.STICK_STYLE_CANDLE}},axisScale:{key:"conf:axisScale",val:function(){return c.get(this.key)||l.AXIS_SCALE_LINEAR}},MAParams:{key:"indicator:ma",defaults:[7,30,0,0,0,0],val:function(){return c.get(this.key)||this.defaults}},EMAParams:{key:"indicator:ema",defaults:[7,30,0,0,0,0],val:function(){return c.get(this.key)||this.defaults}},VOLUMEParams:{key:"indicator:volume",defaults:[5,10],val:function(){return c.get(this.key)||this.defaults}},MACDParams:{key:"indicator:macd",defaults:[12,26,9],val:function(){return c.get(this.key)||this.defaults}},KDJParams:{key:"indicator:kdj",defaults:[9,3,3],val:function(){return c.get(this.key)||this.defaults}},StochRSIParams:{key:"indicator:stochRSI",defaults:[14,14,3,3],val:function(){return c.get(this.key)||this.defaults}},RSIParams:{key:"indicator:rsi",defaults:[6,12,24],val:function(){return c.get(this.key)||this.defaults}},DMIParams:{key:"indicator:dmi",defaults:[14,6],val:function(){return c.get(this.key)||this.defaults}},OBVParams:{key:"indicator:obv",defaults:[30],val:function(){return c.get(this.key)||this.defaults}},BOLLParams:{key:"indicator:boll",defaults:[20],val:function(){return c.get(this.key)||this.defaults}},DMAParams:{key:"indicator:dma",defaults:[10,50,10],val:function(){return c.get(this.key)||this.defaults}},TRIXParams:{key:"indicator:trix",defaults:[12,9],val:function(){return c.get(this.key)||this.defaults}},BRARParams:{key:"indicator:brar",defaults:[26],val:function(){return c.get(this.key)||this.defaults}},VRParams:{key:"indicator:vr",defaults:[26,6],val:function(){return c.get(this.key)||this.defaults}},EMVParams:{key:"indicator:emv",defaults:[14,9],val:function(){return c.get(this.key)||this.defaults}},WRParams:{key:"indicator:wr",defaults:[10,6],val:function(){return c.get(this.key)||this.defaults}},ROCParams:{key:"indicator:roc",defaults:[12,6],val:function(){return c.get(this.key)||this.defaults}},MTMParams:{key:"indicator:mtm",defaults:[12,6],val:function(){return c.get(this.key)||this.defaults}},PSYParams:{key:"indicator:psy",defaults:[12,6],val:function(){return c.get(this.key)||this.defaults}}},p={get theme(){return h.theme.val()},set theme(e){document.cookie=f.serialize("theme",e,{maxAge:31536e3}),c.set(h.theme.key,e)},get tools(){return Boolean(h.tools.val())},set tools(e){document.cookie=f.serialize("tools",Boolean(e),{maxAge:31536e3}),c.set(h.tools.key,Boolean(e))},get scale(){return h.scale.val()},set scale(e){e<<=0,c.set(h.scale.key,e)},get areaHeight(){return h.areaHeight.val()},set areaHeight(e){e=e.slice(),c.set(h.areaHeight.key,e)},get step(){return h.step.val()},set step(e){e<<=0,document.cookie=f.serialize("step",e,{maxAge:31536e3}),c.set(h.step.key,e)},get mainIndicator(){return h.mainIndicator.val()},set mainIndicator(e){c.set(h.mainIndicator.key,e)},get indicators(){return h.indicators.val()},set indicators(e){e=e.slice(),c.set(h.indicators.key,e)},get indicatorNav(){return Boolean(h.indicatorNav.val())},set indicatorNav(e){c.set(h.indicatorNav.key,Boolean(e))},get stickStyle(){return h.stickStyle.val()},set stickStyle(e){c.set(h.stickStyle.key,e)},get axisScale(){return h.axisScale.val()},set axisScale(e){c.set(h.axisScale.key,e)}},d={};[l.INDICATOR_MA,l.INDICATOR_EMA,l.INDICATOR_VOLUME,l.INDICATOR_MACD,l.INDICATOR_DMI,l.INDICATOR_DMA,l.INDICATOR_TRIX,l.INDICATOR_BRAR,l.INDICATOR_VR,l.INDICATOR_OBV,l.INDICATOR_EMV,l.INDICATOR_RSI,l.INDICATOR_WR,l.INDICATOR_KDJ,l.INDICATOR_ROC,l.INDICATOR_MTM,l.INDICATOR_BOLL,l.INDICATOR_PSY,l.INDICATOR_StochRSI].forEach(function(e){var t=e+"Params",n=h[t];d[t]={enumerable:!0,get:function(){var e=n.val();if(Array.isArray(e)){var r=e.map(function(e){return(0,l.isNumeric)(e)&&e>=0?e:0});if(!(0,o.isEqual)(e,r))return p[t]=r,r}return e},set:function(e){null===e?c.remove(n.key):Array.isArray(e)&&(e=e.map(function(e){return(0,l.isNumeric)(e)&&e>=0?e:0}),c.set(n.key,e))}},d[e+"DefaultParams"]={enumerable:!0,get:function(){return n.defaults}}}),Object.defineProperties(p,d),t.default=p},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.EMAParams;Array.isArray(n)||(n=h.default.EMADefaultParams);var r=new u.ParameterExpr("M1",2,1e3,n[0]>=0?n[0]:7),o=new u.ParameterExpr("M2",2,1e3,n[1]>=0?n[1]:30),s=new u.ParameterExpr("M3",2,1e3,n[2]>=0?n[2]:0),l=new u.ParameterExpr("M4",2,1e3,n[3]>=0?n[3]:0),c=new u.ParameterExpr("M4",2,1e3,n[4]>=0?n[4]:0),f=new u.ParameterExpr("M4",2,1e3,n[5]>=0?n[5]:0);return e.addParameter(r),e.addParameter(o),e.addParameter(s),e.addParameter(l),e.addParameter(c),e.addParameter(f),e.addOutput(new u.RangeOutputExpr("EMA",new u.EmaExpr(new u.CloseExpr,r))),e.addOutput(new u.RangeOutputExpr("EMA",new u.EmaExpr(new u.CloseExpr,o))),e.addOutput(new u.RangeOutputExpr("EMA",new u.EmaExpr(new u.CloseExpr,s))),e.addOutput(new u.RangeOutputExpr("EMA",new u.EmaExpr(new u.CloseExpr,l))),e.addOutput(new u.RangeOutputExpr("EMA",new u.EmaExpr(new u.CloseExpr,c))),e.addOutput(new u.RangeOutputExpr("EMA",new u.EmaExpr(new u.CloseExpr,f))),e}return o(t,e),s(t,[{key:"getName",value:function(){return"EMA"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new u.ConstExpr(4),r=new u.ConstExpr(2),o=new u.ConstExpr(2),s=new u.ConstExpr(20);return e.addOutput(new u.OutputExpr("SAR",new u.SarExpr(n,r,o,s),u.OUTPUT_STYLE_SARPOINT)),e}return o(t,e),s(t,[{key:"getName",value:function(){return"SAR"}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new u.ParameterExpr("M1",2,1e3,60);return e.addParameter(n),e.addOutput(new u.OutputExpr("HIGH",new u.HighExpr,u.OUTPUT_STYLE_NONE)),e.addOutput(new u.OutputExpr("LOW",new u.LowExpr,u.OUTPUT_STYLE_NONE)),e.addOutput(new u.OutputExpr("CLOSE",new u.CloseExpr,u.OUTPUT_STYLE_LINE)),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(new u.CloseExpr,n),u.OUTPUT_STYLE_LINE)),e}return o(t,e),s(t,[{key:"getName",value:function(){return"CLOSE"}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.VOLUMEParams,r=new u.ParameterExpr("M1",2,500,n[0]),o=new u.ParameterExpr("M2",2,500,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.OutputExpr("VOLUME",new u.VolumeExpr,u.OUTPUT_STYLE_VOLUMESTICK,4);return e.addOutput(s),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(s,r),u.OUTPUT_STYLE_LINE,0)),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(s,o),u.OUTPUT_STYLE_LINE,1)),e}return o(t,e),s(t,[{key:"getName",value:function(){return"VOLUME"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.MACDParams,r=new u.ParameterExpr("SHORT",2,200,n[0]),o=new u.ParameterExpr("LONG",2,200,n[1]),s=new u.ParameterExpr("MID",2,200,n[2]);e.addParameter(r),e.addParameter(o),e.addParameter(s);var l=new u.OutputExpr("DIF",new u.SubExpr(new u.EmaExpr(new u.CloseExpr,r),new u.EmaExpr(new u.CloseExpr,o)));e.addOutput(l);var c=new u.OutputExpr("DEA",new u.EmaExpr(l,s));e.addOutput(c);var f=new u.OutputExpr("MACD",new u.MulExpr(new u.SubExpr(l,c),new u.ConstExpr(2)),u.OUTPUT_STYLE_MACDSTICK);return e.addOutput(f),e}return o(t,e),s(t,[{key:"getName",value:function(){return"MACD"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.KDJParams,r=new u.ParameterExpr("N",2,90,n[0]),o=new u.ParameterExpr("M1",2,30,n[1]),s=new u.ParameterExpr("M2",2,30,n[2]);e.addParameter(r),e.addParameter(o),e.addParameter(s);var l=new u.AssignExpr("HHV",new u.HhvExpr(new u.HighExpr,r));e.addAssign(l);var c=new u.AssignExpr("LLV",new u.LlvExpr(new u.LowExpr,r));e.addAssign(c);var f=new u.AssignExpr("RSV",new u.MulExpr(new u.DivExpr(new u.SubExpr(new u.CloseExpr,c),new u.SubExpr(l,c)),new u.ConstExpr(100)));e.addAssign(f);var p=new u.OutputExpr("K",new u.SmaExpr(f,o,new u.ConstExpr(1)));e.addOutput(p);var d=new u.OutputExpr("D",new u.SmaExpr(p,s,new u.ConstExpr(1)));e.addOutput(d);var y=new u.OutputExpr("J",new u.SubExpr(new u.MulExpr(p,new u.ConstExpr(3)),new u.MulExpr(d,new u.ConstExpr(2))));return e.addOutput(y),e}return o(t,e),s(t,[{key:"getName",value:function(){return"KDJ"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.StochRSIParams,r=new u.ParameterExpr("N",3,100,n[0]),o=new u.ParameterExpr("M",3,100,n[1]),s=new u.ParameterExpr("P1",2,50,n[2]),l=new u.ParameterExpr("P2",2,50,n[3]);e.addParameter(r),e.addParameter(o),e.addParameter(s),e.addParameter(l);var c=new u.AssignExpr("LC",new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1)));e.addAssign(c);var f=new u.AssignExpr("CLOSE_LC",new u.SubExpr(new u.CloseExpr,c));e.addAssign(f);var p=new u.AssignExpr("RSI",new u.MulExpr(new u.DivExpr(new u.SmaExpr(new u.MaxExpr(f,new u.ConstExpr(0)),r,new u.ConstExpr(1)),new u.SmaExpr(new u.AbsExpr(f),r,new u.ConstExpr(1))),new u.ConstExpr(100)));e.addAssign(p);var d=new u.OutputExpr("STOCHRSI",new u.MulExpr(new u.DivExpr(new u.MaExpr(new u.SubExpr(p,new u.LlvExpr(p,o)),s),new u.MaExpr(new u.SubExpr(new u.HhvExpr(p,o),new u.LlvExpr(p,o)),s)),new u.ConstExpr(100)));return e.addOutput(d),e.addOutput(new u.RangeOutputExpr("MA",new u.MaExpr(d,l))),e}return o(t,e),s(t,[{key:"getName",value:function(){return"StochRSI"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.RSIParams,r=new u.ParameterExpr("N1",2,120,n[0]),o=new u.ParameterExpr("N2",2,250,n[1]),s=new u.ParameterExpr("N3",2,500,n[2]);e.addParameter(r),e.addParameter(o),e.addParameter(s);var l=new u.AssignExpr("LC",new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1)));e.addAssign(l);var c=new u.AssignExpr("CLOSE_LC",new u.SubExpr(new u.CloseExpr,l));
return e.addAssign(c),e.addOutput(new u.OutputExpr("RSI1",new u.MulExpr(new u.DivExpr(new u.SmaExpr(new u.MaxExpr(c,new u.ConstExpr(0)),r,new u.ConstExpr(1)),new u.SmaExpr(new u.AbsExpr(c),r,new u.ConstExpr(1))),new u.ConstExpr(100)))),e.addOutput(new u.OutputExpr("RSI2",new u.MulExpr(new u.DivExpr(new u.SmaExpr(new u.MaxExpr(c,new u.ConstExpr(0)),o,new u.ConstExpr(1)),new u.SmaExpr(new u.AbsExpr(c),o,new u.ConstExpr(1))),new u.ConstExpr(100)))),e.addOutput(new u.OutputExpr("RSI3",new u.MulExpr(new u.DivExpr(new u.SmaExpr(new u.MaxExpr(c,new u.ConstExpr(0)),s,new u.ConstExpr(1)),new u.SmaExpr(new u.AbsExpr(c),s,new u.ConstExpr(1))),new u.ConstExpr(100)))),e}return o(t,e),s(t,[{key:"getName",value:function(){return"RSI"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.DMIParams,r=new u.ParameterExpr("N",2,90,n[0]),o=new u.ParameterExpr("MM",2,60,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.AssignExpr("MTR",new u.ExpmemaExpr(new u.MaxExpr(new u.MaxExpr(new u.SubExpr(new u.HighExpr,new u.LowExpr),new u.AbsExpr(new u.SubExpr(new u.HighExpr,new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1))))),new u.AbsExpr(new u.SubExpr(new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1)),new u.LowExpr))),r));e.addAssign(s);var l=new u.AssignExpr("HD",new u.SubExpr(new u.HighExpr,new u.RefExpr(new u.HighExpr,new u.ConstExpr(1))));e.addAssign(l);var c=new u.AssignExpr("LD",new u.SubExpr(new u.RefExpr(new u.LowExpr,new u.ConstExpr(1)),new u.LowExpr));e.addAssign(c);var f=new u.AssignExpr("DMP",new u.ExpmemaExpr(new u.IfExpr(new u.AndExpr(new u.GtExpr(l,new u.ConstExpr(0)),new u.GtExpr(l,c)),l,new u.ConstExpr(0)),r));e.addAssign(f);var p=new u.AssignExpr("DMM",new u.ExpmemaExpr(new u.IfExpr(new u.AndExpr(new u.GtExpr(c,new u.ConstExpr(0)),new u.GtExpr(c,l)),c,new u.ConstExpr(0)),r));e.addAssign(p);var d=new u.OutputExpr("PDI",new u.MulExpr(new u.DivExpr(f,s),new u.ConstExpr(100)));e.addOutput(d);var y=new u.OutputExpr("MDI",new u.MulExpr(new u.DivExpr(p,s),new u.ConstExpr(100)));e.addOutput(y);var g=new u.OutputExpr("ADX",new u.ExpmemaExpr(new u.MulExpr(new u.DivExpr(new u.AbsExpr(new u.SubExpr(y,d)),new u.AddExpr(y,d)),new u.ConstExpr(100)),o));e.addOutput(g);var _=new u.OutputExpr("ADXR",new u.ExpmemaExpr(g,o));return e.addOutput(_),e}return o(t,e),s(t,[{key:"getName",value:function(){return"DMI"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new u.ParameterExpr("M",2,100,h.default.OBVParams[0]);e.addParameter(n);var r=new u.AssignExpr("REF_CLOSE_1",new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1)));e.addAssign(r);var o=new u.AssignExpr("VA",new u.IfExpr(new u.GtExpr(new u.CloseExpr,r),new u.VolumeExpr,new u.NegExpr(new u.VolumeExpr)));e.addAssign(o);var s=new u.OutputExpr("OBV",new u.SumExpr(new u.IfExpr(new u.EqExpr(new u.CloseExpr,r),new u.ConstExpr(0),o),new u.ConstExpr(0)));e.addOutput(s);var l=new u.OutputExpr("MAOBV",new u.MaExpr(s,n));return e.addOutput(l),e}return o(t,e),s(t,[{key:"getName",value:function(){return"OBV"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.BOLLParams,r=new u.ParameterExpr("N",2,120,n[0]);e.addParameter(r);var o=new u.AssignExpr("STD_CLOSE_N",new u.StdExpr(new u.CloseExpr,r));e.addAssign(o);var s=new u.OutputExpr("BOLL",new u.MaExpr(new u.CloseExpr,r));e.addOutput(s);var l=new u.OutputExpr("UB",new u.AddExpr(s,new u.MulExpr(new u.ConstExpr(2),o)));e.addOutput(l);var c=new u.OutputExpr("LB",new u.SubExpr(s,new u.MulExpr(new u.ConstExpr(2),o)));return e.addOutput(c),e}return o(t,e),s(t,[{key:"getName",value:function(){return"BOLL"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.DMAParams,r=new u.ParameterExpr("N1",2,60,n[0]),o=new u.ParameterExpr("N2",2,250,n[1]),s=new u.ParameterExpr("M",2,100,n[2]);e.addParameter(r),e.addParameter(o),e.addParameter(s);var l=new u.OutputExpr("DIF",new u.SubExpr(new u.MaExpr(new u.CloseExpr,r),new u.MaExpr(new u.CloseExpr,o)));e.addOutput(l);var c=new u.OutputExpr("DIFMA",new u.MaExpr(l,s));return e.addOutput(c),e}return o(t,e),s(t,[{key:"getName",value:function(){return"DMA"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.TRIXParams,r=new u.ParameterExpr("N",2,100,n[0]),o=new u.ParameterExpr("M",2,100,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.AssignExpr("MTR",new u.EmaExpr(new u.EmaExpr(new u.EmaExpr(new u.CloseExpr,r),r),r));e.addAssign(s);var l=new u.OutputExpr("TRIX",new u.MulExpr(new u.DivExpr(new u.SubExpr(s,new u.RefExpr(s,new u.ConstExpr(1))),new u.RefExpr(s,new u.ConstExpr(1))),new u.ConstExpr(100)));e.addOutput(l);var c=new u.OutputExpr("MATRIX",new u.MaExpr(l,o));return e.addOutput(c),e}return o(t,e),s(t,[{key:"getName",value:function(){return"TRIX"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.BRARParams,r=new u.ParameterExpr("N",2,120,n[0]);e.addParameter(r);var o=new u.AssignExpr("REF_CLOSE_1",new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1)));e.addAssign(o);var s=new u.OutputExpr("BR",new u.MulExpr(new u.DivExpr(new u.SumExpr(new u.MaxExpr(new u.ConstExpr(0),new u.SubExpr(new u.HighExpr,o)),r),new u.SumExpr(new u.MaxExpr(new u.ConstExpr(0),new u.SubExpr(o,new u.LowExpr)),r)),new u.ConstExpr(100)));e.addOutput(s);var l=new u.OutputExpr("AR",new u.MulExpr(new u.DivExpr(new u.SumExpr(new u.SubExpr(new u.HighExpr,new u.OpenExpr),r),new u.SumExpr(new u.SubExpr(new u.OpenExpr,new u.LowExpr),r)),new u.ConstExpr(100)));return e.addOutput(l),e}return o(t,e),s(t,[{key:"getName",value:function(){return"BRAR"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.VRParams,r=new u.ParameterExpr("N",2,100,n[0]),o=new u.ParameterExpr("M",2,100,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.AssignExpr("REF_CLOSE_1",new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1)));e.addAssign(s);var l=new u.AssignExpr("TH",new u.SumExpr(new u.IfExpr(new u.GtExpr(new u.CloseExpr,s),new u.VolumeExpr,new u.ConstExpr(0)),r));e.addAssign(l);var c=new u.AssignExpr("TL",new u.SumExpr(new u.IfExpr(new u.LtExpr(new u.CloseExpr,s),new u.VolumeExpr,new u.ConstExpr(0)),r));e.addAssign(c);var f=new u.AssignExpr("TQ",new u.SumExpr(new u.IfExpr(new u.EqExpr(new u.CloseExpr,s),new u.VolumeExpr,new u.ConstExpr(0)),r));e.addAssign(f);var p=new u.OutputExpr("VR",new u.MulExpr(new u.DivExpr(new u.AddExpr(new u.MulExpr(l,new u.ConstExpr(2)),f),new u.AddExpr(new u.MulExpr(c,new u.ConstExpr(2)),f)),new u.ConstExpr(100)));e.addOutput(p);var d=new u.OutputExpr("MAVR",new u.MaExpr(p,o));return e.addOutput(d),e}return o(t,e),s(t,[{key:"getName",value:function(){return"VR"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.EMVParams,r=new u.ParameterExpr("N",2,90,n[0]),o=new u.ParameterExpr("M",2,60,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.AssignExpr("VOLUME",new u.DivExpr(new u.MaExpr(new u.VolumeExpr,r),new u.VolumeExpr));e.addAssign(s);var l=new u.AssignExpr("MID",new u.MulExpr(new u.DivExpr(new u.SubExpr(new u.AddExpr(new u.HighExpr,new u.LowExpr),new u.RefExpr(new u.AddExpr(new u.HighExpr,new u.LowExpr),new u.ConstExpr(1))),new u.AddExpr(new u.HighExpr,new u.LowExpr)),new u.ConstExpr(100)));e.addAssign(l);var c=new u.OutputExpr("EMV",new u.MaExpr(new u.DivExpr(new u.MulExpr(l,new u.MulExpr(s,new u.SubExpr(new u.HighExpr,new u.LowExpr))),new u.MaExpr(new u.SubExpr(new u.HighExpr,new u.LowExpr),r)),r));e.addOutput(c);var f=new u.OutputExpr("MAEMV",new u.MaExpr(c,o));return e.addOutput(f),e}return o(t,e),s(t,[{key:"getName",value:function(){return"EMV"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.WRParams,r=new u.ParameterExpr("N",2,100,n[0]),o=new u.ParameterExpr("N1",2,100,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.AssignExpr("HHV",new u.HhvExpr(new u.HighExpr,r));e.addAssign(s);var l=new u.AssignExpr("HHV1",new u.HhvExpr(new u.HighExpr,o));e.addAssign(l);var c=new u.AssignExpr("LLV",new u.LlvExpr(new u.LowExpr,r));e.addAssign(c);var f=new u.AssignExpr("LLV1",new u.LlvExpr(new u.LowExpr,o));e.addAssign(f);var p=new u.OutputExpr("WR1",new u.MulExpr(new u.DivExpr(new u.SubExpr(s,new u.CloseExpr),new u.SubExpr(s,c)),new u.ConstExpr(100)));e.addOutput(p);var d=new u.OutputExpr("WR2",new u.MulExpr(new u.DivExpr(new u.SubExpr(l,new u.CloseExpr),new u.SubExpr(l,f)),new u.ConstExpr(100)));return e.addOutput(d),e}return o(t,e),s(t,[{key:"getName",value:function(){return"WR"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.ROCParams,r=new u.ParameterExpr("N",2,120,n[0]),o=new u.ParameterExpr("M",2,60,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.AssignExpr("REF_CLOSE_N",new u.RefExpr(new u.CloseExpr,r));e.addAssign(s);var l=new u.OutputExpr("ROC",new u.MulExpr(new u.DivExpr(new u.SubExpr(new u.CloseExpr,s),s),new u.ConstExpr(100)));e.addOutput(l);var c=new u.OutputExpr("MAROC",new u.MaExpr(l,o));return e.addOutput(c),e}return o(t,e),s(t,[{key:"getName",value:function(){return"ROC"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.MTMParams,r=new u.ParameterExpr("N",2,120,n[0]),o=new u.ParameterExpr("M",2,60,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.OutputExpr("MTM",new u.SubExpr(new u.CloseExpr,new u.RefExpr(new u.CloseExpr,r)));e.addOutput(s);var l=new u.OutputExpr("MTMMA",new u.MaExpr(s,o));return e.addOutput(l),e}return o(t,e),s(t,[{key:"getName",value:function(){return"MTM"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=n(367),h=r(f),p=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=h.default.PSYParams,r=new u.ParameterExpr("N",2,100,n[0]),o=new u.ParameterExpr("M",2,100,n[1]);e.addParameter(r),e.addParameter(o);var s=new u.OutputExpr("PSY",new u.MulExpr(new u.DivExpr(new u.CountExpr(new u.GtExpr(new u.CloseExpr,new u.RefExpr(new u.CloseExpr,new u.ConstExpr(1))),r),r),new u.ConstExpr(100)));e.addOutput(s);var l=new u.OutputExpr("PSYMA",new u.MaExpr(s,o));return e.addOutput(l),e}return o(t,e),s(t,[{key:"getName",value:function(){return"PSY"}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new u.OutputExpr("BTI",new u.BTIExpr,u.OUTPUT_STYLE_COLUMNSTICK);return e.addOutput(n),e}return o(t,e),s(t,[{key:"getName",value:function(){return"情绪指数"}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new u.OutputExpr("LSI",new u.LSIExpr,u.OUTPUT_STYLE_COLUMNSTICK);return e.addOutput(n),e}return o(t,e),s(t,[{key:"getName",value:function(){return"多空指数"}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(363),l=n(364),c=r(l),f=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new u.OutputExpr("Newbie",new u.NewbieExpr,u.OUTPUT_STYLE_COLUMNSTICK);return e.addOutput(n),e}return o(t,e),s(t,[{key:"getName",value:function(){return"新人指数"}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MainRange=t.ZeroBasedPositiveRange=t.PositiveRange=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(393),l=r(u),c=n(355);r(c),n(300),t.PositiveRange=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"preSetRange",value:function(e){e.min<0&&(e.min=0),e.max<0&&(e.max=0)}}]),t}(l.default),t.ZeroBasedPositiveRange=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"preSetRange",value:function(e){e.min=0,e.max<0&&(e.max=0)}}]),t}(l.default),t.MainRange=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._log_scale_y=!0,n}return o(t,e),s(t,[{key:"preSetRange",value:function(e){if(e.min>0){var t=e.max/e.min;if(t<1.012){var n=t-1,r=n/2;e.max=e.max*(1+r),e.min=e.min*(1-r)}else if(t<1.024){var r=(e.max+e.min)/2,n=t-1;e.max=r*(1+n),e.min=r*(1-n)}else if(t<1.048){var r=(e.max+e.min)/2;e.max=1.024*r,e.min=.976*r}}e.min<0&&(e.min=0),e.max<0&&(e.max=0)}}]),t}(l.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(392),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._updated=!0,n._minValue=Number.MAX_VALUE,n._maxValue=-Number.MAX_VALUE,n._outerMinValue=Number.MAX_VALUE,n._outerMaxValue=-Number.MAX_VALUE,n._ratio=0,n._top=0,n._bottom=0,n._paddingTop=0,n._paddingBottom=0,n._minInterval=36,n._showIndicatorNav=!1,n._log_scale_y=!1,n._selectedPosition=-1,n._selectedValue=-Number.MAX_VALUE,n._gradations=[],n}return o(t,e),s(t,[{key:"setLogScaleY",value:function(e){this._log_scale_y=Boolean(e)}},{key:"isLogScaleY",value:function(){return this._log_scale_y}},{key:"switchIndicatorNav",value:function(e){return this._showIndicatorNav=Boolean(e)}},{key:"showIndicatorNav",value:function(){return this._showIndicatorNav=!0}},{key:"hideIndicatorNav",value:function(){return this._showIndicatorNav=!1}},{key:"isIndicatorNavShown",value:function(){return this._showIndicatorNav===!0}},{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(e){this._updated=e}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(e){this._minInterval=e}},{key:"getSelectedPosition",value:function(){return this._selectedPosition>=0?this._selectedPosition:this._selectedValue>-Number.MAX_VALUE?this.toY(this._selectedValue):-1}},{key:"getSelectedValue",value:function(){if(this._selectedValue>-Number.MAX_VALUE)return this._selectedValue;var e=f.default.getInstance(),t=e.getArea(this.getAreaName());return null==t?-Number.MAX_VALUE:this._selectedPosition<t.getTop()+12||this._selectedPosition>=t.getBottom()-4?-Number.MAX_VALUE:this.toValue(this._selectedPosition)}},{key:"setPaddingTop",value:function(e){this._paddingTop=e}},{key:"setPaddingBottom",value:function(e){this._paddingBottom=e}},{key:"toValue",value:function(e){return 0===this._ratio?0:this._log_scale_y?Math.exp((this._bottom-e)/this._ratio)*this._minValue:this._maxValue-(e-this._top)/this._ratio;
}},{key:"toY",value:function(e){return this._ratio>0?this._log_scale_y?(e=Math.log(e/this._minValue),Math.round(this._bottom-e*this._ratio)):this._top+Math.floor((this._maxValue-e)*this._ratio+.5):this._top}},{key:"toHeight",value:function(e){return this._ratio>0?this._log_scale_y?(e=Math.log(e/this._minValue),e*this._ratio):Math.floor(e*this._ratio+1.5):0}},{key:"update",value:function(){for(var e,t=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=f.default.getInstance(),i=[".main",".secondary"],a=this instanceof h.MainRange,o=0;o<i.length;o++)if(e=r.getDataProvider(this.getName()+i[o]),null!=e){var s=e.getMinValue(),u=e.getMaxValue();a?s>0&&(t=Math.min(t,s)):t=Math.min(t,s),n=Math.max(n,u)}var l={min:t,max:n};this.preSetRange(l),this.setRange(l.min,l.max)}},{key:"select",value:function(e){this._selectedValue=e,this._selectedPosition=-1}},{key:"selectAt",value:function(e){this._selectedPosition=e,this._selectedValue=-Number.MAX_VALUE}},{key:"unselect",value:function(){this._selectedPosition=-1,this._selectedValue=-Number.MAX_VALUE}},{key:"preSetRange",value:function(e){e.min==e.max&&(e.min=-1,e.max=1)}},{key:"setRange",value:function(e,t){var n=f.default.getInstance(),r=n.getArea(this.getAreaName());if(e>0&&t/e<1.0018&&(e*=.9991,t*=1.0009),this._minValue!=e||this._maxValue!=t||r.isChanged()){this._updated=!0,this._minValue=e,this._maxValue=t,this._gradations=[];var i=r.getTop()+this._paddingTop,a=r.getBottom()-(this._paddingBottom+1);if(i>=a)return void(this._minValue=this._maxValue);this._top=i,this._bottom=a,this._maxValue>this._minValue?this._log_scale_y?this._ratio=(a-i)/Math.log(this._maxValue/this._minValue):this._ratio=(a-i)/(this._maxValue-this._minValue):this._ratio=0,this._outerMinValue=this.toValue(r.getBottom()),this._outerMaxValue=this.toValue(r.getTop()),this.updateGradations()}}},{key:"calcInterval",value:function(){var e,t,n,r,i,a,o;return n=Math.abs(this.getHeight()/32),r=this.getRange()/n,o=function(){var n,i,o,s;for(o=[1,2,5],s=[],n=0,i=o.length;n<i;n++)e=o[n],t=r/e,a=Math.ceil(Math.log(t)/Math.log(10)).toFixed(2),a=Math.pow(10,a),a*=e,s.push(a);return s}(),i=Math.min.apply(Math,o)}},{key:"updateGradations",value:function(){var e,t;for(t=this.calcInterval(),e=Math.floor(this._maxValue/t)*t,this._gradations=[];e>this._minValue;)this._gradations.push(parseFloat(e.toPrecision(5))),e-=t}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(393),l=r(u),c=n(355),f=r(c),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"calcInterval",value:function(e){var t=this.getMinInterval();if(e.getHeight()/t<2)return 0;var n,r=this.getRange();for(n=3;!(this.toHeight(r/n)<=t);n+=2);return n-=2,r/n}},{key:"updateGradations",value:function(){this._gradations=[];var e=f.default.getInstance(),t=e.getArea(this.getAreaName()),n=this.calcInterval(t);if(!(n<=0)){var r=n/2;do this._gradations.push(r),this._gradations.push(-r),r+=n;while(r<=this.getMaxValue())}}},{key:"preSetRange",value:function(e){var t=Math.max(Math.abs(e.min),Math.abs(e.max));e.min=-t,e.max=t}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(393),l=r(u),c=n(355),f=r(c),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"updateGradations",value:function(){this._gradations=[];var e=f.default.getInstance(),t=e.getArea(this.getAreaName()),n=10,r=Math.floor(this.toHeight(n));if(!(r<<2>t.getHeight())){var i=Math.ceil(this.getMinValue()/n)*n;if(0==i&&(i=0),r<<2<24){if(r<<1<8)return;do 20!=i&&80!=i||this._gradations.push(i),i+=n;while(i<this.getMaxValue())}else do r<8?20!=i&&50!=i&&80!=i||this._gradations.push(i):0!=i&&20!=i&&50!=i&&80!=i&&100!=i||this._gradations.push(i),i+=n;while(i<this.getMaxValue())}}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(361),p=r(h),d=n(363),y=n(397),g=r(y),_=n(300),v=n(366),m=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getArea(this.getAreaName()),r=t.getTimeline(this.getDataSourceName()),i=t.getRange(this.getAreaName()),a=t.getDataProvider(this.getName());if(a instanceof p.default){var o,s=a.getIndicator(),u=r.getFirstIndex(),l=r.getLastIndex();o=n.isChanged()||r.isUpdated()||i.isUpdated()?u:Math.max(u,l-2);var c=r.toColumnLeft(o),h=r.toItemCenter(o);if(s.isAuthorized()){var y=i.getRange();if(0==y||y===1/0)this.drawMessage(e,"该时间段没有数据",n);else{var _,m,b=r.getColumnWidth(),E=s.getOutputCount();for(m=0;m<E;m++){_=s.getOutputAt(m);var O=_.getStyle();O==d.OUTPUT_STYLE_VOLUMESTICK?this.drawVolumeStick(e,t.getDataSource(this.getDataSourceName()),o,l,r.toItemLeft(o),b,r.getItemWidth(),i):O==d.OUTPUT_STYLE_MACDSTICK?this.drawMACDStick(e,_,o,l,r.toItemLeft(o),b,r.getItemWidth(),i):O==d.OUTPUT_STYLE_SARPOINT?this.drawSARPoint(e,_,o,l,r.toItemCenter(o),b,r.getItemWidth(),i):O==d.OUTPUT_STYLE_COLUMNSTICK&&this.drawColumnStick(e,_,o,l,r.toItemLeft(o),b,r.getItemWidth(),i)}for(e.save(),e.rect(c,n.getTop(),n.getRight()-c,n.getHeight()),e.clip(),e.translate(.5,.5),m=0;m<E;m++){var T=h;if(_=s.getOutputAt(m),_.getStyle()==d.OUTPUT_STYLE_LINE){var w,P=[];o>u&&(w=_.execute(o-1),0==isNaN(w)&&P.push({x:T-b,y:i.toY(w)}));for(var x=o;x<l;x++,T+=b)w=_.execute(x),0==isNaN(w)&&P.push({x:T,y:i.toY(w)});if(P.length>0){var I=_.getColor();void 0==I&&(I=m),e.strokeStyle=(0,v.getThemeStyle)(v.COLORS,I),g.default.drawLines(e,P)}}}e.restore()}}else i.setRange(0,0),this.drawMessage(e,s.getAuthMessage(),n)}}},{key:"drawVolumeStick",value:function(e,t,n,r,i,a,o,s){for(var u=(0,v.getCurrentTheme)()===v.THEME_DARK,l=i,c=(s.toY(0),[]),f=[],h=[],p=n;p<r;p++){var d=t.getDataAt(p),y=s.toY(d[_.PERIOD_VOLUME]),m=s.toHeight(d[_.PERIOD_VOLUME]);d[_.PERIOD_CLOSE]>d[_.PERIOD_OPEN]?m>1&&o>1&&u?c.push({x:l,y:y,w:o,h:m}):f.push({x:l,y:y,w:Math.max(o,1),h:Math.max(m,1)}):d[_.PERIOD_CLOSE]==d[_.PERIOD_OPEN]&&p>0&&d[_.PERIOD_CLOSE]>=t.getDataAt(p-1)[_.PERIOD_CLOSE]?m>1&&o>1&&u?c.push({x:l,y:y,w:o,h:m}):f.push({x:l,y:y,w:Math.max(o,1),h:Math.max(m,1)}):h.push({x:l,y:y,w:Math.max(o,1),h:Math.max(m,1)}),l+=a}var b=(0,v.getThemeStyle)(v.POSITIVE),E=(0,v.getThemeStyle)(v.VOLUMEBAR),O=E?E:b,T=E?E:(0,v.getThemeStyle)(v.NEGATIVE);c.length>0&&(e.strokeStyle=(0,v.getThemeStyle)(v.POSITIVE),e.fillStyle=(0,v.getThemeStyle)(v.BACKGROUND),g.default.fillAndStrokeRects(e,c)),f.length>0&&(e.fillStyle=O,g.default.createRectangles(e,f),e.fill()),h.length>0&&(e.fillStyle=T,g.default.createRectangles(e,h),e.fill())}},{key:"drawMACDStick",value:function(e,t,n,r,i,a,o,s){for(var u=i,l=s.toY(0),c=[],f=[],h=[],p=[],d=n>0?t.execute(n-1):NaN,y=n;y<r;y++){var _=t.execute(y);if(_>=0){var m=s.toHeight(_);(0==y||_>=d)&&m>1&&o>1?c.push({x:u,y:l-m,w:o,h:m}):h.push({x:u,y:l-m,w:Math.max(o,1),h:Math.max(m,1)})}else{var m=s.toHeight(-_);(0==y||_>=d)&&m>1&&o>1?f.push({x:u,y:l,w:o,h:m}):p.push({x:u,y:l,w:Math.max(o,1),h:Math.max(m,1)})}d=_,u+=a}c.length>0&&(e.strokeStyle=(0,v.getThemeStyle)(v.POSITIVE),e.fillStyle=(0,v.getThemeStyle)(v.BACKGROUND),g.default.fillAndStrokeRects(e,c)),f.length>0&&(e.strokeStyle=(0,v.getThemeStyle)(v.NEGATIVE),e.fillStyle=(0,v.getThemeStyle)(v.BACKGROUND),g.default.fillAndStrokeRects(e,f)),h.length>0&&(e.fillStyle=(0,v.getThemeStyle)(v.POSITIVE),g.default.createRectangles(e,h),e.fill()),p.length>0&&(e.fillStyle=(0,v.getThemeStyle)(v.NEGATIVE),g.default.createRectangles(e,p),e.fill())}},{key:"drawSARPoint",value:function(e,t,n,r,i,a,o,s){var u=o>>1;u<.5&&(u=.5),u>4&&(u=4);var l=i,c=l+u,f=2*Math.PI;e.save(),e.translate(.5,.5),e.strokeStyle=(0,v.getThemeStyle)(v.COLORS,3),e.beginPath();for(var h=n;h<r;h++){var p=s.toY(t.execute(h));e.moveTo(c,p),e.arc(l,p,u,0,f),l+=a,c+=a}e.stroke(),e.restore()}},{key:"drawColumnStick",value:function(e,t,n,r,i,a,o,s){for(var u=i,l=s.toY(0),c=[],f=[],h=n;h<r;h++){var p=t.execute(h);if(p>=0){var d=s.toHeight(p);c.push({x:u,y:l-d,w:o,h:d})}else{var d=s.toHeight(-p);f.push({x:u,y:l,w:Math.max(o,1),h:Math.max(d,1)})}u+=a}c.length>0&&(e.strokeStyle=(0,v.getThemeStyle)(v.INDICATORS,4),e.fillStyle=(0,v.getThemeStyle)(v.BACKGROUND),g.default.fillAndStrokeRects(e,c)),f.length>0&&(e.fillStyle=(0,v.getThemeStyle)(v.INDICATORS,5),g.default.createRectangles(e,f),e.fill())}},{key:"drawMessage",value:function(e,t,n){e.fillStyle=(0,v.getThemeStyle)(v.BACKGROUND,0),e.clearRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight()),e.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight()),e.font=(0,v.getThemeStyle)(v.LARGEFONT),e.textAlign="center",e.textBaseline="top",e.fillStyle=(0,v.getThemeStyle)(v.TEXTS,0),e.fillText(t,n.getCenter(),n.getMiddle()-20)}}]),t}(l.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(364),f=r(c),h=n(300),p=n(366),d=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),s(t,null,[{key:"drawLine",value:function(e,t,n,r,i){e.beginPath(),e.moveTo((t<<0)+.5,(n<<0)+.5),e.lineTo((r<<0)+.5,(i<<0)+.5),e.stroke()}},{key:"drawLines",value:function(e,t){var n,r=t.length;for(e.beginPath(),e.moveTo(t[0].x,t[0].y),n=1;n<r;n++)e.lineTo(t[n].x,t[n].y);e.stroke()}},{key:"drawDashedLine",value:function(e,t,n,r,i,a,o){a<2&&(a=2);var s=r-t,u=i-n;if(e.beginPath(),0==u){for(var l=s/a+.5<<0,c=0;c<l;c++)e.rect(t,n,o,1),t+=a;e.fill()}else{var l=Math.sqrt(s*s+u*u)/a+.5<<0;s/=l,u/=l;for(var f=s*o/a,h=u*o/a,c=0;c<l;c++)e.moveTo(t+.5,n+.5),e.lineTo(t+.5+f,n+.5+h),t+=s,n+=u;e.stroke()}}},{key:"createHorzDashedLine",value:function(e,t,n,r,i,a){i<2&&(i=2);for(var o=n-t,s=o/i+.5<<0,u=0;u<s;u++)e.rect(t,r,a,1),t+=i}},{key:"createRectangles",value:function(e,t){e.beginPath();var n,r,i=t.length;for(r=0;r<i;r++)n=t[r],e.rect(n.x,n.y,n.w,n.h)}},{key:"createVerticalLines",value:function(e,t){e.beginPath();var n,r,i=t.length;for(r=0;r<i;r++)n=t[r],e.moveTo(n.x,n.sy),e.lineTo(n.x,n.ey);e.stroke()}},{key:"fillAndStrokeRects",value:function(e,t){e.beginPath();var n,r,i=t.length;for(r=0;r<i;r++)n=t[r],n.h>1?(e.fillRect(n.x,n.y,n.w,n.h),e.strokeRect(n.x+.5,n.y+.5,n.w-1,n.h-1)):(e.moveTo(n.x+.5,n.y+.5),e.lineTo(n.x+n.w+.5,n.y+.5),e.stroke())}},{key:"createPolygon",value:function(e,t){e.beginPath(),e.moveTo(t[0].x+.5,t[0].y+.5);var n,r=t.length;for(n=1;n<r;n++)e.lineTo(t[n].x+.5,t[n].y+.5);e.closePath()}},{key:"drawString",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.measureText(t).width;if(n.w<i&&(n.w=n.ow,n.y+=n.h,n.x=n.ox,t=t.replace(/^\s+/g,""),i=e.measureText(t).width),r){var a=e.fillStyle;e.fillStyle=(0,p.getThemeStyle)(p.BACKGROUNDALPHA),e.fillRect(n.x,n.y-n.h/2,i,n.h),e.fillStyle=a}return e.fillText(t,n.x,n.y),n.x+=i,n.w-=i,!0}},{key:"drawIcons",value:function(e,t,n,r){var i=f.default.ICONBG,a=f.default.ICONS,o=f.default.getIconStyle,s=void 0,u=void 0,l=5;for(var c in a)h.__hasProp.call(a,c)&&(r.x+=l,u=t.getIcon(c),s=o(c,u.hover),e.drawImage(i,s.x,s.y,s.width,s.height,r.x,r.y-8,s.width,s.height),t.setIcon(c,{x:r.x,y:r.y,w:s.width,h:s.height,idx:n}),r.x+=s.width)}}]),t}(l.default);d.isChrome=null!=navigator.userAgent.toLowerCase().match(/chrome/),t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=r(c),h=n(355),p=r(h),d=n(359),y=(r(d),n(366)),g=n(300),_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=p.default.getInstance(),n=this.getAreaName(),r=t.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),a=t.getRange(i);if(0!=a.getRange()){var o=t.getDataSource(this.getDataSourceName());if(!(o.getDataCount()<1)){e.font=(0,y.getThemeStyle)(y.DEFAULTFONT),e.textAlign="left",e.textBaseline="middle",e.fillStyle=(0,y.getThemeStyle)(y.RANGEMARK),e.strokeStyle=(0,y.getThemeStyle)(y.RANGEMARK);var s=o.getDataAt(o.getDataCount()-1)[g.PERIOD_VOLUME],u=a.toY(s);if(!(s<=a.getMinValue()||s>=a.getMaxValue())){var l=r.getLeft()+1;f.default.drawLine(e,l,u,l+7,u),f.default.drawLine(e,l,u,l+3,u+2),f.default.drawLine(e,l,u,l+3,u-2),e.fillText(String.fromFloat(s,2),l+10,u)}}}}}]),t}(l.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(359),p=r(h),d=n(397),y=r(d),g=n(366),_=n(300),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getDataSource(this.getDataSourceName());if(n instanceof p.default&&!(n.getDataCount()<1)){var r=t.getArea(this.getAreaName()),i=t.getTimeline(this.getDataSourceName()),a=t.getRange(this.getAreaName());if(0!=a.getRange()){var o,s=i.getFirstIndex(),u=i.getLastIndex();o=r.isChanged()||i.isUpdated()||a.isUpdated()?s:Math.max(s,u-2);for(var l=i.getColumnWidth(),c=(i.getItemWidth()>>1)+1,h=i.toItemLeft(o)-1,d=i.toItemCenter(o),v=d+1,m=[],b=[],E=[],O=o;O<u;O++){var T=n.getDataAt(O),w=a.toY(T[_.PERIOD_HIGH]),P=a.toY(T[_.PERIOD_LOW]),x=Math.max(P-w,1);if(T[_.PERIOD_CLOSE]>T[_.PERIOD_OPEN]){var I=a.toY(T[_.PERIOD_CLOSE]),S=a.toY(T[_.PERIOD_OPEN]);m.push({x:d,y:w,w:1,h:x}),m.push({x:h,y:I,w:c,h:1}),m.push({x:d,y:S,w:c,h:1})}else if(T[_.PERIOD_CLOSE]==T[_.PERIOD_OPEN]){var C=a.toY(T[_.PERIOD_CLOSE]);b.push({x:d,y:w,w:1,h:x}),b.push({x:h,y:C,w:c,h:1}),b.push({x:d,y:C,w:c,h:1})}else{var I=a.toY(T[_.PERIOD_OPEN]),S=a.toY(T[_.PERIOD_CLOSE]);E.push({x:d,y:w,w:1,h:x}),E.push({x:h,y:I,w:c,h:1}),E.push({x:d,y:S,w:c,h:1})}h+=l,d+=l,v+=l}m.length>0&&(e.fillStyle=(0,g.getThemeStyle)(g.POSITIVE),y.default.createRectangles(e,m),e.fill()),b.length>0&&(e.fillStyle=(0,g.getThemeStyle)(g.NEGATIVE),y.default.createRectangles(e,b),e.fill()),E.length>0&&(e.fillStyle=(0,g.getThemeStyle)(g.NEGATIVE),y.default.createRectangles(e,E),e.fill())}}}}]),t}(l.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=r(c),h=n(355),p=r(h),d=n(359),y=(r(d),n(366)),g=n(300),_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=p.default.getInstance(),n=t.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=t.getArea(this.getAreaName()),i=t.getTimeline(this.getDataSourceName()),a=t.getRange(this.getAreaName());if(0!=a.getRange()){var o,s=(0,y.getCurrentTheme)()!==y.THEME_LIGHT,u=i.getFirstIndex(),l=i.getLastIndex();o=r.isChanged()||i.isUpdated()||a.isUpdated()?u:Math.max(u,l-2);for(var c=i.getColumnWidth(),h=i.getItemWidth(),d=i.toItemLeft(o),_=i.toItemCenter(o),v=[],m=[],b=[],E=[],O=[],T=[],w=o;w<l;w++){var P=n.getDataAt(w),x=a.toY(P[g.PERIOD_HIGH]),I=a.toY(P[g.PERIOD_LOW]),S=P[g.PERIOD_OPEN],C=P[g.PERIOD_CLOSE];if(C>S){var A=a.toY(C),R=a.toY(S),k=Math.max(R-A,1);k>1&&h>1&&s?v.push({x:d,y:A,w:h,h:k}):m.push({x:d,y:A,w:Math.max(h,1),h:Math.max(k,1)}),O.push({x:_+.5,sy:x,ey:I})}else if(C==S){var A=a.toY(C);b.push({x:d,y:A,w:Math.max(h,1),h:1}),P[g.PERIOD_HIGH]>C&&(x=Math.min(x,A-1)),S>P[g.PERIOD_LOW]&&(I=Math.max(I,A+1)),x<I&&b.push({x:_,y:x,w:1,h:I-x})}else{var A=a.toY(S),R=a.toY(C),k=Math.max(R-A,1);E.push({x:d,y:A,w:Math.max(h,1),h:Math.max(k,1)}),P[g.PERIOD_HIGH]>S&&(x=Math.min(x,A-1)),C>P[g.PERIOD_LOW]&&(I=Math.max(I,R+1)),x<I&&T.push({x:_+.5,sy:x,ey:I})}d+=c,_+=c}O.length&&(e.strokeStyle=(0,y.getThemeStyle)(y.POSITIVE),f.default.createVerticalLines(e,O)),T.length&&(e.strokeStyle=(0,y.getThemeStyle)(y.NEGATIVE),f.default.createVerticalLines(e,T)),m.length>0&&(e.fillStyle=(0,y.getThemeStyle)(y.POSITIVE),f.default.createRectangles(e,m),e.fill()),v.length>0&&(e.strokeStyle=(0,y.getThemeStyle)(y.POSITIVE),e.fillStyle=(0,y.getThemeStyle)(y.BACKGROUND),f.default.fillAndStrokeRects(e,v)),E.length>0&&(e.fillStyle=(0,y.getThemeStyle)(y.NEGATIVE),f.default.createRectangles(e,E),e.fill()),b.length>0&&(e.fillStyle=(0,y.getThemeStyle)(y.NEGATIVE),f.default.createRectangles(e,b),e.fill())}}}}]),t}(l.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=r(c),h=n(355),p=r(h),d=n(359),y=r(d),g=n(366),_=n(300),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=p.default.getInstance(),n=t.getDataSource(this.getDataSourceName());if(n instanceof y.default&&!(n.getDataCount()<1)){var r=t.getArea(this.getAreaName()),i=t.getTimeline(this.getDataSourceName()),a=t.getRange(this.getAreaName());if(0!=a.getRange()){var o,s=(0,g.getCurrentTheme)()!==g.THEME_LIGHT,u=i.getFirstIndex(),l=i.getLastIndex();o=r.isChanged()||i.isUpdated()||a.isUpdated()?u:Math.max(u,l-2);for(var c=i.getColumnWidth(),h=i.getItemWidth(),d=i.toItemLeft(o),v=i.toItemCenter(o),m=[],b=[],E=[],O=[],T=[],w=[],P=o;P<l;P++){var x=n.getDataAt(P),I=a.toY(x[_.PERIOD_HIGH]),S=a.toY(x[_.PERIOD_LOW]),C=x[_.PERIOD_OPEN];P>0&&(C=n.getDataAt(P-1)[_.PERIOD_CLOSE]);var A=x[_.PERIOD_CLOSE];if(A>C){var R=a.toY(A),k=a.toY(C),M=Math.max(k-R,1);M>1&&h>1&&s?m.push({x:d,y:R,w:h,h:M}):b.push({x:d,y:R,w:Math.max(h,1),h:Math.max(M,1)}),T.push({x:v+.5,sy:I,ey:S})}else if(A==C){var R=a.toY(A);E.push({x:d,y:R,w:Math.max(h,1),h:1}),x[_.PERIOD_HIGH]>A&&(I=Math.min(I,R-1)),C>x[_.PERIOD_LOW]&&(S=Math.max(S,R+1)),I<S&&E.push({x:v,y:I,w:1,h:S-I})}else{var R=a.toY(C),k=a.toY(A),M=Math.max(k-R,1);O.push({x:d,y:R,w:Math.max(h,1),h:Math.max(M,1)}),x[_.PERIOD_HIGH]>C&&(I=Math.min(I,R-1)),A>x[_.PERIOD_LOW]&&(S=Math.max(S,k+1)),I<S&&w.push({x:v+.5,sy:I,ey:S})}d+=c,v+=c}T.length&&(e.strokeStyle=(0,g.getThemeStyle)(g.POSITIVE),f.default.createVerticalLines(e,T)),w.length&&(e.strokeStyle=(0,g.getThemeStyle)(g.NEGATIVE),f.default.createVerticalLines(e,w)),m.length>0&&(e.strokeStyle=(0,g.getThemeStyle)(g.POSITIVE),e.fillStyle=(0,g.getThemeStyle)(g.BACKGROUND),f.default.fillAndStrokeRects(e,m)),b.length>0&&(e.fillStyle=(0,g.getThemeStyle)(g.POSITIVE),f.default.createRectangles(e,b),e.fill()),E.length>0&&(e.fillStyle=(0,g.getThemeStyle)(g.NEGATIVE),f.default.createRectangles(e,E),e.fill()),O.length>0&&(e.fillStyle=(0,g.getThemeStyle)(g.NEGATIVE),f.default.createRectangles(e,O),e.fill())}}}}]),t}(l.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(397),p=r(h),d=n(366),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getDataScale(),r=t.getDataSource(this.getDataSourceName());if(!(r.getDataCount()<1)){var i=t.getTimeline(this.getDataSourceName());if(!(i.getInnerWidth()<i.getColumnWidth())){var a=t.getRange(this.getAreaName());if(0!=a.getRange()){var o=t.getDataProvider(this.getAreaName()+".main"),s=i.getFirstIndex(),u=s+i.getLastIndex()>>1;e.font=(0,d.getThemeStyle)(d.DEFAULTFONT),e.textBaseline="middle",e.fillStyle=(0,d.getThemeStyle)(d.TEXTS,4),e.strokeStyle=(0,d.getThemeStyle)(d.TEXTS,4);var l=n.enlarge.toString().length+1;this.drawMark(e,o.getMinValue(),l,a.toY(o.getMinValue()),s,u,o.getMinValueIndex(),i),this.drawMark(e,o.getMaxValue(),l,a.toY(o.getMaxValue()),s,u,o.getMaxValueIndex(),i)}}}}},{key:"drawMark",value:function(e,t,n,r,i,a,o,s){var u,l,c,f;o>a?(e.textAlign="right",u=s.toItemCenter(o)-4,l=u-7,c=u-3,f=l-4):(e.textAlign="left",u=s.toItemCenter(o)+4,l=u+7,c=u+3,f=l+4),p.default.drawLine(e,u,r,l,r),p.default.drawLine(e,u,r,c,r+2),p.default.drawLine(e,u,r,c,r-2),e.fillText(String.fromFloat(t,n),f,r)}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=n(404),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._areas=[],n._highlightedArea=null,n._selectedArea=null,n}return a(t,e),o(t,[{key:"contains",value:function(e,n){var r,i,a,o=this._areas.length;for(a=0;a<o;a++)if(i=this._areas[a],r=i.contains(e,n),null!=r)return r.push(this),r;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"contains",this).call(this,e,n)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(e){return e<0||e>=this._areas.length?null:this._areas[e]}},{key:"addArea",value:function(e){this._areas.push(e)}},{key:"removeArea",value:function(e){var t,n=this._areas.length;for(t=0;t<n;t++)if(e==this._areas[t]){this._areas.splice(t),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(e){this._gridColor=e}},{key:"getHighlightedArea",value:function(){return null!=this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(e){this._highlightedArea=null;var t,n,r=this._areas.length;for(n=0;n<r;n++)if(t=this._areas[n].highlight(e),null!=t)return this._highlightedArea=t,this;return null}},{key:"getSelectedArea",value:function(){return null!=this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(e){this._selectedArea=null;var t,n,r=this._areas.length;for(n=0;n<r;n++)if(t=this._areas[n].select(e),null!=t)return this._selectedArea=t,this;return null}},{key:"onMouseLeave",value:function(e,t){var n,r=this._areas.length;for(n=0;n<r;n++)this._areas[n].onMouseLeave(e,t)}},{key:"onMouseUp",value:function(e,t){var n,r,i=this._areas.length;for(r=0;r<i;r++)if(n=this._areas[r].onMouseUp(e,t),null!=n)return n;return null}}]),t}(u.ChartArea);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineArea=t.IndicatorRangeArea=t.MainRangeArea=t.IndicatorArea=t.MainArea=t.ChartArea=t.DOCK_STYLE_FILL=t.DOCK_STYLE_BOTTOM=t.DOCK_STYLE_RIGHT=t.DOCK_STYLE_TOP=t.DOCK_STYLE_LEFT=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),
!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(300),c=n(358),f=r(c),h=n(405),p=r(h),d=n(355),y=r(d),g=(0,l.NOLY_IDS)(5),_=u(g,5),v=_[0],m=_[1],b=_[2],E=_[3],O=_[4];t.DOCK_STYLE_LEFT=v,t.DOCK_STYLE_TOP=m,t.DOCK_STYLE_RIGHT=b,t.DOCK_STYLE_BOTTOM=E,t.DOCK_STYLE_FILL=O;var T=t.ChartArea=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._left=0,n._top=0,n._right=0,n._bottom=0,n._changed=!1,n._highlighted=!1,n._pressed=!1,n._selected=!1,n._dockStyle=null,n.Measuring=new p.default,n}return o(t,e),s(t,[{key:"getDockStyle",value:function(){return this._dockStyle}},{key:"setDockStyle",value:function(e){this._dockStyle=e}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(e){this._top!=e&&(this._top=e,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(e){this._bottom!=e&&(this._bottom=e,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(e,t){return e>=this._left&&e<this._right&&t>=this._top&&t<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"setMeasuredDimension",value:function(e,t){this._measuredWidth=e,this._measuredHeight=t}},{key:"measure",value:function(e,t,n){this._measuredWidth=0,this._measuredHeight=0,this.Measuring.raise(this,{Width:t,Height:n}),0==this._measuredWidth&&0==this._measuredHeight&&this.setMeasuredDimension(t,n)}},{key:"layout",value:function(e,t,n,r,i){e<<=0,this._left!=e&&(this._left=e,this._changed=!0),t<<=0,this._top!=t&&(this._top=t,this._changed=!0),n<<=0,this._right!=n&&(this._right=n,this._changed=!0),r<<=0,this._bottom!=r&&(this._bottom=r,this._changed=!0),i&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(e){this._changed=e}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(e){return this._highlighted=this==e,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(e){this._pressed=e}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(e){return this._selected=this==e,this._selected?this:null}},{key:"onMouseMove",value:function(e,t){return null}},{key:"onMouseLeave",value:function(e,t){}},{key:"onMouseDown",value:function(e,t){return null}},{key:"onMouseUp",value:function(e,t){return null}}]),t}(f.default);t.MainArea=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._dragStarted=!1,n._oldX=0,n._oldY=0,n._passMoveEventToToolManager=!0,n}return o(t,e),s(t,[{key:"onMouseMove",value:function(e,t){var n=y.default.getInstance();if(n._capturingMouseArea==this&&0==this._dragStarted&&(Math.abs(this._oldX-e)>1||Math.abs(this._oldY-t)>1)&&(this._dragStarted=!0),this._dragStarted)return n.hideCursor(),n.onToolMouseDrag(this.getFrameName(),e,t)?this:(n.getTimeline(this.getDataSourceName()).move(e-this._oldX),this);if(this._passMoveEventToToolManager&&n.onToolMouseMove(this.getFrameName(),e,t))return this;switch(n._drawingTool){case l.TOOL_CURSOR:n.showCursor();break;case l.TOOL_CROSSCURSOR:n.showCrossCursor(this,e,t)?n.hideCursor():n.showCursor();break;default:n.hideCursor()}return this}},{key:"onMouseLeave",value:function(e,t){this._dragStarted=!1,this._passMoveEventToToolManager=!0}},{key:"onMouseDown",value:function(e,t){var n=y.default.getInstance();return n.getTimeline(this.getDataSourceName()).startMove(),this._oldX=e,this._oldY=t,this._dragStarted=!1,n.onToolMouseDown(this.getFrameName(),e,t)&&(this._passMoveEventToToolManager=!1),this}},{key:"onMouseUp",value:function(e,t){var n=y.default.getInstance(),r=null;return this._dragStarted&&(this._dragStarted=!1,r=this),n.onToolMouseUp(this.getFrameName(),e,t)&&(r=this),this._passMoveEventToToolManager=!0,r}}]),t}(T),t.IndicatorArea=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._dragStarted=!1,n._oldX=0,n._oldY=0,n}return o(t,e),s(t,[{key:"onMouseMove",value:function(e,t){var n=y.default.getInstance();if(n._capturingMouseArea==this&&0==this._dragStarted&&(this._oldX==e&&this._oldY==t||(this._dragStarted=!0)),this._dragStarted)return n.hideCursor(),n.getTimeline(this.getDataSourceName()).move(e-this._oldX),this;switch(n._drawingTool){case l.TOOL_CROSSCURSOR:n.showCrossCursor(this,e,t)?n.hideCursor():n.showCursor();break;default:n.showCursor()}return this}},{key:"onMouseLeave",value:function(e,t){this._dragStarted=!1}},{key:"onMouseDown",value:function(e,t){var n=y.default.getInstance();return n.getTimeline(this.getDataSourceName()).startMove(),this._oldX=e,this._oldY=t,this._dragStarted=!1,this}},{key:"onMouseUp",value:function(e,t){return this._dragStarted?(this._dragStarted=!1,this):null}}]),t}(T),t.MainRangeArea=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"onMouseMove",value:function(e,t){return y.default.getInstance().showCursor(),this}}]),t}(T),t.IndicatorRangeArea=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"onMouseMove",value:function(e,t){return y.default.getInstance().showCursor(),this}}]),t}(T),t.TimelineArea=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"onMouseMove",value:function(e,t){return y.default.getInstance().showCursor(),this}}]),t}(T)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this._handlers=[]}return r(e,[{key:"addHandler",value:function(e,t){this._indexOf(e,t)<0&&this._handlers.push({context:e,handler:t})}},{key:"removeHandler",value:function(e,t){var n=this._indexOf(e,t);n>0&&this._handlers.splice(n,1)}},{key:"raise",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0;e=this._handlers,n=e.length,r=0;for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];for(;r<n;++r){var s;t=e[r],(s=t.handler).call.apply(s,[t.context].concat(a))}}},{key:"_indexOf",value:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;for(r=this._handlers,a=r.length,o=0,n=!1;o<a&&(i=r[o],!(n=i.context===e&&i.handler===t));++o);return n?o:-1}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(359),s=r(o),u=n(355),l=r(u),c=n(356),f=r(c),h=n(361),p=r(h),d=n(404),y=n(392),g=n(407),_=r(g),v=n(409),m=r(v),b=n(400),E=r(b),O=n(402),T=r(O),w=n(410),P=r(w),x=n(411),I=r(x),S=n(412),C=r(S),A=n(413),R=r(A),k=n(414),M=r(k),D=n(417),N=r(D),L=n(418),j=r(L),F=n(419),B=r(F),H=n(367),V=r(H),U=n(396),G=r(U),W=n(420),K=r(W),Y=n(421),X=r(Y),z=n(422),q=r(z),$=n(423),Q=r($),J=n(424),Z=r(J),ee=n(408),te=r(ee),ne=function(){function e(){i(this,e)}return a(e,null,[{key:"onMeasuring",value:function(e,t){var n=t.Width,r=e.getNameObject().getCompAt(2);"timeline"==r&&e.setMeasuredDimension(n,22)}},{key:"createCandlestickDataSource",value:function(e){return new s.default(e)}},{key:"createLiveOrderDataSource",value:function(e){return new CLiveOrderDataSource(e)}},{key:"createLiveTradeDataSource",value:function(e){return new CLiveTradeDataSource(e)}},{key:"createDataSource",value:function(e,t,n){var r=l.default.getInstance();null==r.getCachedDataSource(t)&&r.setCachedDataSource(t,n(t)),r.setCurrentDataSource(e,t),r.updateData(e,null)}},{key:"createTableComps",value:function(t){e.createMainChartComps(t),e.createTimelineComps(t)}},{key:"createMainChartComps",value:function(e){var t=l.default.getInstance(),n=t.getArea(e+".charts"),r=e+".main",i=r+"Range",a=new d.MainArea(r);t.setArea(r,a),n.addArea(a);var o=new d.MainRangeArea(i);t.setArea(i,o),n.addArea(o);var s=new f.default(r+".main");t.setDataProvider(s.getName(),s),t.setMainIndicator(e,V.default.mainIndicator);var u=new y.MainRange(r);u.setLogScaleY(t.isLogScaleY()),t.setRange(u.getName(),u),u.setPaddingTop(28),u.setPaddingBottom(12);var c=new _.default(r+".background");t.setPlotter(c.getName(),c),c=new m.default(r+".grid"),t.setPlotter(c.getName(),c),c=new E.default(r+".main"),t.setPlotter(c.getName(),c),c=new T.default(r+".decoration"),t.setPlotter(c.getName(),c),c=new P.default(r+".info"),t.setPlotter(c.getName(),c),c=new I.default(r+".selection"),t.setPlotter(c.getName(),c),c=new C.default(r+".tool"),t.setPlotter(c.getName(),c),c=new R.default(r+"Range.background"),t.setPlotter(c.getName(),c),c=new M.default(r+"Range.grid"),t.setPlotter(c.getName(),c),c=new N.default(r+"Range.main"),t.setPlotter(c.getName(),c),c=new j.default(r+"Range.selection"),t.setPlotter(c.getName(),c),c=new B.default(r+"Range.decoration"),t.setPlotter(c.getName(),c)}},{key:"createIndicatorChartComps",value:function(e,t){var n=l.default.getInstance(),r=n.getArea(e+".charts"),i=e+".indic"+r.getNextRowId(),a=i+"Range",o=new d.IndicatorArea(i);n.setArea(i,o),r.addArea(o);var s=r.getAreaCount()>>1,u=V.default.areaHeight;if(u.length>s){var c,f;for(f=0;f<s;f++)c=r.getAreaAt(f<<1),c.setTop(0),c.setBottom(u[f]);o.setTop(0),o.setBottom(u[s])}var h=new d.IndicatorRangeArea(a);n.setArea(a,h),r.addArea(h);var y=new p.default(i+".secondary");if(n.setDataProvider(y.getName(),y),0==n.setIndicator(i,t))return void n.removeIndicator(i);var g=new _.default(i+".background");n.setPlotter(g.getName(),g),g=new m.default(i+".grid"),n.setPlotter(g.getName(),g),g=new G.default(i+".secondary"),n.setPlotter(g.getName(),g),g=new K.default(i+".info"),n.setPlotter(g.getName(),g),g=new I.default(i+".selection"),n.setPlotter(g.getName(),g),g=new R.default(i+"Range.background"),n.setPlotter(g.getName(),g),g=new N.default(i+"Range.main"),n.setPlotter(g.getName(),g),g=new j.default(i+"Range.selection"),n.setPlotter(g.getName(),g)}},{key:"createTimelineComps",value:function(e){var t,n=l.default.getInstance(),r=new X.default(e);n.setTimeline(r.getName(),r),t=new q.default(e+".timeline.background"),n.setPlotter(t.getName(),t),t=new Q.default(e+".timeline.main"),n.setPlotter(t.getName(),t),t=new Z.default(e+".timeline.selection"),n.setPlotter(t.getName(),t)}},{key:"createLiveOrderComps",value:function(e){var t,n=l.default.getInstance();t=new te.default(e+".main.background"),n.setPlotter(t.getName(),t),t=new CLiveOrderPlotter(e+".main.main"),n.setPlotter(t.getName(),t)}},{key:"createLiveTradeComps",value:function(e){var t,n=l.default.getInstance();t=new te.default(e+".main.background"),n.setPlotter(t.getName(),t),t=new CLiveTradePlotter(e+".main.main"),n.setPlotter(t.getName(),t)}}]),e}();ne.displayVolume=!0,t.default=ne},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(408),l=r(u),c=n(355),f=r(c),h=n(366),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getArea(this.getAreaName()),r=t.getTimeline(this.getDataSourceName()),i=t.getRange(this.getAreaName()),a=n.getRect();if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var o=r.getFirstIndex(),s=r.getLastIndex()-2,u=Math.max(o,s);a.X=r.toColumnLeft(u),a.Width=n.getRight()-a.X}e.fillStyle=(0,h.getThemeStyle)(this._color),e.fillRect(a.X,a.Y,a.Width,a.Height)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(366),f=n(355),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._color=c.BACKGROUND,n}return o(t,e),s(t,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(e){this._color=e}},{key:"Draw",value:function(e){var t=h.default.getInstance(),n=t.getArea(this.getAreaName());e.fillStyle=(0,c.getThemeStyle)(this._color),e.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=r(c),h=n(355),p=r(h),d=n(366),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=p.default.getInstance(),n=t.getArea(this.getAreaName()),r=t.getTimeline(this.getDataSourceName()),i=t.getRange(this.getAreaName()),a=n.getLeft(),o=n.getRight(),s=n.getTop(),u=n.getHeight(),l=!1;if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var c=r.getFirstIndex(),h=r.getLastIndex(),y=Math.max(c,h-2),g=r.toColumnLeft(y);e.save(),e.rect(g,s,o-g,u),e.clip(),l=!0}e.fillStyle=(0,d.getThemeStyle)(d.GRIDS,0),e.beginPath();var _=12,v=3;f.default.isChrome&&(_=4,v=1);var m=i.getGradations();for(var b in m)f.default.createHorzDashedLine(e,a,o,i.toY(m[b]),_,v);e.fill(),l&&e.restore()}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e<10?"0"+e.toString():e.toString()}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(358),c=r(l),f=n(355),h=r(f),p=n(397),d=r(p),y=n(300),g=n(366),_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"Draw",value:function(e){var t=h.default.getInstance(),n=t.getDataScale(),r=t.getArea(this.getAreaName()),i=t.getTimeline(this.getDataSourceName()),a=t.getDataSource(this.getDataSourceName());e.font=(0,g.getThemeStyle)(g.DEFAULTFONT),e.textAlign="left",e.textBaseline="middle",e.fillStyle=(0,g.getThemeStyle)(g.TEXTS,4);var o={x:r.getLeft()+4,ox:r.getLeft()+4,y:r.getTop()+10,w:r.getWidth()-8,ow:r.getWidth()-8,h:20},u=i.getSelectedIndex();if(!(u<0)){var l=a.getDataAt(u);if(l){var c=n.enlarge.toString().length+1,f=new Date(l[y.PERIOD_DATE]),p=f.getFullYear(),_=s(f.getMonth()+1),v=s(f.getDate()),m=s(f.getHours()),b=s(f.getMinutes()),E=t.getLanguage();if("zh-cn"==E){if(!d.default.drawString(e,"时间: "+p+"-"+_+"-"+v+"  "+m+":"+b,o,!0))return;if(!d.default.drawString(e,"  开: "+l[y.PERIOD_OPEN].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  高: "+l[y.PERIOD_HIGH].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  低: "+l[y.PERIOD_LOW].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  收: "+l[y.PERIOD_CLOSE].toFixed(c),o,!0))return}else if("en-us"==E){if(!d.default.drawString(e,"DATE: "+p+"-"+_+"-"+v+"  "+m+":"+b,o,!0))return;if(!d.default.drawString(e,"  O: "+l[y.PERIOD_OPEN].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  H: "+l[y.PERIOD_HIGH].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  L: "+l[y.PERIOD_LOW].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  C: "+l[y.PERIOD_CLOSE].toFixed(c),o,!0))return}else if("zh-tw"==E){if(!d.default.drawString(e,"時間: "+p+"-"+_+"-"+v+"  "+m+":"+b,o,!0))return;if(!d.default.drawString(e,"  開: "+l[y.PERIOD_OPEN].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  高: "+l[y.PERIOD_HIGH].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  低: "+l[y.PERIOD_LOW].toFixed(c),o,!0))return;if(!d.default.drawString(e,"  收: "+l[y.PERIOD_CLOSE].toFixed(c),o,!0))return}if(u>0){if("zh-cn"==E){if(!d.default.drawString(e,"  涨幅: ",o,!0))return}else if("en-us"==E){if(!d.default.drawString(e,"  CHANGE: ",o,!0))return}else if("zh-tw"==E&&!d.default.drawString(e,"  漲幅: ",o,!0))return;var O=a.getDataAt(u-1),T=(l[y.PERIOD_CLOSE]-O[y.PERIOD_CLOSE])/O[y.PERIOD_CLOSE]*100;if(T>=0?(T=" "+T.toFixed(2),e.fillStyle=(0,g.getThemeStyle)(g.TEXTPOSITIVE)):(T=T.toFixed(2),e.fillStyle=(0,g.getThemeStyle)(g.TEXTNEGATIVE)),!d.default.drawString(e,T,o,!0))return;if(e.fillStyle=(0,g.getThemeStyle)(g.TEXTS,4),!d.default.drawString(e," %",o,!0))return}var w=(l[y.PERIOD_HIGH]-l[y.PERIOD_LOW])/l[y.PERIOD_LOW]*100;if("zh-cn"==E){if(!d.default.drawString(e,"  振幅: "+w.toFixed(2)+" %",o,!0))return;if(!d.default.drawString(e,"  量: "+l[y.PERIOD_VOLUME].toFixed(2),o,!0))return}else if("en-us"==E){if(!d.default.drawString(e,"  AMPLITUDE: "+w.toFixed(2)+" %",o,!0))return;if(!d.default.drawString(e,"  V: "+l[y.PERIOD_VOLUME].toFixed(2),o,!0))return}else if("zh-tw"==E){if(!d.default.drawString(e,"  振幅: "+w.toFixed(2)+" %",o,!0))return;if(!d.default.drawString(e,"  量: "+l[y.PERIOD_VOLUME].toFixed(2),o,!0))return}var P=t.getDataProvider(this.getAreaName()+".secondary");if(void 0!=P){var x=P.getIndicator();if(x.isAuthorized()){var I,S=x.getOutputCount();for(I=0;I<S;I++){var C=x.getOutputAt(I),A=C.execute(u);if(!isNaN(A)){var R="  "+C.getName()+": "+A.toFixed(c),k=C.getColor();if(void 0===k&&(k=I),e.fillStyle=(0,g.getThemeStyle)(g.INDICATORS,k),!d.default.drawString(e,R,o,!0))return}}}}}}}}]),t}(c.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(397),p=r(h),d=n(366),y=n(300),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance();if(t._drawingTool===y.TOOL_CROSSCURSOR){var n=t.getArea(this.getAreaName()),r=t.getTimeline(this.getDataSourceName());if(!(r.getSelectedIndex()<0)){var i=t.getArea(this.getDataSourceName()+".mainRange");if(!(r.toItemLeft(r.getSelectedIndex())+r.getColumnWidth()>=i.getLeft())){var a=t.getRange(this.getAreaName()),o=a.getSelectedPosition();e.strokeStyle=(0,d.getThemeStyle)(d.CURSOR);var s=r.toItemCenter(r.getSelectedIndex());p.default.drawLine(e,s,n.getTop()-1,s,n.getBottom()),o>=0&&p.default.drawLine(e,n.getLeft(),o,n.getRight(),o)}}}}}]),t}(l.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=(r(c),n(355)),h=r(f),p=n(359),d=r(p),y=(n(366),n(300)),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.flag=!0,n.context=h.default.getInstance()._overlayContext,n}return o(t,e),s(t,[{key:"getAreaPos",value:function(){var e=h.default.getInstance(),t=e.getArea("frame0.k0.main");return null==t?void(this.areaPos={left:0,top:0,right:0,bottom:0}):void(this.areaPos={left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())})}},{key:"Draw",value:function(){this.getAreaPos();var e=h.default.getInstance(),t=e.getDataSource(this.getDataSourceName());if(null!=t&&t instanceof d.default){this.context.save(),this.context.rect(this.areaPos.left,this.areaPos.top,this.areaPos.right-this.areaPos.left,this.areaPos.bottom-this.areaPos.top),this.context.clip();for(var n=t.getToolObjectCount(),r=0;r<n;r++){var i=t.getToolObject(r),a=i.getState();switch(a){case y.STATE_BEFORE:i.getPlotter().drawCursor(this.context);break;case y.STATE_DRAWING:i.getPlotter().updateDraw(this.context);break;case y.STATE_AFTER:i.getPlotter().finishDraw(this.context)}}var o=t.getSelectToolObjcet();null!=o&&o!=y.STATE_DRAWING&&o.getPlotter().highlight(this.context),this.context.restore()}}}]),t}(l.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(408),l=r(u),c=n(355),f=r(c),h=n(366),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=this.getAreaName(),r=t.getArea(n),i=t.getRange(n.substring(0,n.lastIndexOf("Range"))),a="main"==i.getNameObject().getCompAt(2);if(a);else if(!r.isChanged()&&!i.isUpdated())return;e.fillStyle=(0,h.getThemeStyle)(this._color),e.fillRect(r.getLeft(),r.getTop(),r.getWidth(),r.getHeight())}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){var r;return r=[],r[S]=(0,P.clone)(e),r[C]=(0,P.clone)(t),r[A]=n,r}function u(e,t){var n,r;return n=e[S],r=e[C],(t-r.x)/r.w*n.w+n.x}function l(e,t){var n,r,i,a,o,s;return n=e[S],r=e[C],e[A]?(o=r.y,s=r.y-r.h,a=0,i=Math.log(o/s),t=Math.log(t/s),n.h+n.y-(t-a)/i*n.h):(r.y-t)/r.h*n.h+n.y}function c(e,t){return Math.round(u(e,t))}function f(e,t){return Math.round(l(e,t))}function h(e,t,n){return[c(e,t),f(e,n)]}function p(e,t,n){return d(e,t),n(),e.restore()}function d(e,t){return e.save(),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.lineTo(t.x,t.y+t.h),e.clip()}Object.defineProperty(t,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=n(358),m=r(v),b=n(355),E=r(b),O=n(397),T=(r(O),n(366)),w=n(415),P=n(300),x=(0,P.NOLY_IDS)(3),I=_(x,3),S=I[0],C=I[1],A=I[2],R=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),g(t,[{key:"Draw",value:function(e){var t=this;if(this.shouldUpdate()){this.context=e;var n=E.default.getInstance(),r=n.getDepth();if("object"===("undefined"==typeof r?"undefined":y(r))&&null!==r){var i,a,o,u,l,c,f,h;for(c=20,i=r.data[w.ASK_GROUPED].slice(0,c-1),a=0,f=0,h=i.length;f<h;f++)o=i[f],a+=o[1];for(i.length&&(this.maxAsk=a),l=r.data[w.BID_GROUPED].slice(-c,-1).reverse(),a=0,f=0,h=l.length;f<h;f++)u=l[f],a+=u[1];l.length&&(this.maxBid=a),this.$depth=r;var d=this.m_pArea.getTop(),g=this.m_pArea.getBottom()-d,_=this.m_pArea.getLeft(),v=this.m_pArea.getRight()-_,m={x:_,y:d,w:v,h:g},b=0,O=this.m_pRange.getOuterMaxValue(),T=O-this.m_pRange.getOuterMinValue(),P=Math.floor(Math.min(this.maxAsk,this.maxBid)),x={x:b,y:O,h:T,w:P};this.view=s(m,x,this.m_pRange._log_scale_y),p(e,this.view[S],function(){t._draw()})}}}},{key:"_draw",value:function(){var e,t,n,r,i,a,o,s,u,l,c,f,p,d,y,g,_,v,m,b,E,O,P,x;for(e=this.context,r=this.$depth.data,i=this.view,x=i[C].w,e.save(),e.lineWidth=2,g=[[w.ASK,0,500,(0,T.getThemeStyle)(T.POSITIVE)],[w.BID,-1,-500,(0,T.getThemeStyle)(T.NEGATIVE)]],m=0,y=g.length;m<y;m++)for(_=g[m],p=_[0],c=_[1],o=_[2],n=_[3],a=[],f=0,u=0,e.beginPath(),e.fillStyle=n,e.strokeStyle=n,s=i[S].x,E=b=c;(c<=o?b<=o:b>=o)&&(t=r[p].at(E))&&(d=t[1],l=t[0],f+=d,v=h(i,f,l),O=v[0],P=v[1],E===c&&e.moveTo(i[S].x,P),e.fillRect(s,P-1,O-s+1,2),s=O,!(f>x));E=c<=o?++b:--b);return e.restore()}},{key:"shouldUpdate",value:function(){if(this.m_pMgr=E.default.getInstance(),this.m_pMgr.step>3600)return!1;var e=this.getAreaName();if(this.m_pArea=this.m_pMgr.getArea(e),null==this.m_pArea)return!1;var t=e.substring(0,e.lastIndexOf("Range"));return this.m_pRange=this.m_pMgr.getRange(t),!(null==this.m_pRange||0==this.m_pRange.getRange())}}]),t}(m.default);t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e[0]-t[0]}function a(e){var t;return t={group:e},o(t),t}function o(e){return e[b]=new _.default({compare:i}),e[O]=new _.default({compare:i}),e[E]=new _.default({compare:i}),e[T]=new _.default({compare:i}),e}function s(e,t,n){switch(t){case O:return Math.floor(n[w]/e.group+1e-12)*e.group;
case b:return Math.ceil(n[w]/e.group-1e-12)*e.group}}function u(e,t,n){var r,i;if(e[t].insert(n),n[P])return n=[s(e,t,n),n[P]],i=t===O?T:E,(r=e[i].find(n))?r[P]+=n[P]:(r=n,e[i].insert(r))}function l(e,t,n){var r,i;if(n&&(e[t].delete(n),n[P]))return n=[s(e,t,n),n[P]],i=t===O?T:E,r=e[i].find(n),r[P]-=n[P],r[P]<1e-12?e[i].delete(r):void 0}function c(e,t){var n,r,i,a,o,s,c,f;if(s=t[0],n=t[1],f=t[2],c="bid"===f?O:b,o=e[c],i=[s,n],a=o.find([s]),l(e,c,a),n&&u(e,c,i),c===O)for(;(r=e[b].get(0))&&r[w]<=s;)l(e,b,r);else for(;(r=e[O].get(-1))&&r[w]>=s;)l(e,O,r);return e}function f(e,t){var n,r,i;for(n=0;(i=e[b].get(0))&&i[w]<t;)++n,l(e,b,i);for(r=0;(i=e[O].get(-1))&&i[w]>t;)++r,l(e,O,i);return[n,r]}function h(e,t,n,r){var i,a,o,s,u,c;for(i=0,a=0,u=0,c=0,o=0;(s=e[b].at(o))&&s[w]<=n;)s[x]>=r?(++o,++u):(++i,l(e,b,s));for(o=-1;(s=e[O].at(o))&&s[w]>=t;)s[x]>=r?(--o,++c):(++a,l(e,O,s));return[i,a,u,c]}function p(e){var t,n,r,i;return t=e[b],r=e[O],n=t.slice(-11,-1),i=r.slice(0,10)}Object.defineProperty(t,"__esModule",{value:!0}),t.depth_clear=t.depth_clean_ex=t.depth_clean=t.depth_delete=t.depth_insert=t.depth_dump=t.depth_update=t.depth_init=t.BID_GROUPED=t.BID=t.ASK_GROUPED=t.ASK=void 0;var d=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=n(300),g=n(416),_=r(g),v=(0,y.NOLY_IDS)(4),m=d(v,4),b=m[0],E=m[1],O=m[2],T=m[3];t.ASK=b,t.ASK_GROUPED=E,t.BID=O,t.BID_GROUPED=T;var w=0,P=1,x=2;t.depth_init=a,t.depth_update=c,t.depth_dump=p,t.depth_insert=u,t.depth_delete=l,t.depth_clean=f,t.depth_clean_ex=h,t.depth_clear=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=8,a=i<<1,o=0,s=1,u=0,l=function(){function e(t){n(this,e),this.options=null!=t?t:{},this.id=++u,this.min=0,this.max=0,this.count=0,this.type=s,this.total=0,this.parent=null,this.children=[],this.next=null,this.prev=null,this.compare=this.options.compare,this.multimap=this.options.multimap,null==this.compare&&(this.compare=function(e,t){return e-t})}return r(e,[{key:"insert_value_",value:function(e){var t,n,r,i,a,o,s;for(n=this.count,t=this.children,r=s=0;0<=n?s<n:s>n;r=0<=n?++s:--s){if(o=t[r],a=this.compare(o,e),0===a){if(this.multimap)break;return}if(a>0)break}if(0===r)for(this.min=e,i=this;(i=i.parent)&&this.compare(i.min,e)>0;)i.min=e;if(r===n)for(this.max=e,i=this;(i=i.parent)&&this.compare(i.max,e)<0;)i.max=e;for(this.children.splice(r,0,e),this.count+=1,i=this;i;)i.total+=1,i=i.parent;return this.rebuild_(),this}},{key:"insert_node_",value:function(e,t){var n,r,i;for(n=this.count,r=i=0;(0<=n?i<n:i>n)&&this.children[r].min!==e;r=0<=n?++i:--i);return t.parent=this,this.count+=1,this.children.splice(r+1,0,t),this.rebuild_()}},{key:"find_node_",value:function(e){var t,n,r,i,a;for(i=this;i.type===o;){if(t=i.children,n=i.count,this.compare(e,t[0].min)<=0)r=0;else if(this.compare(e,t[n-1].max)>=0)r=n-1;else for(r=a=0;(0<=n?a<n:a>n)&&!(this.compare(t[r].max,e)>=0);r=0<=n?++a:--a);i=t[r]}return i}},{key:"has",value:function(e){var t;return t=this.find_node_(e),t.children.indexOf(e)!==-1}},{key:"replace_value",value:function(e){var t,n,r,i,a,o;for(r=this.find_node_(e),t=r.children,n=a=0,o=t.length;a<o;n=++a)i=t[n],0===this.compare(i,e)&&(t[n]=e);return this}},{key:"get_node_",value:function(e){var t,n,r,i,a;if(r=this,e>=this.total)return[null,null];if(e<0)return[null,null];for(;r.type===o;)for(n=r.children,i=0,a=n.length;i<a;i++){if(t=n[i],!(e>=t.total)){r=t;break}e-=t.total}return[r,e]}},{key:"set_min_",value:function(e){var t,n;for(n=this,t=this.min;n&&0===this.compare(n.min,t);)n.min=e,n=n.parent;return this}},{key:"set_max_",value:function(e){var t,n;for(n=this,t=this.max;n&&0===this.compare(n.max,t);)n.max=e,n=n.parent;return this}},{key:"inc_total_",value:function(){var e;for(e=this;e;)e.total+=1,e=e.parent;return this}},{key:"dec_total_",value:function(){var e;for(e=this;e;)e.total-=1,e=e.parent;return this}},{key:"clean_node_",value:function(){var e,t;return this.parent?(this.parent.delete_node_(this),this.type===s?(null!=(e=this.prev)&&(e.next=this.next),null!=(t=this.next)?t.prev=this.prev:void 0):void 0):this.type=s}},{key:"delete_node_",value:function(e){var t;return t=this.children.indexOf(e),this.children.splice(t,1),this.count-=1,0===this.count?this.clean_node_():(0===t&&this.set_min_(this.children[0].min),t===this.count?this.set_max_(this.children[this.count-1].max):void 0)}},{key:"delete_value_",value:function(e){var t,n;return t=this.children,n=this.indexOf_(e),n!==-1&&(t.splice(n,1),this.count-=1,this.dec_total_(),0===this.count?this.clean_node_():(0===n&&this.set_min_(t[0]),n===this.count&&this.set_max_(t[this.count-1]))),this}},{key:"rebuild_",value:function(){var e,t,n;if(!(this.count<a))return null!=this.parent?(t=this.slice_(i,a-1),t.parent=this.parent,this.count=i,this.total=this.total-t.total,this.children.splice(i,i),this.type===s?this.max=this.children[i-1]:this.max=this.children[i-1].max,this.parent.insert_node_(this.min,t),this.type===s&&(this.next&&(this.next.prev=t),t.next=this.next,this.next=t)):(e=this.slice_(0,i-1),n=this.slice_(i,a-1),e.parent=this,n.parent=this,e.next=n,n.prev=e,this.count=2,this.children=[e,n],this.type=o),this}},{key:"slice_",value:function(t,n){var r,i,a,o,u,l,c,f;if(a=n-t+1,o=new e(this.options),o.count=a,o.type=this.type,i=this.children,this.type===s)o.min=i[t],o.max=i[n],o.children=i.slice(t,+n+1||9e9),o.total=a;else{for(o.min=i[t].min,o.max=i[n].max,o.children=i.slice(t,+n+1||9e9),u=0,f=o.children,l=0,c=f.length;l<c;l++)r=f[l],r.parent=o,u+=r.total;o.total=u}return o}},{key:"atom",value:function(){var e;for(e=this;e.type===o;)e=e.children[0];return e}},{key:"indexOf_",value:function(e){var t,n,r,i,a,o;for(o=this.children,t=i=0,a=o.length;i<a;t=++i){if(r=o[t],n=this.compare(r,e),0===n)return t;if(n>0)return-1}return-1}},{key:"insert",value:function(e){var t;return t=this.find_node_(e),t.insert_value_(e),this}},{key:"delete",value:function(e){var t;return t=this.find_node_(e),t.delete_value_(e)}},{key:"replace",value:function(e){return this.delete(e),this.insert(e)}},{key:"get",value:function(e){var t,n,r;return e<0&&(e+=this.size()),r=this.get_node_(e),t=r[0],n=r[1],t?t.children[n]:null}},{key:"at",value:function(e){var t,n,r;return e<0&&(e+=this.size()),r=this.get_node_(e),t=r[0],n=r[1],t?t.children[n]:null}},{key:"find",value:function(e){return this.find_all(e)[0]}},{key:"find_all",value:function(e){var t,n,r,i,a,o,s;if(i=[],t=this.find_node_(e),this.compare(e,t.min)<0)return[];if(this.compare(e,t.max)>0)return[];for(s=t.children,a=0,o=s.length;a<o;a++)if(r=s[a],n=this.compare(r,e),0===n)i.push(r);else if(n>0)break;return i}},{key:"slice",value:function(e,t){var n,r,i,a,o;if(null==t&&(t=this.total-1),e<0&&(e+=this.total),t<0&&(t+=this.total),e<0&&(e=0),t>=this.total&&(t=this.total-1),o=this.get_node_(e),r=o[0],a=o[1],!r)return[];for(i=t-e+1,n=[];i&&r;)a<r.count?(n.push(r.children[a++]),--i):(r=r.next,a=0);return n}},{key:"flatten",value:function(){var e,t,n,r,i,a;for(r=[],i=this.atom();i;){for(t=i.count,e=i.children,n=a=0;0<=t?a<t:a>t;n=0<=t?++a:--a)r.push(e[n]);i=i.next}return r}},{key:"delete_if",value:function(e,t){}},{key:"size",value:function(){return this.total}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(397),p=r(h),d=n(366),y=n(300),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getRequiredWidth",value:function(e,t){return e.font=(0,d.getThemeStyle)(d.DEFAULTFONT),e.measureText((0,y.noExponents)(t)).width+32}},{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getDataScale(),r=this.getAreaName(),i=t.getArea(r),a=r.substring(0,r.lastIndexOf("Range")),o=t.getRange(a);if(o.isIndicatorNavShown()){var s=i.getBottom()-20;e.strokeStyle=(0,d.getThemeStyle)(d.GRIDS,1),p.default.drawLine(e,i.getLeft(),s,i.getRight(),s)}var u=o.getRange();if(0!==u&&u!==1/0){var l="main"==o.getNameObject().getCompAt(2);if(l);else if(!i.isChanged()&&!o.isUpdated())return;var c=o.getGradations();if(0!=c.length){var h=i.getLeft(),y=i.getRight(),g=i.getCenter();e.font=(0,d.getThemeStyle)(d.DEFAULTFONT),e.textAlign="center",e.textBaseline="middle",e.fillStyle=(0,d.getThemeStyle)(d.TEXTS,2);var _=[],v=n.enlarge.toString().length+1;c.forEach(function(t){var n=o.toY(t);_.push({x:h,y:n,w:6,h:1}),_.push({x:y-6,y:n,w:6,h:1}),e.fillText(String.fromFloat(t,Math.abs(t)<.1?v:2),g,n)}),_.length>0&&(e.fillStyle=(0,d.getThemeStyle)(d.GRIDS,1),p.default.createRectangles(e,_),e.fill())}}}}]),t}(l.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(397),p=r(h),d=n(366),y=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getDataScale(),r=this.getAreaName(),i=t.getArea(r),a=t.getTimeline(this.getDataSourceName());if(!(a.getSelectedIndex()<0)){var o=t.getArea(this.getDataSourceName()+".mainRange");if(!(a.toItemLeft(a.getSelectedIndex())+a.getColumnWidth()>=o.getLeft())){var s=i.getLeft(),u=i.getRight(),l=r.substring(0,r.lastIndexOf("Range")),c=t.getRange(l),h=c.getRange(),y=c.getSelectedPosition();if(0==h&&p.default.drawLine(e,s,y,u,y),!(0==h||y<0)){var g=c.getSelectedValue();if(g!=-Number.MAX_VALUE){p.default.createPolygon(e,[{x:s,y:y},{x:s+5,y:y+10},{x:u-3,y:y+10},{x:u-3,y:y-10},{x:s+5,y:y-10}]),e.fillStyle=(0,d.getThemeStyle)(d.BACKGROUND),e.fill(),e.strokeStyle=(0,d.getThemeStyle)(d.GRIDS,4),e.stroke(),e.font=(0,d.getThemeStyle)(d.DEFAULTFONT),e.textAlign="center",e.textBaseline="middle",e.fillStyle=(0,d.getThemeStyle)(d.TEXTS,3);var _=n.enlarge.toString().length+1;e.fillText(String.fromFloat(g,Math.abs(g)<1?_:2),i.getCenter(),y)}}}}}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=r(c),h=n(355),p=r(h),d=n(359),y=(r(d),n(366)),g=n(300),_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=p.default.getInstance(),n=t.getDataScale(),r=n.enlarge.toString().length+1,i=this.getAreaName(),a=t.getArea(i),o=i.substring(0,i.lastIndexOf("Range")),s=t.getRange(o);if(0!=s.getRange()){var u=t.getDataSource(this.getDataSourceName());if(!(u.getDataCount()<1)){var l=u._dataItems[u._dataItems.length-1][g.PERIOD_CLOSE];if(!(l<=s.getMinValue()||l>=s.getMaxValue())){e.font=(0,y.getThemeStyle)(y.DEFAULTFONT),e.textAlign="left",e.textBaseline="middle",e.fillStyle=(0,y.getThemeStyle)(y.RANGEMARK),e.strokeStyle=(0,y.getThemeStyle)(y.RANGEMARK);var c=s.toY(l),h=a.getLeft()+1;f.default.drawLine(e,h,c,h+7,c),f.default.drawLine(e,h,c,h+3,c+2),f.default.drawLine(e,h,c,h+3,c-2),e.fillText(String.fromFloat(l,r),h+10,c)}}}}}]),t}(l.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(397),f=r(c),h=n(355),p=r(h),d=n(359),y=(r(d),n(300)),g=n(366),_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=p.default.getInstance(),n=t.getDataScale(),r=t.getArea(this.getAreaName()),i=t.getTimeline(this.getDataSourceName()),a=t.getDataProvider(this.getAreaName()+".secondary"),o=t.getRange(this.getAreaName()),s=parseInt(this.getAreaName().slice(-1))+1;e.font=(0,g.getThemeStyle)(g.DEFAULTFONT),e.textAlign="left",e.textBaseline="middle",e.fillStyle=(0,g.getThemeStyle)(g.TEXTS,4);var u={x:r.getLeft()+4,ox:r.getLeft()+4,y:r.getTop()+10,w:r.getWidth()-8,ow:r.getWidth()-8,h:20},l=a.getIndicator(),c=l.getTitle();if(f.default.drawString(e,c,u)){if(f.default.drawIcons(e,l,s,u),o.isIndicatorNavShown()){var h=r.getBottom()-20,d=l.getName(),_=t.selectedIndicators;d={"多空指数":y.INDICATOR_LSI,"情绪指数":y.INDICATOR_BTI,"新人指数":y.INDICATOR_NEWBIE}[d]||d,e.clearRect(r.getLeft(),h,r.getWidth(),20),e.strokeStyle=(0,g.getThemeStyle)(g.GRIDS,1),f.default.drawLine(e,r.getLeft(),h,r.getRight(),h);var v,m,b,E,O;for(O={x:r.getLeft()+10,y:h+10,w:r.getWidth()-8,h:20},e.font=(0,g.getThemeStyle)(g.DEFAULTFONT),e.textAlign="left",e.textBaseline="middle",v=0,b=l.indicators,m=b.length;v<m;++v){if(E=b[v],E.width||(E.width=e.measureText(E.name).width+10,E.x=O.x),O.w<E.width)return;d===E.name?e.fillStyle=(0,g.getThemeStyle)(g.PRIMARYTEXT):_.indexOf(E.key)>-1?e.fillStyle=(0,g.getThemeStyle)(g.DISABLEDTEXT):e.fillStyle=(0,g.getThemeStyle)(g.TEXTS,3),e.fillText(E.name,O.x,O.y),O.x+=E.width,O.w-=E.width}}if(l.isAuthorized()){var T=i.getSelectedIndex();if(!(T<0)){var w,P,x,I,S,C=l.getOutputCount(),A=n.enlarge.toString().length+1;for(S=0;S<C;S++)if(w=l.getOutputAt(S),P=w.execute(T),!isNaN(P)&&(x="  "+w.getName()+": "+String.fromFloat(P,Math.abs(P)<1?A:2),I=w.getColor(),void 0===I&&(I=S),["VOLUME","BTI","LSI","Newbie"].indexOf(w.getName())>-1?e.fillStyle=(0,g.getThemeStyle)(g.TEXTS,4):e.fillStyle=(0,g.getThemeStyle)(g.COLORS,I),!f.default.drawString(e,x,u,!0)))return}}}}}]),t}(l.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(367),p=r(h),d=n(360),y=n(300),g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._updated=!1,n._innerLeft=0,n._innerWidth=0,n._firstColumnLeft=0;var r=parseInt(p.default.scale);return(r<0||r>t._ItemWidth.length-1)&&(r=6),n._scale=r,n._lastScale=-1,n._maxItemCount=0,n._maxIndex=0,n._firstIndex=-1,n._selectedIndex=-1,n._savedFirstIndex=-1,n}return o(t,e),s(t,[{key:"isLatestShown",value:function(){return this.getLastIndex()==this._maxIndex}},{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(e){this._updated=e}},{key:"getItemWidth",value:function(){return t._ItemWidth[this._scale]}},{key:"getSpaceWidth",value:function(){return t._SpaceWidth[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._firstColumnLeft}},{key:"getMaxItemCount",value:function(){return this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this._firstIndex+this._maxItemCount,this._maxIndex)}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxIndex",value:function(){return this._maxIndex}},{key:"calcColumnCount",value:function(e){return Math.floor(e/this.getColumnWidth())<<0}},{key:"calcFirstColumnLeft",value:function(e){return this._innerLeft+this._innerWidth-this.getColumnWidth()*e}},{key:"calcFirstIndexAlignRight",value:function(e,t,n){return Math.max(0,e+Math.max(t,1)-Math.max(n,1))}},{key:"calcFirstIndex",value:function(e){return this.validateFirstIndex(this.calcFirstIndexAlignRight(this._firstIndex,this._maxItemCount,e),e)}},{key:"updateMaxItemCount",value:function(){var e,t=this.calcColumnCount(this._innerWidth);if(this._maxItemCount<1)e=this.calcFirstIndex(t);else if(this._lastScale==this._scale)e=this.validateFirstIndex(this._firstIndex-(t-this._maxItemCount));else{var n=this.getLastIndex()-1;e=this.validateFirstIndex(n-Math.round((n-this._firstIndex)*t/this._maxItemCount))}this._lastScale=this._scale,this._firstIndex!=e&&(this._selectedIndex==this._firstIndex&&(this._selectedIndex=e),this._firstIndex=e,this._updated=!0),this._maxItemCount!=t&&(this._maxItemCount=t,this._updated=!0),this._firstColumnLeft=this.calcFirstColumnLeft(t)}},{key:"validateFirstIndex",value:function(e,t){if(this._maxIndex<1)return-1;if(e<0)return 0;var n=Math.max(0,this._maxIndex-1);return e>n?n:e}},{key:"validateSelectedIndex",value:function(){this._selectedIndex<this._firstIndex&&(this._selectedIndex=-1)}},{key:"onLayout",value:function(){var e=f.default.getInstance(),n=e.getArea(this.getDataSourceName()+".main");if(null!=n){this._innerLeft=n.getLeft()+t.PADDING_LEFT;var r=Math.max(0,n.getWidth()-(t.PADDING_LEFT+t.PADDING_RIGHT));this._innerWidth!=r&&(this._innerWidth=r,this.updateMaxItemCount())}}},{key:"toDate",value:function(e){return this.indexToDate(this.toIndex(e))}},{key:"indexToDate",value:function(e){var t=f.default.getInstance(),n=t.getDataSource(this.getDataSourceName()),r=n.getDataAt(this._firstIndex);if(r){if(t.step<2592e3)return new Date(r[y.PERIOD_DATE]+(e-this._firstIndex)*t.step*1e3);var i=new Date(r[y.PERIOD_DATE]),a=i.getMonth()+e-this._firstIndex,o=a>=0?Math.floor(a/12):Math.ceil(a/12);return 0!==o&&(o=i.getFullYear()+o,i.setFullYear(o),a=Math.abs(a%12)),i.setMonth(a),i}return null}},{key:"dateToIndex",value:function(e){if(!e)return null;var t=f.default.getInstance(),n=t.getDataSource(this.getDataSourceName()),r=n.getDataAt(this._firstIndex);if(r){if(t.step<2592e3)return this._firstIndex+Math.floor((e.getTime()-r[y.PERIOD_DATE])/t.step/1e3);var i=new Date(r[y.PERIOD_DATE]),a=e.getFullYear()-i.getFullYear();return this._firstIndex+e.getMonth()-i.getMonth()+12*a}return null}},{key:"indexToDate",value:function(e){if(e=parseInt(e),e!==e||e<0)return null;var t=f.default.getInstance(),n=t.getDataSource(this.getDataSourceName()),r=n.getDataAt(this._firstIndex);if(r){var i=new Date(r[y.PERIOD_DATE]);return t.step<2592e3?i.setSeconds((e-this._firstIndex)*t.step):i.setMonth(i.getMonth()+e-this._firstIndex),i}return null}},{key:"toIndex",value:function(e){return this._firstIndex+this.calcColumnCount(e-this._firstColumnLeft)}},{key:"toColumnLeft",value:function(e){return this._firstColumnLeft+this.getColumnWidth()*(e-this._firstIndex)}},{key:"toItemLeft",value:function(e){return this.toColumnLeft(e)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(e){return this.toColumnLeft(e)+this.getItemCenterOffset()}},{key:"selectAt",value:function(e){return this._selectedIndex=this.toIndex(e),this.validateSelectedIndex(),this._selectedIndex>=0}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"update",value:function(){var e=f.default.getInstance(),t=e.getDataSource(this.getDataSourceName()),n=this._maxIndex;switch(this._maxIndex=t.getDataCount(),t.getUpdateMode()){case d.REFRESH:this._maxIndex<1?this._firstIndex=-1:this._firstIndex=Math.max(this._maxIndex-this._maxItemCount,0),this._selectedIndex=-1,this._updated=!0;break;case d.APPEND:var r=this.getLastIndex(),i=t.getErasedCount();r<n?i>0&&(this._firstIndex=Math.max(this._firstIndex-i,0),this._selectedIndex>=0&&(this._selectedIndex-=i,this.validateSelectedIndex()),this._updated=!0):r==n&&(this._firstIndex+=this._maxIndex-n,this._selectedIndex>=0&&(this._selectedIndex-=i,this.validateSelectedIndex()),this._updated=!0)}}},{key:"move",value:function(e){this.isLatestShown()&&f.default.getInstance().getArea(this.getDataSourceName()+".mainRange").setChanged(!0),this._firstIndex=this.validateFirstIndex(this._savedFirstIndex-this.calcColumnCount(e),this._maxItemCount),this._updated=!0,this._selectedIndex>=0&&this.validateSelectedIndex()}},{key:"startMove",value:function(){this._savedFirstIndex=this._firstIndex}},{key:"scale",value:function(e){return this._scale+=e,this._scale<0?(this._scale=0,!1):this._scale>t._ItemWidth.length-1?(this._scale=t._ItemWidth.length-1,!1):(p.default.scale=this._scale,this.updateMaxItemCount(),this._selectedIndex>=0&&this.validateSelectedIndex(),!0)}}]),t}(l.default);g._ItemWidth=[1,3,3,5,5,7,9,11,13,15,17,19,21,23,25,27,29],g._SpaceWidth=[1,1,2,2,3,3,3,3,3,3,5,5,5,5,7,7,7],g.PADDING_LEFT=4,g.PADDING_RIGHT=8,t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(408),l=r(u),c=n(355),f=r(c),h=n(366),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var t=f.default.getInstance(),n=t.getArea(this.getAreaName()),r=t.getTimeline(this.getDataSourceName());(n.isChanged()||r.isUpdated())&&(e.fillStyle=(0,h.getThemeStyle)(this._color),e.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight()))}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l,c,f,h,p,d,y,g,_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(397),m=r(v),b=n(355),E=r(b),O=n(300),T=n(366);!function(){function e(e){var t;return t=e.getHours()}function t(e){var t;return t=e.getMinutes(),""+t+"min"}function n(e){return v[e.getMonth()]}function r(e){var t,n;return n=e.getMonth(),t=e.getDate(),""+v[n]+" "+t}function i(e){return e.getHours()+":"+e.getMinutes()}function a(e){return s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())}function o(e){var t,n,r,i,a;return t=e.getFullYear(),a=s(e.getMonth()+1),n=s(e.getDate()),r=s(e.getHours()),i=s(e.getMinutes()),""+t+"-"+a+"-"+n+" "+r+":"+i}function _(e){var t,n,r,i,a,o,u,l;return n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),i=s(e.getHours()),a=s(e.getMinutes()),u=s(e.getSeconds()),l=m[e.getDay()],t=v[e.getMonth()],""+i+":"+a+":"+u+" "+t+r+"日 "+l}var v,m;return v="1月 2月 3月 4月 5月 6月 7月 8月 9月 10月 11月 12月".split(" "),m="周日 周一 周二 周三 周四 周五 周六".split(" "),s=function(e){return e=e.toString(),1===e.length?"0"+e:e},u=e,l=t,c=n,f=r,h=o,p=_,d=i,y=a,g=m,s=s}();var w=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),_(t,[{key:"Draw",value:function(e){function t(e,t){var n;return n=60*e.getTimezoneOffset(),(e.getTime()/1e3-n)%t<k}var n=E.default.getInstance(),r=n.getArea(this.getAreaName()),i=n.getTimeline(this.getDataSourceName());if(r.isChanged()||i.isUpdated()){var a=n.getDataSource(this.getDataSourceName());if(!(a.getDataCount()<2)){var o,s,l,h,p,y,g,_,v,m,b,w,P,x,I=r.getTop(),S=r.getMiddle(),C=r.getLeft(),A=r.getRight(),R=(r.getBottom(),A-C),k=n.step,M=i.getFirstIndex(),D=M+i.getMaxItemCount()-1,N=i.getColumnWidth(),L=R-(O.onWidget?100:0),j=null,F=null,B=null;if(l={60:{cond:t,key_cond:function(e){return 0===e.getMinutes()},text:function(e){return d(e)},key_text:function(e){return u(e)},over:function(e){return f(e)}},3600:{cond:t,key_cond:function(e){return 0===e.getHours()&&e.getDay()!==j},text:function(e){return u(e)},key_text:function(e){return j=e.getDay(),f(e)},over:function(e){return f(e)}},86400:{cond:t,key_cond:function(e){return!1},text:function(e){return f(e)},key_text:function(e){return f(e)},over:function(e){return e.getFullYear()}},604800:{cond:function(e){return e.getDate()<8&&e.getMonth()!==F},key_cond:function(e){return 0===e.getMonth()&&e.getFullYear()!==B},text:function(e){return F=e.getMonth(),c(e)},key_text:function(e){return B=e.getFullYear(),F=e.getMonth(),e.getFullYear()},over:function(e){return e.getFullYear()}},2592e3:{cond:function(e,t){return t>=24?e.getFullYear()%2===0&&0===e.getMonth():t>=12?0===e.getMonth():0===e.getMonth()||e.getMonth()%t===0},key_cond:function(e){return 0===e.getMonth()},text:function(e){return c(e)},key_text:function(e){return e.getFullYear()},over:function(e){return e.getFullYear()}}},k>=2592e3)if(s=2592e3,h=80/N,h<=6){for(g=[1,2,3,4,6],b=0,v=g.length;b<v;b++)if(P=g[b],h<P){h=P;break}}else h=h<=12?12:24;else if(k>=86400)s=604800,h=604800;else for(h=k*(80/N),h<=1800?(s=60,g=[10,30]):h<=28800?(s=3600,g=[1,2,3,6,8]):h<=1296e3?(s=86400,g=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]):(s=604800,g=1),b=0,v=g.length;b<v;b++)if(P=g[b],h<s*P){h=s*P;break}if(o=l[s]){e.strokeStyle=(0,T.getThemeStyle)(T.GRIDS,1),e.textAlign="center",e.textBaseline="middle";var H=null,V=!1,U=0;for(y=w=m=M;m<=D?w<=D:w>=D;y=m<=D?++w:--w){if(p=a.getDataAt(y))p=new Date(p[O.PERIOD_DATE]);else{if(!H)continue;p=H,k>=2592e3?p.setMonth(p.getMonth()+1):p.setSeconds(k)}if(P=y-M,o.cond(p,h)){if(x=i.toItemCenter(y),O.onWidget&&x+20>L)break;o.key_cond(p)?(e.fillStyle=(0,T.getThemeStyle)(T.TEXTS,4),e.font="bold 12px Consolas, Monospace, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'",_=o.key_text(p),V=!0):(e.fillStyle=(0,T.getThemeStyle)(T.TEXTS,4),e.font="11px Consolas, Monospace, 'Helvetica Neue', 'Helvetica', 'Microsoft Yahei'",_=o.text(p),V=!1),(x>U+30||V)&&(e.beginPath(),e.moveTo(x-.5,I),e.lineTo(x-.5,I+4),e.stroke(),e.fillText(_,x,S)),U=x}H=p}}}}}}]),t}(m.default);w.TP_MINUTE=6e4,w.TP_HOUR=60*w.TP_MINUTE,w.TP_DAY=24*w.TP_HOUR,w.TIME_INTERVAL=[5*w.TP_MINUTE,10*w.TP_MINUTE,15*w.TP_MINUTE,30*w.TP_MINUTE,w.TP_HOUR,2*w.TP_HOUR,3*w.TP_HOUR,6*w.TP_HOUR,12*w.TP_HOUR,w.TP_DAY,2*w.TP_DAY,31*w.TP_DAY],w.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."},t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(355),f=r(c),h=n(359),p=r(h),d=n(366),y=n(300),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"Draw",value:function(e){var n=f.default.getInstance(),r=n.getArea(this.getAreaName()),i=n.getTimeline(this.getDataSourceName());if(!(i.getSelectedIndex()<0)){var a=n.getDataSource(this.getDataSourceName());if(a instanceof p.default){var o=n.getArea(this.getDataSourceName()+".mainRange");if(!(i.toItemLeft(i.getSelectedIndex())+i.getColumnWidth()>=o.getLeft())){var s=n.getLanguage(),u=i.toItemCenter(i.getSelectedIndex());e.fillStyle=(0,d.getThemeStyle)(d.BACKGROUND),e.fillRect(u-52.5,r.getTop()+2.5,106,18),e.strokeStyle=(0,d.getThemeStyle)(d.GRIDS,3),e.strokeRect(u-52.5,r.getTop()+2.5,106,18),e.font=(0,d.getThemeStyle)(d.DEFAULTFONT),e.textAlign="center",e.textBaseline="middle",e.fillStyle=(0,d.getThemeStyle)(d.TEXTS,4);var l,c;if(l=a.getDataAt(i.getSelectedIndex()))c=new Date(l[y.PERIOD_DATE]);else if(c=i.indexToDate(i.getSelectedIndex()),!c)return;var h=c.getMonth()+1,g=c.getDate(),_=c.getHours(),v=c.getMinutes(),m=h.toString(),b=g.toString(),E=_.toString(),O=v.toString();v<10&&(O="0"+O);var T="";"zh-cn"==s?T=m+"月"+b+"日  "+E+":"+O:"zh-tw"==s?T=m+"月"+b+"日  "+E+":"+O:"en-us"==s&&(T=t.MonthConvert[h]+" "+b+"  "+E+":"+O),e.fillText(T,u,r.getMiddle())}}}}}]),t}(l.default);g.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."},t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawSegLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"SegLine"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");return r.setPosXY(e,n),0!=this.isWithRect(this.getPoint(0),this.getPoint(1),r)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0))}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CTriToolObject=t.CBiToolObject=void 0;var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(300),c=n(358),f=r(c),h=n(355),p=r(h),d=n(359),y=r(d),g=n(427),_=r(g),v=n(297),m=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=null,n.state=l.STATE_BEFORE,n.points=[],n.step=0,n}return o(t,e),u(t,[{key:"getToolName",value:function(){throw"No implementation"}},{key:"getChartObjects",value:function(){var e=p.default.getInstance(),t=e.getDataSource("frame0.k0");if(null==t||!(t instanceof y.default))return null;var n=e.getTimeline("frame0.k0");if(null==n)return null;var r=e.getArea("frame0.k0.main");if(null==r)return null;var i=e.getRange("frame0.k0.main");return null==i?null:{pMgr:e,pCDS:t,pTimeline:n,pArea:r,pRange:i}}},{key:"isValidMouseXY",value:function(e,t){var n=this.getChartObjects(),r={left:n.pArea.getLeft(),top:n.pArea.getTop(),right:n.pArea.getRight(),bottom:n.pArea.getBottom()};return!(e<r.left||e>r.right||t<r.top||t>r.bottom)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(e){this.state=e}},{key:"getState",value:function(){return this.state}},{key:"addPoint",value:function(e){this.points.push(e)}},{key:"getPoint",value:function(e){return this.points[e]}},{key:"acceptMouseMoveEvent",value:function(e,t){return 0!=this.isValidMouseXY(e,t)&&(this.state==l.STATE_BEFORE?this.setBeforeDrawPos(e,t):this.state==l.STATE_DRAWING?this.setDrawPos(e,t):this.state==l.STATE_AFTER&&this.setAfterDrawPos(e,t),!0)}},{key:"acceptMouseDownEvent",value:function(e,n){return 0!=this.isValidMouseXY(e,n)&&(this.state==l.STATE_BEFORE?(this.setDrawPos(e,n),this.setState(l.STATE_DRAWING)):this.state==l.STATE_DRAWING?(this.setAfterDrawPos(e,n),0==this.step&&(this.setState(l.STATE_AFTER),(0,l.ga)("send","event","Drawing Tools","DRAW",this.getToolName(),1))):this.state==l.STATE_AFTER&&(t.prototype.isSelected.call(this,e,n)?(this.setDrawPos(e,n),this.setState(l.STATE_DRAWING)):(this.oldx=e,this.oldy=n)),!0)}},{key:"acceptMouseDownMoveEvent",value:function(e,t){if(0==this.isValidMouseXY(e,t))return!1;if(this.state==l.STATE_DRAWING)this.setDrawPos(e,t);else if(this.state==l.STATE_AFTER){var n=this.getChartObjects(),r=n.pTimeline.getItemWidth();if(Math.abs(e-this.oldx)<r&&0==Math.abs(t-this.oldy))return!0;var i=n.pTimeline.toIndex(this.oldx),a=n.pRange.toValue(this.oldy),o=n.pTimeline.toIndex(e),s=n.pRange.toValue(t);this.oldx=e,this.oldy=t;var u=o-i,c=s-a;for(var f in this.points){var h=this.points[f],p=h.pos.index+u,d=h.pos.value+c,y=h.snapValue(p,d,!0);null!=y?(h.isSnap=!0,d=y):h.isSnap=!1,h.setPosIV(p,d)}}return!0}},{key:"acceptMouseUpEvent",value:function(e,t){return 0!=this.isValidMouseXY(e,t)&&(this.state==l.STATE_DRAWING&&(this.setAfterDrawPos(e,t),0==this.step&&this.setState(l.STATE_AFTER),!0))}},{key:"setBeforeDrawPos",value:function(e,t){for(var n in this.points)this.points[n].setPosXY(e,t),this.points[n].setState(g.STATE_SHOW)}},{key:"setDrawPos",value:function(e,t){for(var n in this.points)this.points[n].getState()==g.STATE_HIGHLIGHT&&this.points[n].setPosXY(e,t)}},{key:"setAfterDrawPos",value:function(e,t){0!=this.step&&(this.step-=1);for(var n in this.points)this.points[n].setState(g.STATE_HIDE);if(0==this.step){var r=this.getChartObjects();r.pMgr.dispatch((0,v.switchTool)(r.pMgr._beforeDrawingTool))}}},{key:"isSelected",value:function(e,t){var n=!1;for(var r in this.points)if(this.points[r].isSelected(e,t)){this.points[r].setState(g.STATE_HIGHLIGHT),n=!0;break}return 1==n&&(this.select(),!0)}},{key:"select",value:function(){for(var e in this.points)this.points[e].getState()==g.STATE_HIDE&&this.points[e].setState(g.STATE_SHOW)}},{key:"unselect",value:function(){for(var e in this.points)this.points[e].getState()!=g.STATE_HIDE&&this.points[e].setState(g.STATE_HIDE)}},{key:"calcDistance",value:function(e,t,n){var r=e.getPosXY().x,i=e.getPosXY().y,a=t.getPosXY().x,o=t.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y,l=r-s,c=i-u,f=a-s,h=o-u,p=Math.abs(l*h-c*f),d=Math.sqrt(Math.pow(a-r,2)+Math.pow(o-i,2));return p/d}},{key:"calcGap",value:function(e,t,n){var r=e.sx,i=e.sy,a=e.ex,o=e.ey,s=t,u=n,l=r-s,c=i-u,f=a-s,h=o-u,p=Math.abs(l*h-c*f),d=Math.sqrt(Math.pow(a-r,2)+Math.pow(o-i,2));return p/d}},{key:"isWithRect",value:function(e,t,n){var r=e.getPosXY().x,i=e.getPosXY().y,a=t.getPosXY().x,o=t.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y;return r>a?(r+=4,a-=4):(r-=4,a+=4),i>o?(i+=4,o-=4):(i-=4,o+=4),r<=s&&a>=s&&i<=u&&o>=u||(r>=s&&a<=s&&i<=u&&o>=u||(r<=s&&a>=s&&i>=u&&o<=u||r>=s&&a<=s&&i>=u&&o<=u))}}]),t}(f.default);t.default=m;t.CBiToolObject=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addPoint(new _.default(e)),n.addPoint(new _.default(e)),n}return o(t,e),u(t,[{key:"setBeforeDrawPos",value:function(e,n){this.step=1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setBeforeDrawPos",this).call(this,e,n),this.getPoint(0).setState(g.STATE_SHOW),this.getPoint(1).setState(g.STATE_HIGHLIGHT)}}]),t}(m),t.CTriToolObject=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addPoint(new _.default(e)),n.addPoint(new _.default(e)),n.addPoint(new _.default(e)),n}return o(t,e),u(t,[{key:"setBeforeDrawPos",value:function(e,n){this.step=2,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setBeforeDrawPos",this).call(this,e,n),this.getPoint(0).setState(g.STATE_SHOW),this.getPoint(1).setState(g.STATE_SHOW),this.getPoint(2).setState(g.STATE_HIGHLIGHT)}},{key:"setAfterDrawPos",value:function(e,t){if(0!=this.step&&(this.step-=1),0==this.step)for(var n in this.points)this.points[n].setState(g.STATE_HIDE);else this.getPoint(0).setState(g.STATE_SHOW),this.getPoint(1).setState(g.STATE_HIGHLIGHT),this.getPoint(2).setState(g.STATE_SHOW);if(0==this.step){var r=this.getChartObjects();r.pMgr.dispatch((0,v.switchTool)(r.pMgr._beforeDrawingTool))}}}]),t}(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.STATE_HIGHLIGHT=t.STATE_SHOW=t.STATE_HIDE=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(300),c=n(358),f=r(c),h=n(355),p=r(h),d=n(359),y=r(d),g=(0,l.NOLY_IDS)(3),_=u(g,3),v=_[0],m=_[1],b=_[2];t.STATE_HIDE=v,t.STATE_SHOW=m,t.STATE_HIGHLIGHT=b;var E=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pos={index:-1,value:-1},n.state=v,n.isSnap=!1,n}return o(t,e),s(t,[{key:"getChartObjects",value:function(){var e=p.default.getInstance(),t=e.getDataSource("frame0.k0");if(null==t||!(t instanceof y.default))return null;var n=e.getTimeline("frame0.k0");if(null==n)return null;var r=e.getRange("frame0.k0.main");return null==r?null:{pMgr:e,pCDS:t,pTimeline:n,pRange:r}}},{key:"setPosXY",value:function(e,t){var n=this.getChartObjects(),r=n.pTimeline.toIndex(e),i=n.pRange.toValue(t),a=this.snapValue(r,i);null!=a?(this.isSnap=!0,i=a):this.isSnap=!1,this.setPosIV(r,i)}},{key:"setPosXYNoSnap",value:function(e,t){var n=this.getChartObjects(),r=n.pTimeline.toIndex(e),i=n.pRange.toValue(t);this.setPosIV(r,i)}},{key:"setPosIV",value:function(e,t){if(this.pos.index!==e){this.pos.index=e;var n=this.getChartObjects();this.pos.date=n.pTimeline.indexToDate(e)}this.pos.value!==t&&(this.pos.value=t)}},{key:"getPosXY",value:function(){var e=this.getChartObjects();if(this.pos.date){this.pos.index=e.pTimeline.dateToIndex(this.pos.date);var t=this.pos.value,n=this.snapValue(this.pos.index,t);null!=n?(this.isSnap=!0,t=n):this.isSnap=!1,this.pos.value=t}var r=e.pTimeline.toItemCenter(this.pos.index),i=e.pRange.toY(this.pos.value);return{x:r,y:i}}},{key:"getPosIV",value:function(){var e=this.getChartObjects();return{i:this.pos.index=e.pTimeline.dateToIndex(this.pos.date),v:this.pos.value}}},{key:"setState",value:function(e){this.state=e}},{key:"getState",value:function(){return this.state}},{key:"isSelected",value:function(e,t){var n=this.getPosXY();return!(e<n.x-4||e>n.x+4||t<n.y-4||t>n.y+4)&&(this.setState(b),!0)}},{key:"snapValue",value:function(e,t,n){var r=this.getChartObjects(),i=null,a=Math.floor(r.pTimeline.getFirstIndex()),o=Math.floor(r.pTimeline.getLastIndex());if(e<a||e>o)return i;var s=r.pRange.toY(t),u=r.pCDS.getDataAt(e);if(null==u||void 0==u)return i;var c=null;c=e>0?r.pCDS.getDataAt(e-1):r.pCDS.getDataAt(e);var f=r.pMgr.getChartStyle(r.pCDS.getFrameName()),h=r.pRange.toY(u[l.PERIOD_OPEN]),p=r.pRange.toY(u[l.PERIOD_HIGH]),d=r.pRange.toY(u[l.PERIOD_LOW]),y=r.pRange.toY(u[l.PERIOD_CLOSE]);f===l.STICK_STYLE_CANDLEHLC&&(h=r.pRange.toY(c[l.PERIOD_CLOSE]));var g=Math.abs(h-s),_=Math.abs(p-s),v=Math.abs(d-s),m=Math.abs(y-s),b=n?3:6;return g<=_&&g<=v&&g<=m&&g<b&&(i=u[l.PERIOD_OPEN]),_<=g&&_<=v&&_<=m&&_<b&&(i=u[l.PERIOD_HIGH]),v<=g&&v<=_&&v<=m&&v<b&&(i=u[l.PERIOD_LOW]),m<=g&&m<=_&&m<=v&&m<b&&(i=u[l.PERIOD_CLOSE]),i}}]),t}(f.default);t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,i){var a=Math.PI/180*i,o=Math.cos(a),s=Math.sin(a),u=o*(n-e)+s*(r-t)+e,l=o*(r-t)-s*(n-e)+t;return[u,l]}function u(e,t,n){var r,i={x:-1,y:-1},a={x:-1,y:-1},o=n.x-t.x,s=n.y-t.y;if(Math.abs(o)<2)return i={x:t.x,y:e.top},a={x:n.x,y:e.bottom},r=[i,a];var u=s/o;return a.x=e.right,a.y=t.y+(e.right-t.x)*u,i.x=e.left,i.y=t.y+(e.left-t.x)*u,r=[i,a]}Object.defineProperty(t,"__esModule",{value:!0}),t.DrawFibSpiralPlotter=t.DrawRulerPlotter=t.DrawFibFansPlotter=t.DrawBandLinesPlotter=t.DrawFibRetracePlotter=t.BandLinesPlotter=t.DrawTriParallelLinesPlotter=t.DrawBiParallelRayLinesPlotter=t.DrawBiParallelLinesPlotter=t.DrawPriceLinesPlotter=t.DrawVertiStraightLinesPlotter=t.DrawHoriSegLinesPlotter=t.DrawHoriRayLinesPlotter=t.DrawHoriStraightLinesPlotter=t.DrawArrowLinesPlotter=t.DrawRayLinesPlotter=t.DrawSegLinesPlotter=t.DrawStraightLinesPlotter=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.rotate=s,t.getRectCrossPt=u;var c=n(358),f=r(c),h=n(355),p=r(h),d=n(397),y=r(d),g=n(366),_=n(427),v=n(300),m=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toolObject=n;var o=p.default.getInstance(),s=o.getArea("frame0.k0.main");return null==s?(r.areaPos={left:0,top:0,right:0,bottom:0},a(r)):(r.areaPos={left:s.getLeft(),top:s.getTop(),right:s.getRight(),bottom:s.getBottom()},r.crossPt={},r.normalSize=4,r.selectedSize=6,r.cursorLen=4,r.cursorGapLen=3,r)}return o(t,e),l(t,[{key:"drawCursor",value:function(e){this.drawCrossCursor(e)}},{key:"drawCrossCursor",value:function(e){var t=this.toolObject.getPoint(0),n=t.getPosXY();null!=n&&this.drawCircle(e,n,this.normalSize,t.isSnap)}},{key:"drawCircle",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.x,a=t.y;e.beginPath(),e.arc(i,a,n,0,2*Math.PI,!1),r?e.fillStyle=(0,g.getThemeStyle)(g.CIRCLECOLORSTROKE):e.fillStyle=(0,g.getThemeStyle)(g.CIRCLECOLORFILL),e.fill(),e.stroke()}},{key:"drawCtrlPt",value:function(e){e.strokeStyle=(0,g.getThemeStyle)(g.CIRCLECOLORSTROKE);for(var t=0;t<this.ctrlPtsNum;t++)this.drawCircle(e,this.ctrlPts[1][t],this.normalSize,this.ctrlPts[0][t].isSnap)}},{key:"highlightCtrlPt",value:function(e){e.strokeStyle=(0,g.getThemeStyle)(g.CIRCLECOLORSTROKE);for(var t=0;t<this.ctrlPtsNum;t++)this.toolObject.getPoint(t).getState()==_.STATE_HIGHLIGHT&&this.drawCircle(e,this.ctrlPts[1][t],this.selectedSize,this.ctrlPts[0][t].isSnap)}},{key:"drawFibRayLines",value:function(e,t,n){for(var r=0;r<this.fiboFansSequence.length;r++){var i=t.y+(100-this.fiboFansSequence[r])/100*(n.y-t.y),a={x:t.x,y:t.y},o={x:n.x,y:i};this.drawRayLines(e,a,o)}}},{key:"drawRayLines",value:function(e,t,n){this.getAreaPos();var r,i={x:t.x,y:t.y},a={x:n.x,y:n.y},o=u(this.areaPos,i,a);r=n.x==t.x?n.y==t.y?n:n.y>t.y?{x:o[1].x,y:o[1].y}:{x:o[0].x,y:o[0].y}:n.x>t.x?{x:o[1].x,y:o[1].y}:{x:o[0].x,y:o[0].y},y.default.drawLine(e,t.x,t.y,r.x,r.y)}},{key:"lenBetweenPts",value:function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"getCtrlPts",value:function(){for(var e=0;e<this.ctrlPtsNum;e++)this.ctrlPts[0][e]=this.toolObject.getPoint(e)}},{key:"updateCtrlPtPos",value:function(){for(var e=0;e<this.ctrlPtsNum;e++)this.ctrlPts[1][e]=this.ctrlPts[0][e].getPosXY()}},{key:"getAreaPos",value:function(){var e=p.default.getInstance(),t=e.getArea("frame0.k0.main");return null==t?void(this.areaPos={left:0,top:0,right:0,bottom:0}):void(this.areaPos={left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())})}},{key:"updateDraw",value:function(e){e.strokeStyle=(0,g.getThemeStyle)(g.LINECOLORNORMAL),this.draw(e),this.drawCtrlPt(e)}},{key:"finishDraw",value:function(e){e.strokeStyle=(0,g.getThemeStyle)(g.LINECOLORNORMAL),this.draw(e)}},{key:"highlight",value:function(e){e.strokeStyle=(0,g.getThemeStyle)(g.LINECOLORSELECTED),this.draw(e),this.drawCtrlPt(e),this.highlightCtrlPt(e)}}]),t}(f.default),b=(t.DrawStraightLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y?y.default.drawLine(e,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=u(this.areaPos,this.startPoint,this.endPoint),y.default.drawLine(e,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),t}(m),t.DrawSegLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1),y.default.drawLine(e,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),t}(m),t.DrawRayLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(e,this.startPoint,this.endPoint)}}]),t}(m),t.DrawArrowLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.arrowSizeRatio=.03,r.arrowSize=4,r.crossPt={x:-1,y:-1},r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"drawArrow",value:function(e,t,n){var r=this.lenBetweenPts(t,n),i=[n.x-t.x,n.y-t.y];this.crossPt.x=t.x+(1-this.arrowSize/r)*i[0],this.crossPt.y=t.y+(1-this.arrowSize/r)*i[1];var a=[-i[1],i[0]],o={x:a[0],y:a[1]},s={x:0,y:0};a[0]=this.arrowSize*o.x/this.lenBetweenPts(o,s),a[1]=this.arrowSize*o.y/this.lenBetweenPts(o,s);var u=[this.crossPt.x+a[0],this.crossPt.y+a[1]];y.default.drawLine(e,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-a[0],this.crossPt.y-a[1]],y.default.drawLine(e,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(e){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1),y.default.drawLine(e,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(e,this.startPoint,this.endPoint)}}]),t}(m),t.DrawHoriStraightLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],y.default.drawLine(e,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),t}(m),t.DrawHoriRayLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x)y.default.drawLine(e,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var t={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(e,this.startPoint,t)}}}]),t}(m),t.DrawHoriSegLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y?y.default.drawLine(e,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):y.default.drawLine(e,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),t}(m),t.DrawVertiStraightLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],y.default.drawLine(e,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),t}(m),t.DrawPriceLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){e.font=(0,g.getThemeStyle)(g.DEFAULTFONT),e.textAlign="left",e.fillStyle=(0,g.getThemeStyle)(g.LINECOLORNORMAL),this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var t=this.ctrlPts[0][0].getPosIV().v;y.default.drawLine(e,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),e.fillText(t.toFixed(2),this.startPoint.x+2,this.startPoint.y-15)}}]),t}(m),function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"getParaPt",value:function(){var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var t=[];t[0]=this.paraStartPoint.x-this.startPoint.x,t[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=e[0]+t[0]+this.startPoint.x,this.paraEndPoint.y=e[1]+t[1]+this.startPoint.y}}]),t}(m)),E=(t.DrawBiParallelLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=u(this.areaPos,this.startPoint,this.endPoint),y.default.drawLine(e,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=u(this.areaPos,this.paraStartPoint,this.paraEndPoint),y.default.drawLine(e,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),t}(b),t.DrawBiParallelRayLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(e,this.startPoint,this.endPoint),this.drawRayLines(e,this.paraStartPoint,this.paraEndPoint)}}]),t}(b),t.DrawTriParallelLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=t[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=t[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=u(this.areaPos,this.startPoint,this.endPoint),y.default.drawLine(e,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=u(this.areaPos,this.paraStartPoint,this.para1EndPoint),y.default.drawLine(e,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=u(this.areaPos,this.para2StartPoint,this.para2EndPoint),y.default.drawLine(e,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),t}(b),t.BandLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"drawLinesAndInfo",value:function(e,t,n){e.font=(0,g.getThemeStyle)(g.DEFAULTFONT),e.textAlign="left",e.textBaseline="bottom";var r,i=(0,g.getThemeStyle)(g.LINECOLORNORMAL),a=(0,g.getThemeStyle)(g.BACKGROUNDALPHA);this.toolObject.state!=v.STATE_DRAWING&&this.toolObject.state!==v.STATE_AFTER||(this.startPtValue=this.toolObject.getPoint(0).getPosIV().v,this.endPtValue=this.toolObject.getPoint(1).getPosIV().v),this.getAreaPos();for(var o=p.default.getInstance(),s=o.getDataScale(),u=s.enlarge.toString().length+1,l=o.getRange("frame0.k0.main"),c=this.fiboSequence.length-1;c>-1;--c){var f=this.startPtValue+(100-this.fiboSequence[c])/100*(this.endPtValue-this.startPtValue),h=l.toY(f);if(!(h>this.areaPos.bottom)){y.default.drawLine(e,this.areaPos.left,h,this.areaPos.right,h),r=this.fiboSequence[c].toFixed(1)+"% "+f.toFixed(Math.abs(f)<1?u:1);var d=e.measureText(r).width;e.fillStyle=a,e.fillRect(this.areaPos.left,h-2-14,d+4,14),e.fillStyle=i,e.fillText(r,this.areaPos.left+2,h-2)}}}},{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(e,this.startPoint,this.endPoint)}}]),t}(m)),O=(t.DrawFibRetracePlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.fiboSequence=[100,78.6,61.8,50,38.2,23.6,0],r}return o(t,e),t}(E),t.DrawBandLinesPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.fiboSequence=[0,12.5,25,37.5,50,62.5,75,87.5,100],r}return o(t,e),t}(E),t.DrawFibFansPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.fiboFansSequence=[0,38.2,50,61.8],r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"drawLinesAndInfo",value:function(e,t,n){this.drawFibRayLines(e,t,n)}},{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(e,this.startPoint,this.endPoint)}}]),t}(m),t.DrawRulerPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.arrowSize=4,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"drawArrow",value:function(e,t,n){var r=this.lenBetweenPts(t,n);if(r){var i=[n.x-t.x,n.y-t.y];
this.crossPt.x=t.x+(1-this.arrowSize/r)*i[0],this.crossPt.y=t.y+(1-this.arrowSize/r)*i[1];var a=[-i[1],i[0]],o={x:a[0],y:a[1]},s={x:0,y:0};a[0]=this.arrowSize*o.x/this.lenBetweenPts(o,s),a[1]=this.arrowSize*o.y/this.lenBetweenPts(o,s);var u=[this.crossPt.x+a[0],this.crossPt.y+a[1]];y.default.drawLine(e,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-a[0],this.crossPt.y-a[1]],y.default.drawLine(e,n.x,n.y,u[0],u[1])}}},{key:"draw",value:function(e){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1);var t,n,r,i,a=p.default.getInstance().getDataScale(),o=a.enlarge;r=Math.abs(this.endPoint.x-this.startPoint.x),i=Math.abs(this.endPoint.y-this.startPoint.y);var s=this.ctrlPts[0][0].getPosIV(),u=s.i,l=s.v,c=this.ctrlPts[0][1].getPosIV(),f=c.i,h=c.v,d=this.areaPos,_=d.top,v=d.bottom,m=f-u,b=h-l,E=b/l*100,T=parseFloat(b.toFixed(o.toString().length+1))+" ("+parseFloat(E.toFixed(2))+"%)",w=m+"柱 "+O(this.ctrlPts[0][1].pos.date-this.ctrlPts[0][0].pos.date),P=Math.max(e.measureText(T).width,e.measureText(w).width)+16,x=52,I=void 0,S=void 0,C=void 0,A=void 0,R=void 0,k=void 0,M=void 0,D=void 0,N=void 0,L=void 0;I=(this.startPoint.x+this.endPoint.x)/2-P/2,t=this.endPoint.x>this.startPoint.x?this.startPoint.x:this.endPoint.x,this.endPoint.y>this.startPoint.y?(n=this.startPoint.y,S=this.endPoint.y+8):(n=this.endPoint.y,S=this.endPoint.y-8-x),S<_+8?S=_+8:S>v-8-x&&(S=v-8-x),e.beginPath(),e.fillStyle=(0,g.getThemeStyle)(g.AREAALPHA),e.fillRect(t,n,r,i),e.fillStyle=(0,g.getThemeStyle)(g.AREAALPHA1),e.fillRect(I,S,P,x),e.fillStyle="#fff",e.textBaseline="top",e.fillText(T,I+8,S+8),e.fillText(w,I+8,S+16+14),C=this.startPoint.x,R=this.endPoint.x,A=k=(this.startPoint.y+this.endPoint.y)/2,D=this.startPoint.y,L=this.endPoint.y,M=N=(this.startPoint.x+this.endPoint.x)/2,e.beginPath(),e.setLineDash([3,3]),e.strokeStyle=(0,g.getThemeStyle)(g.GRIDS,3),y.default.drawLine(e,C,A,R,k),e.stroke(),e.beginPath(),y.default.drawLine(e,M,D,N,L),e.stroke(),e.setLineDash([]),this.drawArrow(e,{x:C,y:A},{x:R,y:k}),this.drawArrow(e,{x:M,y:D},{x:N,y:L}),e.closePath()}}]),t}(m),t.DrawFibSpiralPlotter=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return o(t,e),l(t,[{key:"draw",value:function(e){var t=this;this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x==this.endPoint.x&&this.startPoint.y==this.endPoint.y&&(this.endPoint.x+=1);var n=function(e,n){t.points=x(e,n),r(t.points,t.startPoint)},r=function(t,n,r){n=n||{x:0,y:0},r=r||"black",e.beginPath();var i=t[0];e.moveTo(n.x+i.x,n.y+i.y);for(var a=1;a<t.length;a++)i=t[a],e.lineTo(n.x+i.x,n.y+i.y);e.stroke()};this.drawRayLines(e,this.startPoint,this.endPoint),n({x:0,y:0},{x:this.endPoint.x-this.startPoint.x,y:this.endPoint.y-this.startPoint.y})}}]),t}(m),function(e){var t=e<0;e=Math.abs(e);var n=Math.floor(e/24/60/60/1e3),r=Math.floor((e-24*n*60*60*1e3)/60/60/1e3),i=Math.floor((e-24*n*60*60*1e3-60*r*60*1e3)/60/1e3);return(t?"-":"")+(n?n+"天":"")+(r?r+"小时":"")+(i?i+"分钟":"")}),T=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},w=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},P=function(){var e=this;return e.array=[0,1,2],e.getDiscrete=function(t){for(;t>=e.array.length;){var n=e.array.length,r=e.array[n-1]+e.array[n-2];e.array.push(r)}return e.array[t]},e.getNumber=function(t){var n=Math.floor(t),r=Math.ceil(t);if(Math.floor(t)==t)return e.getDiscrete(t);var i=Math.pow(t-n,1.15),a=e.getDiscrete(n),o=e.getDiscrete(r);return a+i*(o-a)},e},x=function(e,t){for(var n=50,r=0,i=4,a=w(e,t),o=T(e,t),s=new P,u=s.getNumber(i),l=o/u,c=a-i*Math.PI/2,f=[],h=r*n;h<=i*n+300;h++){var p=h/n,d=s.getNumber(p),y=p*Math.PI/2,g={x:l*d*Math.cos(y+c)+e.x,y:l*d*Math.sin(y+c)+e.y};f.push(g)}return f}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(425),c=r(l),f=n(428),h=n(427),p=r(h),d=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new f.DrawPriceLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"PriceLine"}},{key:"setDrawPos",value:function(e,t){for(var n in this.points)this.points[n].setPosXY(e,t)}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new p.default("frame0.k0");r.setPosXY(e,n);var i=this.getPoint(0).getPosXY().x,a=this.getPoint(0).getPosXY().y;this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y;return!(e<i-4)&&(!(n>=a+4||n<=a-4)&&(this.select(),!0))}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawStraightLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"StraightLine"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");return r.setPosXY(e,n),this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0)}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=n(432),d=n(475),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawRayLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"RayLine"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=this.getPoint(0).getPosXY();r=new p.Vector3(r.x,r.y,0);var i=this.getPoint(1).getPosXY();i=new p.Vector3(i.x,i.y,0);var a=i.clone().sub(r),o=a.multiplyScalar(1/a.length()),s=new d.Ray(r,o),l=new h.default("frame0.k0");l.setPosXY(e,n),l=l.getPosXY(),l=new p.Vector3(l.x,l.y,0);var c=s.distanceToPoint(l)<4;return c&&this.select(),c}}]),t}(l.CBiToolObject);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=void 0;var a=n(433),o=r(a);(0,o.default)(i.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14];var a=i[3]*t+i[7]*n+i[11]*r+i[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new i,t=new i;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new i;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new i;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),t.Vector3=i},function(e,t,n){var r=n(434),i=n(446),a=n(447),o=n(457),s=n(460),u=n(461),l=Object.prototype,c=l.hasOwnProperty,f=a(function(e,t){if(s(t)||o(t))return void i(t,u(t),e);for(var n in t)c.call(t,n)&&r(e,n,t[n])});e.exports=f},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&a(r,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=n(435),a=n(445),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=n(436);e.exports=r},function(e,t,n){var r=n(437),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){function r(e,t){var n=a(e,t);return i(n)?n:void 0}var i=n(438),a=n(444);e.exports=r},function(e,t,n){function r(e){if(!o(e)||a(e))return!1;var t=i(e)?d:l;return t.test(s(e))}var i=n(439),a=n(441),o=n(440),s=n(443),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,h=c.toString,p=f.hasOwnProperty,d=RegExp("^"+h.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){if(!a(e))return!1;var t=i(e);return t==s||t==u||t==o||t==l}var i=n(230),a=n(440),o="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e){return!!a&&a in e}var i=n(442),a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(232),i=r["__core-js_shared__"];e.exports=i},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t,n,r){var o=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var l=t[s],c=r?r(n[l],e[l],l,n,e):void 0;void 0===c&&(c=e[l]),o?a(n,l,c):i(n,l,c)}return n}var i=n(434),a=n(435);e.exports=r},function(e,t,n){function r(e){return i(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&a(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t})}var i=n(448),a=n(456);e.exports=r},function(e,t,n){function r(e,t){return o(a(e,t,i),e+"")}var i=n(449),a=n(450),o=n(452);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=a(r.length-t,0),u=Array(s);++o<s;)u[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(u),i(e,this,l)}}var i=n(451),a=Math.max;e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(453),i=n(455),a=i(r);e.exports=a},function(e,t,n){var r=n(454),i=n(436),a=n(449),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var o=a(),s=i-(o-n);if(n=o,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,i=16,a=Date.now;e.exports=n},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?a(n)&&o(t,n.length):"string"==r&&t in n)&&i(n[t],e)}var i=n(445),a=n(457),o=n(459),s=n(440);e.exports=r},function(e,t,n){function r(e){return null!=e&&a(e.length)&&!i(e)}var i=n(439),a=n(458);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t){function n(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){function r(e){return o(e)?i(e):a(e)}var i=n(462),a=n(473),o=n(457);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=!n&&a(e),c=!n&&!r&&s(e),h=!n&&!r&&!c&&l(e),p=n||r||c||h,d=p?i(e.length,String):[],y=d.length;for(var g in e)!t&&!f.call(e,g)||p&&("length"==g||c&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,y))||d.push(g);return d}var i=n(463),a=n(464),o=n(466),s=n(467),u=n(459),l=n(469),c=Object.prototype,f=c.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){var r=n(465),i=n(238),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){function r(e){return a(e)&&i(e)==o}var i=n(230),a=n(238),o="[object Arguments]";e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var r=n(232),i=n(468),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||i;e.exports=c}).call(t,n(241)(e))},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){var r=n(470),i=n(471),a=n(472),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},function(e,t,n){function r(e){return o(e)&&a(e.length)&&!!R[i(e)]}var i=n(230),a=n(458),o=n(238),s="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Function]",p="[object Map]",d="[object Number]",y="[object Object]",g="[object RegExp]",_="[object Set]",v="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",E="[object DataView]",O="[object Float32Array]",T="[object Float64Array]",w="[object Int8Array]",P="[object Int16Array]",x="[object Int32Array]",I="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",R={};R[O]=R[T]=R[w]=R[P]=R[x]=R[I]=R[S]=R[C]=R[A]=!0,R[s]=R[u]=R[b]=R[l]=R[E]=R[c]=R[f]=R[h]=R[p]=R[d]=R[y]=R[g]=R[_]=R[v]=R[m]=!1,e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var r=n(233),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(241)(e))},function(e,t,n){function r(e){if(!i(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=n(460),a=n(474),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(237),i=r(Object.keys,Object);e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this.origin=void 0!==e?e:new a.Vector3,this.direction=void 0!==t?t:new a.Vector3}Object.defineProperty(t,"__esModule",{value:!0}),t.Ray=void 0;var a=n(432),o=n(433),s=r(o);(0,s.default)(i.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new a.Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new a.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new a.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new a.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3;return function(r,i,a,o){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,u,l,c,f=.5*r.distanceTo(i),h=-this.direction.dot(t),p=n.dot(this.direction),d=-n.dot(t),y=n.lengthSq(),g=Math.abs(1-h*h);if(g>0)if(s=h*d-p,u=h*p-d,c=f*g,s>=0)if(u>=-c)if(u<=c){var _=1/g;s*=_,u*=_,l=s*(s+h*u+2*p)+u*(h*s+u+2*d)+y}else u=f,s=Math.max(0,-(h*u+p)),l=-s*s+u*(u+2*d)+y;else u=-f,s=Math.max(0,-(h*u+p)),l=-s*s+u*(u+2*d)+y;else u<=-c?(s=Math.max(0,-(-h*f+p)),u=s>0?-f:Math.min(Math.max(-f,-d),f),l=-s*s+u*(u+2*d)+y):u<=c?(s=0,u=Math.min(Math.max(-f,-d),f),l=u*(u+2*d)+y):(s=Math.max(0,-(h*f+p)),u=s>0?f:Math.min(Math.max(-f,-d),f),l=-s*s+u*(u+2*d)+y);else u=h>0?-f:f,s=Math.max(0,-(h*u+p)),l=-s*s+u*(u+2*d)+y;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new a.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=r-o,u=r+o;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),l>=0?(i=(e.min.y-f.y)*l,a=(e.max.y-f.y)*l):(i=(e.max.y-f.y)*l,a=(e.min.y-f.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new a.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new a.Vector3,t=new a.Vector3,n=new a.Vector3,r=new a.Vector3;return function(i,a,o,s,u){t.subVectors(a,i),n.subVectors(o,i),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var f=l*this.direction.dot(n.crossVectors(e,n));if(f<0)return null;var h=l*this.direction.dot(t.cross(e));if(h<0)return null;if(f+h>c)return null;var p=-l*e.dot(r);return p<0?null:this.at(p/c,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),t.Ray=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(425),l=r(u),c=n(428),f=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawArrowLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"ArrowLine"}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawHoriSegLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"HoriSegLine"}},{key:"setDrawPos",value:function(e,t){return this.points[0].getState()===f.STATE_HIGHLIGHT?(this.points[0].setPosXY(e,t),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y)):void(this.points[1].getState()===f.STATE_HIGHLIGHT&&(this.points[1].setPosXY(e,t),this.points[0].setPosXY(this.points[0].getPosXY().x,this.points[1].getPosXY().y)))}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n);var i=this.getPoint(0).getPosXY().y,a=this.getPoint(0).getPosXY().x,o=this.getPoint(1).getPosXY().x;return!(n>i+4||n<i-4)&&(!(a>o&&(e>a+4||e<o-4))&&(!(a<o&&(e<a-4||e>o+4))&&(this.select(),!0)))}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawHoriStraightLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"HoriStraightLine"}},{key:"setDrawPos",value:function(e,t){for(var n in this.points)this.points[n].setPosXY(e,t)}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n);var i=this.getPoint(0).getPosXY().y;return!(n>i+4||n<i-4)&&(this.select(),!0)}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawHoriRayLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"HoriRayLine"}},{key:"setDrawPos",value:function(e,t){return this.points[0].getState()===f.STATE_HIGHLIGHT?(this.points[0].setPosXY(e,t),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y)):void(this.points[1].getState()===f.STATE_HIGHLIGHT&&(this.points[1].setPosXY(e,t),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y)))}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n);var i=this.getPoint(0).getPosXY().y,a=this.getPoint(0).getPosXY().x,o=this.getPoint(1).getPosXY().x;return!(n>i+4||n<i-4)&&(!(o>a&&e<a-4)&&(!(o<a&&e>a+4)&&(this.select(),!0)))}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawVertiStraightLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"VertiStraightLine"}},{key:"setDrawPos",value:function(e,t){for(var n in this.points)this.points[n].setPosXY(e,t)}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n);var i=this.getPoint(0).getPosXY().x;return!(e>i+4||e<i-4)&&(this.select(),!0)}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(426),u=n(428),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new u.DrawRulerPlotter(e,n),n}return a(t,e),o(t,[{key:"getToolName",value:function(){return"Ruler"}},{key:"isSelected",value:function(e,t){return!1}}]),t}(s.CBiToolObject);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=n(426),l=n(428),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new l.DrawTriParallelLinesPlotter(e,n),n}return a(t,e),o(t,[{key:"getToolName",value:function(){return"TriParallelLine"}},{key:"isSelected",value:function(e,n){if(1==s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,a=this.getPoint(1).getPosXY().x,o=this.getPoint(1).getPosXY().y,u=this.getPoint(2).getPosXY().x,l=this.getPoint(2).getPosXY().y,c={x:r-a,y:i-o},f={x:r-u,y:i-l},h={x:c.x+f.x,y:c.y+f.y},p=r-h.x,d=i-h.y,y={sx:r,sy:i,ex:u,ey:l},g={sx:a,sy:o,ex:p,ey:d},_={x:a-r,y:o-i},v={x:p-u,y:d-l},m=Math.abs(_.x-r),b=Math.abs(_.y-i),E=Math.abs(v.x-u),O=Math.abs(v.y-l),T={sx:m,sy:b,ex:E,ey:O};return!(this.calcGap(y,e,n)>4&&this.calcGap(g,e,n)>4&&this.calcGap(T,e,n)>4)&&(this.select(),!0)}}]),t}(u.CTriToolObject);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=n(426),l=n(428),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new l.DrawBiParallelLinesPlotter(e,n),n}return a(t,e),o(t,[{key:"getToolName",value:function(){return"BiParallelLine"}},{key:"isSelected",value:function(e,n){if(1==s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,a=this.getPoint(1).getPosXY().x,o=this.getPoint(1).getPosXY().y,u=this.getPoint(2).getPosXY().x,l=this.getPoint(2).getPosXY().y,c={x:r-a,y:i-o},f={x:r-u,y:i-l},h={x:c.x+f.x,y:c.y+f.y},p=r-h.x,d=i-h.y,y={sx:r,sy:i,ex:u,ey:l},g={sx:a,sy:o,ex:p,ey:d};return!(this.calcGap(y,e,n)>4&&this.calcGap(g,e,n)>4)}}]),t}(u.CTriToolObject);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=n(432),d=n(475),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawBiParallelRayLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"BiParallelRayLine"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=this.getPoint(0).getPosXY();r=new p.Vector3(r.x,r.y,0);var i=this.getPoint(2).getPosXY();i=new p.Vector3(i.x,i.y,0);var a=this.getPoint(1).getPosXY();a=new p.Vector3(a.x,a.y,0);var o=i.clone().sub(r),s=o.multiplyScalar(1/o.length()),l=new d.Ray(r,s.clone()),c=new d.Ray(a,s.clone()),f=new h.default("frame0.k0");f.setPosXY(e,n),f=f.getPosXY(),f=new p.Vector3(f.x,f.y,0);var y=l.distanceToPoint(f)<4||c.distanceToPoint(f)<4;return y&&this.select(),y}}]),t}(l.CTriToolObject);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=n(432),d=n(475),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawFibFansPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"FibFans"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n),r=r.getPosXY(),r=new p.Vector3(r.x,r.y,0);var i=this.getPoint(0).getPosXY(),a=this.getPoint(1).getPosXY(),o=(i.x,i.y),s=a.x,l=a.y;i=new p.Vector3(i.x,i.y,0);for(var c=this.getChartObjects(),f=({left:c.pArea.getLeft(),top:c.pArea.getTop(),right:c.pArea.getRight(),bottom:c.pArea.getBottom()},[0,38.2,50,61.8]),y=0;y<f.length;y++){var g=o+(100-f[y])/100*(l-o);a=new h.default("frame0.k0"),a.setPosXY(s,g),a=a.getPosXY(),a=new p.Vector3(a.x,a.y,0);var _=a.clone().sub(i),v=_.multiplyScalar(1/_.length()),m=new d.Ray(i,v),b=m.distanceToPoint(r)<4;if(b)return this.select(),!0}return!1}}]),t}(l.CBiToolObject);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=n(432),d=n(475),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawFibSpiralPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"FibSpiral"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;if(!Array.isArray(this.drawer.points)||!this.drawer.points.length)return!1;for(var r=0,i=this.drawer.points.length;r<i;++r){var a=this.drawer.points[r];if(g({x:this.drawer.startPoint.x+a.x,y:this.drawer.startPoint.y+a.y},{x:e,y:n})<=4)return this.select(),!0}var o=this.getPoint(0).getPosXY();o=new p.Vector3(o.x,o.y,0);var s=this.getPoint(1).getPosXY();s=new p.Vector3(s.x,s.y,0);var l=s.clone().sub(o),c=l.multiplyScalar(1/l.length()),f=new d.Ray(o,c),y=new h.default("frame0.k0");y.setPosXY(e,n),y=y.getPosXY(),y=new p.Vector3(y.x,y.y,0);var _=f.distanceToPoint(y)<4;return _&&this.select(),_}}]),t}(l.CBiToolObject);t.default=y;var g=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawBandLinesPlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"BandLine"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n);for(var i=(this.getPoint(0).getPosXY().x,this.getPoint(0).getPosXY().y),a=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),o=[100,87.5,75,62.5,50,37.5,25,12.5,0],s=0;s<o.length;s++){var l=i+(100-o[s])/100*(a-i);if(l<n+4&&l>n-4)return this.select(),!0}return!1}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(426),c=n(428),f=n(427),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.drawer=new c.DrawFibRetracePlotter(e,n),n}return o(t,e),s(t,[{key:"getToolName",value:function(){return"FibRetrace"}},{key:"isSelected",value:function(e,n){if(1==u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isSelected",this).call(this,e,n))return!0;var r=new h.default("frame0.k0");r.setPosXY(e,n);for(var i=r.getChartObjects()||{},a=i.pRange,o=this.getPoint(0).getPosIV().v,s=this.getPoint(1).getPosIV().v,l=s-o,c=[100,78.6,61.8,50,38.2,23.6,0],f=0;f<c.length;f++){var p=o+(100-c[f])/100*l,d=a.toY(p);if(d<n+4&&d>n-4)return this.select(),!0}return!1}}]),t}(l.CBiToolObject);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(358),l=r(u),c=n(481),f=r(c),h=n(300),p=n(427),d=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selectedObject=-1,n.rulerObject=-1,n.toolObjects=[],n}return o(t,e),s(t,[{key:"getToolObjectCount",value:function(){return this.toolObjects.length}},{key:"addToolObject",value:function(e){this.toolObjects.push(e)}},{key:"getToolObject",value:function(e){return e<this.toolObjects.length&&e>=0?this.toolObjects[e]:null}},{key:"getCurrentObject",value:function(){return this.getToolObject(this.getToolObjectCount()-1)}},{key:"getSelectedObject",value:function(){return this.getToolObject(this.selectedObject)}},{key:"delCurrentObject",value:function(){this.toolObjects.splice(this.getToolObjectCount()-1,1)}},{key:"delSelectedObject",value:function(){this.toolObjects.splice(this.selectedObject,1),this.selectedObject=-1}},{key:"delRulerObject",value:function(){for(var e=0,t=0;e<2&&this.toolObjects.length;++e)this.toolObjects[this.toolObjects.length-t-1]instanceof f.default&&this.toolObjects[this.toolObjects.length-t-1].getState()===h.STATE_AFTER?this.toolObjects.splice(this.toolObjects.length-t-1,1):++t}},{key:"acceptMouseMoveEvent",value:function(e,t){if(this.selectedObject==-1){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!=n&&n.getState()!=h.STATE_AFTER)return n.acceptMouseMoveEvent(e,t)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()==h.STATE_DRAWING)return r.acceptMouseMoveEvent(e,t);r.unselect(),this.selectedObject=-1}for(var i in this.toolObjects)if(this.toolObjects[i].isSelected(e,t))return this.selectedObject=i,!1;return!1}},{key:"acceptMouseDownEvent",value:function(e,t){if(this.mouseDownMove=!1,this.selectedObject==-1){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!=n&&n.getState()!=h.STATE_AFTER)return n.acceptMouseDownEvent(e,t)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()!=h.STATE_BEFORE)return r.acceptMouseDownEvent(e,t)}return!1}},{key:"acceptMouseDownMoveEvent",value:function(e,t){if(this.mouseDownMove=!0,this.selectedObject==-1){var n=this.toolObjects[this.getToolObjectCount()-1];return null!=n&&n.getState()==h.STATE_DRAWING&&n.acceptMouseDownMoveEvent(e,t)}var r=this.toolObjects[this.selectedObject];if(r.getState()!=h.STATE_BEFORE){if(1==r.acceptMouseDownMoveEvent(e,t))for(var i=this.toolObjects[this.selectedObject].points,a=0;a<i.length;a++)if(i[a].state==p.STATE_HIGHLIGHT||i[a].state==p.STATE_SHOW)return!0;return!0}}},{key:"acceptMouseUpEvent",value:function(e,t){if(1==this.mouseDownMove){if(this.selectedObject==-1){var n=this.toolObjects[this.getToolObjectCount()-1];return null==n||n.getState()!=h.STATE_DRAWING||n.acceptMouseUpEvent(e,t)}var r=this.toolObjects[this.selectedObject];if(r.getState()!=h.STATE_BEFORE)return r.acceptMouseUpEvent(e,t)}if(this.selectedObject!=-1)return!0;var n=this.toolObjects[this.getToolObjectCount()-1];if(null!=n){if(n.getState()==h.STATE_DRAWING)return!0;if(!n.isValidMouseXY(e,t))return!1;if(n.isSelected(e,t))return!0}return!1}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n(4)),c=i(l),f=n(276),h=i(f),p=n(491),d=i(p),y=n(297),g=n(496),_=i(g),v=n(498),m=i(v),b=n(499),E=i(b),O=n(497),T=i(O),w=n(300),P=n(366),x=n(255),I=r(x),S=(n(500),n(275)),C=(i(S),n(301),function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.periodsPopupBodyHover=!1,n.updateTimerTimeout=null,n.updateTimerLoop=n.updateTimerLoop.bind(n),n.onTopNavSwitchBtnClick=n.onTopNavSwitchBtnClick.bind(n),n.onWinResize=n.onWinResize.bind(n),n.handlePeriodsPopupBodyHover=n.handlePeriodsPopupBodyHover.bind(n),n.handlePeriodsPopupBodyOut=n.handlePeriodsPopupBodyOut.bind(n),n.allPeriods=[w.PERIOD_MONTH,w.PERIOD_WEEK,w.PERIOD_3DAYS,w.PERIOD_DAY,w.PERIOD_12HOURS,w.PERIOD_6HOURS,w.PERIOD_4HOURS,w.PERIOD_2HOURS,w.PERIOD_HOUR,w.PERIOD_30MINUTES,w.PERIOD_15MINUTES,w.PERIOD_10MINUTES,w.PERIOD_5MINUTES,w.PERIOD_3MINUTES,w.PERIOD_MINUTE],n.periods=[w.PERIOD_MONTH,w.PERIOD_WEEK,w.PERIOD_DAY,w.PERIOD_HOUR,w.PERIOD_30MINUTES,w.PERIOD_15MINUTES,w.PERIOD_10MINUTES,w.PERIOD_5MINUTES,w.PERIOD_3MINUTES,w.PERIOD_MINUTE],n.state={periods:n.periods.slice(),periodDropdown:I.difference(n.allPeriods,n.periods),periodStyle:{top:0,right:0}},n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){h.default.setAppElement(this.refs.main),this.handlePeriodsPopupBodyHover(),this.periodsPopupBodyHover=!1}},{key:"componentWillReceiveProps",value:function(e){e.timer.update!==this.props.timer.update&&this.updateTimerLoop()}},{key:"updateTimerLoop",value:function(){var e=function(){var t=this.props.dispatch;t((0,y.incrTimer)()),this.updateTimerTimeout=(0,w.sleep)(1e3,e)}.bind(this);clearTimeout(this.updateTimerTimeout),this.updateTimerTimeout=(0,w.sleep)(1e3,e)}},{key:"openModal",value:function(e,t,n){var r=this.props.dispatch;r((0,y.openModal)(e,t,n))}},{key:"switchPeriod",value:function(e){var t=this.props.dispatch;t((0,y.switchPeriod)(e))}},{key:"toggleTheme",value:function(){var e=this.props,t=e.dispatch,n=e.meta;n.onWidget&&n.disableThemeChange||t((0,y.toggleTheme)())}},{key:"toggleTools",value:function(){var e=this.props.dispatch;e((0,y.toggleLeftBar)())}},{key:"toggleFullScreen",value:function(){var e=this.props,t=e.dispatch,n=e.meta;n.onWidget||t((0,y.toggleFullScreen)())}},{key:"handlePeriodsPopupBodyHover",value:function(){if(!this.periodsPopupBodyHover){this.props.dispatch;this.periodsPopupBodyHover=!0;var e=this.refs,t=e.$top,n=e.periodsPopup;this.setState({periodStyle:{top:n.offsetTop+n.offsetHeight,right:t.offsetWidth-n.offsetLeft-n.offsetWidth}})}}},{key:"handlePeriodsPopupBodyOut",value:function(){this.periodsPopupBodyHover=!1}},{key:"onTopNavSwitchBtnClick",value:function(){var e=this.props.dispatch;e((0,y.toggleTopNav)())}},{key:"onMarketSelectorClick",value:function(e){var t=this.props.meta;return t.allowedWidgetMarkets?this.openModal("选择交易市场",t.allowedWidgetMarkets?E.default:m.default,"market-modal"):void(t.onWidget||this.refs.marketLink.contains(e.target)||this.openModal("选择交易市场",m.default,"market-modal"))}},{key:"onWinResize",value:function(){var e=this.refs,t=e.$topWrapper,n=e.$market,r=e.$indicator,i=e.$settings,a=e.$theme,o=e.$tools,s=void 0,u=void 0,l=t.offsetWidth-n.offsetWidth-r.offsetWidth-i.offsetWidth-(a?a.offsetWidth:0)-o.offsetWidth-20-60,c=Math.floor(l/54);c>=9?(s=this.periods.slice(),u=I.difference(this.allPeriods,s)):8===c?(s=this.periods.slice(),s.splice(s.indexOf(w.PERIOD_3MINUTES),1),u=I.difference(this.allPeriods,s)):7===c?(s=this.periods.slice(),s.splice(s.indexOf(w.PERIOD_3MINUTES),1),s.splice(s.indexOf(w.PERIOD_10MINUTES),1),u=I.difference(this.allPeriods,s)):c>=2?(s=this.periods.slice(),s.splice(s.indexOf(w.PERIOD_3MINUTES),1),s.splice(s.indexOf(w.PERIOD_10MINUTES),1),s=s.slice(0,c),u=I.difference(this.allPeriods,s)):(s=[],u=this.allPeriods.slice()),this.setState({periods:s,periodDropdown:u})}},{key:"render",value:function(){var e=this,t=this.props.selectPeriod,n=this.props.selectMarket,r=n.market,i=n.marketName,a=n.coinSymbol,o=n.currency,s=this.props,u=s.dispatch,l=s.meta,f=s.leftBar,h=s.topNav,p=(s.$tickers,s.scale),y=s.periodData,g=s.$depth,v=s.$trade,m=s.dayOpen,b=s.selectIndicators,E=(s.toggleModal,s.selectMarket),O=s.selectPeriod,w=s.selectTheme,x=(s.periodsPopupBodyStyle,s.fullscreen),S=s.timer,C=(s.selectSetting,s.selectMainIndicator),A=s.selectStickStyle,R=s.indicatorParams,k=s.asyncStatus,M=s.selectTool,D=s.asyncQuotaStatus,N=s.selectSubComponent,L=s.resumeSocketStream,j=I.findIndex(this.state.periodDropdown,t)>-1;return c.default.createElement("div",{id:"main",ref:"main"},c.default.createElement("div",{id:"top",ref:"$top",className:"flex-none"+(h?"":" closed")},c.default.createElement("div",{className:"wrap",ref:"$topWrapper"},c.default.createElement("div",{className:"popup",ref:"$market"},l.hideMarketName?null:c.default.createElement("div",{className:"popup-header",onClick:function(t){return e.onMarketSelectorClick(t)}},c.default.createElement("h2",{className:"popup-selected-value text-primary"
},c.default.createElement("span",{className:"text-primary",ref:"marketLink"},i+"-"+a+"-"+o),l.onWidget?null:c.default.createElement("a",{className:"icon link",ref:"marketLink",href:r.url,target:"_blank"},c.default.createElement("span",{className:"text-hide"},i+"-"+a+"-"+o))),l.onWidget?null:c.default.createElement("span",{className:"popup-handler-icon"},c.default.createElement("span",{className:"icon icon-option-vertical"})))),c.default.createElement("div",{className:"popup",ref:"$indicator"},c.default.createElement("div",{className:"popup-header",onClick:function(){return e.openModal("技术指标",_.default)}},c.default.createElement("span",{className:"popup-selected-value"},"指标"),c.default.createElement("span",{className:"popup-handler-icon"},c.default.createElement("span",{className:"icon icon-option-vertical"})))),c.default.createElement("div",{className:"popup",ref:"$settings"},c.default.createElement("div",{className:"popup-header",onClick:function(){return e.openModal("设置",T.default,"setting-modal")}},c.default.createElement("span",{className:"popup-selected-value"},"设置"),c.default.createElement("span",{className:"popup-handler-icon"},c.default.createElement("span",{className:"icon icon-option-vertical"})))),l.disableThemeChange?null:c.default.createElement("a",{id:"theme_setting",onClick:function(){return e.toggleTheme()},ref:"$theme","data-tip":"切换为"+(w===P.THEME_DARK?"亮色调":"暗色调"),"data-for":"tooltip_bottom"},c.default.createElement("span",{className:"icon icon-theme"})),c.default.createElement("a",{id:"tool_switch",onClick:function(){return e.toggleTools()},ref:"$tools",className:f?"active":"","data-tip":(f?"关闭":"打开")+"画图工具","data-for":"tooltip_bottom"},c.default.createElement("span",{className:"icon icon-brush"})),c.default.createElement("div",{id:"periods"},this.state.periods.map(function(n){var r=I.isEqual(n,t);return c.default.createElement("a",{key:n.period,className:r?"active":"",onClick:function(){return e.switchPeriod(n)}},n.name)}),c.default.createElement("div",{ref:"periodsPopup",className:" dropdown-hover",id:"period_dropdown"},c.default.createElement("div",{className:"dropdown-head",onMouseOver:this.handlePeriodsPopupBodyHover,onMouseOut:this.handlePeriodsPopupBodyOut},c.default.createElement("span",{className:"selected-value"+(j?" active":"")},j?t.name:"更多"),c.default.createElement("span",{className:"icon icon-triangle"})),c.default.createElement("div",{ref:"periodPopupBody",className:"dropdown-body",style:this.state.periodStyle},c.default.createElement("table",null,c.default.createElement("tbody",null,I.chunk(this.state.periodDropdown,6).map(function(n,r){return c.default.createElement("tr",null,c.default.createElement("td",null,n.map(function(n){var r=I.isEqual(n,t);return c.default.createElement("a",{key:n.period,className:r?"active":"",onClick:function(){return e.switchPeriod(n)}},n.name)})))})))))),c.default.createElement("div",{className:"fixed-right"},c.default.createElement("span",{id:"updated_at"},S.counter,"秒"),l.onWidget?null:c.default.createElement("a",{id:"screen_control",onClick:function(){return e.toggleFullScreen()},className:x?"fullscreen":"","data-tip":x?"退出全屏":"全屏展示","data-for":"tooltip_bottom"},c.default.createElement("span",{className:"icon icon-screen-control"})))),c.default.createElement("a",{href:"javascript:void(0);",className:"btn-switch",title:(h?"隐藏":"展开")+"顶部",onClick:this.onTopNavSwitchBtnClick},c.default.createElement("span",{className:"triangle"}))),c.default.createElement(d.default,{dispatch:u,leftBar:f,topNav:h,scale:p,periodData:y,$depth:g,$trade:v,dayOpen:m,selectIndicators:b,selectMarket:E,selectPeriod:O,selectTheme:w,selectMainIndicator:C,selectStickStyle:A,indicatorParams:R,selectTool:M,asyncQuotaStatus:D,fullscreen:x,selectSubComponent:N,resumeSocketStream:L,onWinResize:this.onWinResize}),c.default.createElement("div",{id:"loading",className:"flex-none "+(k.loading?"show":"hidden")},c.default.createElement("div",{className:"inner"},c.default.createElement("div",{className:"text"},"正在加载…"))))}}]),t}(c.default.Component));t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t,n;return t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,n=(window.devicePixelRatio||1)/t,Math.ceil(n)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),c=r(l),f=n(255),h=n(256),p=(r(h),n(297)),d=(n(300),n(366),n(492)),y=n(355),g=r(y),_=n(367),v=(r(_),function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.dragged=!1,s.handleMouseOverLogo=s.handleMouseOverLogo.bind(s),s.handleMouseLeaveLogo=s.handleMouseLeaveLogo.bind(s),s.handleWinResize=s.handleWinResize.bind(s),s.handleWinResizeDebounced=(0,f.debounce)(s.handleWinResize,120),s.state={hoverOnLogo:!1},s}return o(t,e),u(t,[{key:"handleMouseOverLogo",value:function(){this.setState({hoverOnLogo:!0})}},{key:"handleMouseLeaveLogo",value:function(){this.setState({hoverOnLogo:!1})}},{key:"componentDidMount",value:function(){var e=this.props,t=(e.dispatch,e.resumeSocketStream),n=e.onWinResize,r=e.selectMarket,i=e.selectPeriod,a=this.refs.canvas_group,o=this.refs.main_canvas,u=this.refs.overlay_canvas,l=a.offsetWidth,c=a.offsetHeight;c<150&&(c=150),l<300&&(l=300);var f=s(o);o.style.width=u.style.width=l+"px",o.style.height=u.style.height=c+"px",o.width=u.width=l*f,o.height=u.height=c*f,o.getContext("2d").scale(f,f),u.getContext("2d").scale(f,f),(0,d.bindCanvas)(o,u,r.coin.symbol,i.period),n(),window.addEventListener("resize",this.handleWinResizeDebounced);var h=g.default.getInstance();h.setRatio(f),console.log("ratio",f),h.updateDataAndDisplay(!0,t)}},{key:"componentWillReceiveProps",value:function(e){g.default.getInstance(),this.props.dispatch;e.fullscreen!==this.props.fullscreen&&this.handleWinResizeDebounced(),"EMPTY"!==e.selectSubComponent.id&&"EMPTY"!==this.props.selectSubComponent.id||e.selectSubComponent.id===this.props.selectSubComponent.id||this.handleWinResizeDebounced(),e.topNav!==this.props.topNav&&this.handleWinResizeDebounced(),e.leftBar!==this.props.leftBar&&this.handleWinResizeDebounced()}},{key:"handleWinResize",value:function(){var e=this.props,t=(e.dispatch,e.onWinResize),n=this.refs.canvas_group,r=this.refs.main_canvas,i=this.refs.overlay_canvas,a=n.offsetWidth,o=n.offsetHeight;o<150&&(o=150),a<300&&(a=300);var u=s(r);r.style.width=i.style.width=a+"px",r.style.height=i.style.height=o+"px",r.width=i.width=a*u,r.height=i.height=o*u,r.getContext("2d").scale(u,u),i.getContext("2d").scale(u,u),t();var l=g.default.getInstance();l.setRatio(u),l.redraw("All",!0)}},{key:"handleContextMenu",value:function(e){return e.bubbles=!1,e.preventDefault(),e.stopPropagation(),!1}},{key:"handleMouseMove",value:function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,i=g.default.getInstance();this.dragged?(i.onMouseMove("frame0",n,r,!0),i.redraw("All",!1)):(i.onMouseMove("frame0",n,r,!1),i.redraw("OverlayCanvas"))}},{key:"handleMouseLeave",value:function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,i=g.default.getInstance();i.onMouseLeave("frame0",n,r,!1),i.redraw("OverlayCanvas")}},{key:"handleMouseUp",value:function(e){if(0===e.button){this.dragged=!1;var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,i=g.default.getInstance();i.onMouseUp("frame0",n,r),i.redraw("All")}}},{key:"handleMouseDown",value:function(e){var t=g.default.getInstance(),n=this.props.dispatch;if(t.deleteRulerToolObject(),0!==e.button)return t.deleteToolObject(),n((0,p.switchTool)(t._beforeDrawingTool)),void t.redraw("OverlayCanvas");this.dragged=!0;var r=e.target.getBoundingClientRect(),i=e.clientX-r.left,a=e.clientY-r.top;t.onMouseDown("frame0",i,a)}},{key:"handleMouseWheel",value:function(e){e.stopPropagation(),e.preventDefault();var t=g.default.getInstance(),n=e.deltaX|e.deltaY,r=t.scale(e,n<0?1:-1);!0===r&&t.redraw("All",!0)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{id:"canvas_group",ref:"canvas_group"},c.default.createElement("canvas",{id:"main_canvas",ref:"main_canvas"}),c.default.createElement("canvas",{id:"overlay_canvas",ref:"overlay_canvas",onContextMenu:function(t){e.handleContextMenu(t)},onMouseMove:function(t){e.handleMouseMove(t)},onMouseLeave:function(t){e.handleMouseLeave(t)},onMouseUp:function(t){e.handleMouseUp(t)},onMouseDown:function(t){e.handleMouseDown(t)},onWheel:function(t){e.handleMouseWheel(t)}}))}}]),t}(c.default.Component));t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){var i=s.default.getInstance();i.bindCanvas("main",e),i.bindCanvas("overlay",t),l.default.loadTemplate("frame0.k0",n+"."+r,"frame0.order","0.order","frame0.trade","0.trade")}function a(e){var t=s.default.getInstance();t.updateDataSource(e),t.redraw("all",!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.bindCanvas=i,t.updateData=a;var o=n(355),s=r(o),u=n(493),l=r(u),c=n(367);r(c),n(366),n(300)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(406),s=r(o),u=n(355),l=r(u),c=n(367),f=(r(c),n(358)),h=n(494),p=r(h),d=n(404),y=n(495),g=r(y),_=n(366),v=function(){function e(){i(this,e)}return a(e,null,[{key:"loadTemplate",value:function(e,t,n,r,i,a){var o=l.default.getInstance(),u=new f.CName(e).getCompAt(0);o.unloadTemplate(u),s.default.createDataSource(e,t,s.default.createCandlestickDataSource);var c=new p.default(u);o.setFrame(c.getName(),c),o.setArea(c.getName(),c),c.setGridColor(_.GRIDS);var h=new d.TimelineArea(e+".timeline");o.setArea(h.getName(),h),c.addArea(h),h.setDockStyle(d.DOCK_STYLE_BOTTOM),h.Measuring.addHandler(h,s.default.onMeasuring);var y=new g.default(e+".charts");return o.setArea(y.getName(),y),y.setDockStyle(d.DOCK_STYLE_FILL),c.addArea(y),s.default.createTableComps(e),o}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(403),c=r(l),f=n(355),h=r(f),p=n(404),d=n(366),y=(n(300),function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"measure",value:function(e,n,r){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"measure",this).call(this,e,n,r),n=this.getMeasuredWidth(),r=this.getMeasuredHeight();for(var i in this._areas){var a=this._areas[i];switch(a.measure(e,n,r),a.getDockStyle()){case p.DOCK_STYLE_LEFT:case p.DOCK_STYLE_RIGHT:n-=a.getMeasuredWidth();break;case p.DOCK_STYLE_TOP:case p.DOCK_STYLE_BOTTOM:r-=a.getMeasuredHeight();break;case p.DOCK_STYLE_FILL:n=0,r=0}}}},{key:"layout",value:function(e,n,r,i,a){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this,e,n,r,i,a),e=this.getLeft(),n=this.getTop(),r=this.getRight(),i=this.getBottom();var o,s;a||(a=this.isChanged());for(var l in this._areas){var c=this._areas[l];switch(c.getDockStyle()){case p.DOCK_STYLE_LEFT:o=c.getMeasuredWidth(),c.layout(e,n,e+o,i,a),e+=o;break;case p.DOCK_STYLE_TOP:s=c.getMeasuredHeight(),c.layout(e,n,r,n+s,a),n+=s;break;case p.DOCK_STYLE_RIGHT:o=c.getMeasuredWidth(),c.layout(r-o,n,r,i,a),r-=o;break;case p.DOCK_STYLE_BOTTOM:s=c.getMeasuredHeight(),c.layout(e,i-s,r,i,a),i-=s;break;case p.DOCK_STYLE_FILL:c.layout(e,n,r,i,a),e=r,n=i}}this.setChanged(!1)}},{key:"drawGrid",value:function(e){var t=(h.default.getInstance(),this.getLeft()),n=this.getTop(),r=this.getRight(),i=this.getBottom();e.fillStyle=(0,d.getThemeStyle)(d.GRIDS,1);for(var a in this._areas){var o=this._areas[a];switch(o.getDockStyle()){case p.DOCK_STYLE_LEFT:e.fillRect(o.getRight(),n,1,i-n),t+=o.getWidth();break;case p.DOCK_STYLE_TOP:e.fillRect(t,o.getBottom(),r-t,1),n+=o.getHeight();break;case p.DOCK_STYLE_RIGHT:e.fillRect(o.getLeft(),n,1,i-n),r-=o.getWidth();break;case p.DOCK_STYLE_BOTTOM:e.fillRect(t,o.getTop(),r-t,1),i-=o.getHeight()}}}}]),t}(c.default));t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(403),c=r(l),f=n(355),h=r(f),p=n(367),d=r(p),y=n(366),g=n(364),_=r(g),v=n(300),m=n(297),b=n(496),E=(r(b),n(497)),O=r(E),T=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._nextRowId=0,n._focusedRowIndex=-1,n._hoverRowIndex=-1,n._hoverIndicatorIndex=-1,n}return o(t,e),s(t,[{key:"updateNextRowId",value:function(){return this._nextRowId=0}},{key:"getNextRowId",value:function(){return this._nextRowId++}},{key:"measure",value:function(e,t,n){this.setMeasuredDimension(t,n);var r,i,a,o,s=0,u=0,l=[],c=this._areas.length;for(o=0;o<c;o+=2){if(r=this._areas[o].getHeight(),0==r){if(0==o){a=c+1>>1;var f=2*a+5,p=n/f*2<<0;for(i=n,o=a-1;o>0;o--)l.unshift(p),i-=p;l.unshift(i);break}r=2==o?s/4:s}u+=r,s=r,l.push(r)}if(u>0){var d=n/u;for(a=c+1>>1,i=n,o=a-1;o>0;o--)l[o]*=d,i-=l[o];l[0]=i}var y=8,g=80,_=Math.min(240,t>>1),v=g,m=h.default.getInstance(),b=m.getTimeline(this.getDataSourceName()),E=m.getDataScale(),O=E.enlarge.toString().length+1;if(b.getFirstIndex()>=0){var T=[];for(v=g;v<_;v+=y)T.push(b.calcFirstIndex(b.calcColumnCount(t-v)));var w,P,x=b.getLastIndex(),I=[".main",".secondary"],S=new Array(T.length);for(w=0,P=0,v=g;w<this._areas.length&&P<T.length;w+=2){var C=this._areas[w],A=C.getName(),R=m.getPlotter(A+"Range.main"),k=m.getRange(A),M=k.getRange();if(0!==M&&M!==1/0)for(var D in I){var N=m.getDataProvider(A+I[D]);if(void 0!=N)for(N.calcRange(T,x,S,null);P<T.length;){var L=S[P],j=L.min,F=L.max;if(j>0&&F>0&&j!==1/0&&F!==1/0){var B=R.getRequiredWidth(e,j.toFixed(O)),H=R.getRequiredWidth(e,F.toFixed(O));if(Math.max(B,H)<=v)break;v+=y}P++}}}}for(o=1;o<this._areas.length;o+=2)this._areas[o].measure(e,v,l[o>>1]);var V=t-v;for(o=0;o<this._areas.length;o+=2)this._areas[o].measure(e,V,l[o>>1])}},{key:"layout",value:function(e,n,r,i,a){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this,e,n,r,i,a),!(this._areas.length<1)){var o,s,l=e+this._areas[0].getMeasuredWidth(),c=n;a||(a=this.isChanged());var f,h=this._areas.length;for(f=0;f<h;f++)o=this._areas[f],s=c+o.getMeasuredHeight(),o.layout(e,c,l,s,a),f++,o=this._areas[f],o.layout(l,c,this.getRight(),s,a),c=s;this.setChanged(!1)}}},{key:"drawGrid",value:function(e){if(!(this._areas.length<1)){e.fillStyle=(0,y.getThemeStyle)(y.GRIDS,1);var t,n=this._areas.length-2;for(t=0;t<n;t+=2)e.fillRect(this.getLeft(),this._areas[t].getBottom(),this.getWidth(),1)}}},{key:"highlight",value:function(e){this._highlightedArea=null;var t,n,r=this._areas.length;for(n=0;n<r;n++)t=this._areas[n],t==e?(n&=-2,t=this._areas[n],t.highlight(t),this._highlightedArea=t,n++,t=this._areas[n],t.highlight(null),t.highlight(t)):t.highlight(null);return null!=this._highlightedArea?this:null}},{key:"select",value:function(e){this._selectedArea=null;var t,n,r=this._areas.length;for(n=0;n<r;n++)t=this._areas[n],t==e?(n&=-2,t=this._areas[n],t.select(t),this._selectedArea=t,n++,t=this._areas[n],t.select(t)):t.select(null);return null!=this._selectedArea?this:null}},{key:"onMouseMove",value:function(e,t){var n=h.default.getInstance();if(this._focusedRowIndex>=0){var r=this._areas[this._focusedRowIndex],i=this._areas[this._focusedRowIndex+2],a=t-this._oldY;if(0==a)return this;var o=this._oldUpperBottom+a,s=this._oldLowerTop+a;return o-r.getTop()>=60&&i.getBottom()-s>=60&&(r.setBottom(o),i.setTop(s)),this}var u=void 0,l=this._areas.length,c=void 0,f=void 0,p=void 0;for(u=0;u<l;u+=2){var d=this._areas[u],y=d.getBottom();if(u<l-2&&t>=y-4&&t<y+4)return n.showCursor("n-resize"),this;n.showCursor("default");var g,v,m=d.getAreaName(),b=n.getRange(m),E=n.getIndicator(m);if(b.isIndicatorNavShown()&&t>=y-24&&t<y){for(this._hoverRowIndex=u,c=0,f=E.indicators.length;c<f;++c)g=E.indicators[c],v=g.x<=e&&g.width+g.x>=e,v&&(this._hoverIndicator=g.key),p=p||v,g.hover=v;return p?n.showCursor("pointer"):(this._hoverIndicator=null,n.showCursor("default")),this}this._hoverRowIndex>-1&&(this._hoverRowIndex=-1)}var O=_.default.iconRef,T=void 0,w=void 0;for(p=!1,u=0,l=O.length;u<l;++u)T=O[u],w=T.x<=e&&T.y<=t&&T.x+T.w>=e&&T.y+T.h>=t,p=p||w,T.hover=w;return p?(n.showCursor("pointer"),this):null}},{key:"onMouseLeave",value:function(e,t){this._focusedRowIndex=-1,this._hoverRowIndex=-1,this._hoverIndicator=null}},{key:"onMouseDown",value:function(e,t){var n,r=this._areas.length-2;for(n=0;n<r;n+=2){var i=this._areas[n].getBottom();if(t>=i-4&&t<i+4)return this._focusedRowIndex=n,this._oldY=t,this._oldUpperBottom=i,this._oldLowerTop=this._areas[n+2].getTop(),this}var a=_.default.iconRef,o=void 0,s=h.default.getInstance(),u=(this._hoverRowIndex>>1)-1;if(u>=0&&null!=this._hoverIndicator)return s.dispatch((0,m.setIndicatorByIndex)(u,this._hoverIndicator)),this;for(n=0,r=a.length;n<r;++n)if(o=a[n],!0===o.hover){switch(o.id){case"delete":var l=d.default.indicators;l.splice(o.idx-1,1),s.dispatch((0,m.setIndicators)(l)),d.default.indicators=l;break;case"setting":s.dispatch((0,m.showSetting)(v.SETTING_INDICATOR_PARAMS)),s.dispatch((0,m.openModal)("设置",O.default,"setting-modal"))}return this}return null}},{key:"onMouseUp",value:function(e,t){if(this._focusedRowIndex>=0){this._focusedRowIndex=-1;var n,r=this._areas.length,i=[];for(n=0;n<r;n+=2)i.push(this._areas[n].getHeight());d.default.areaHeight=i}return this}}]),t}(c.default);t.default=T},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),c=i(l),f=n(276),h=(i(f),n(255)),p=r(h),d=n(300),y=n(297),g=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.closeModal=s.closeModal.bind(s),s.toggleIndicator=s.toggleIndicator.bind(s),s.setDefaultIndicators=s.setDefaultIndicators.bind(s),s.onIndicatorNavClick=s.onIndicatorNavClick.bind(s),s}return s(t,e),u(t,[{key:"closeModal",value:function(){var e=this.props.dispatch;e((0,y.closeModal)())}},{key:"setDefaultIndicators",value:function(){var e=this.props.dispatch;e((0,y.setIndicators)([d.INDICATOR_VOLUME,d.INDICATOR_MACD])),e((0,y.closeModal)())}},{key:"toggleIndicator",value:function(e,t){var n=this.props.dispatch;n((0,y.switchIndicator)(t?y.DEL_INDICATOR:y.ADD_INDICATOR,e))}},{key:"onIndicatorNavClick",value:function(){var e=this.props,t=e.dispatch,n=e.selectIndicators;t((0,y.switchIndicatorNav)(!n.indicatorNav))}},{key:"render",value:function(){var e=this,t=this.props.selectIndicators,n=t.indicators,r=t.indicatorNav,i=t.maxIndicator,a=n.length>=i;return c.default.createElement("div",null,c.default.createElement("div",{className:"modal-body"},c.default.createElement("div",{className:"indicator-selection"},c.default.createElement("div",null,d.INDICATORS.map(function(t){var r=p.indexOf(n,t.key)>-1;return c.default.createElement("a",{className:"radio"+((r?" checked":"")+(!r&&a?" disabled":"")),key:t.key,onClick:function(){return e.toggleIndicator(t.key,r)}},c.default.createElement("span",{className:"icon checkbox"}),t.name)})))),c.default.createElement("div",{className:"modal-footer"},c.default.createElement("div",{id:"indicator_nav_setting"},c.default.createElement("a",{href:"javascript:void(0);",className:r?"checked":"",onClick:this.onIndicatorNavClick},c.default.createElement("span",{className:"icon checkbox"}),c.default.createElement("span",null,"快捷显示指标"))),c.default.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.closeModal},"保存"),c.default.createElement("button",{type:"button",className:"btn btn-default",onClick:this.setDefaultIndicators},"恢复默认")))}}]),t}(c.default.Component);t.default=g,g.propNames=["selectIndicators"],g.AdditionalHeader=c.default.createElement("span",{id:"max_indicator_tip"},"暂时仅支持最多 3 个技术指标哦")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),c=i(l),f=n(276),h=(i(f),n(255)),p=r(h),d=(n(157),n(297)),y=n(300),g=n(366),_=n(367),v=i(_),m=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.closeModal=s.closeModal.bind(s),s}return s(t,e),u(t,[{key:"closeModal",value:function(){var e=this.props.dispatch;e((0,d.closeModal)())}},{key:"showSetting",value:function(e){var t=this.props.dispatch;t((0,d.showSetting)(e))}},{key:"switchMainIndicator",value:function(e){var t=this.props.dispatch;t((0,d.switchMainIndicator)(e))}},{key:"switchStickStyle",value:function(e){var t=this.props.dispatch;t((0,d.switchStickStyle)(e))}},{key:"switchAxisScale",value:function(e){var t=this.props.dispatch;t((0,d.switchAxisScale)(e))}},{key:"switchTheme",value:function(e){var t=this.props,n=t.dispatch,r=t.meta;r.onWidget&&r.disableThemeChange||(n((0,d.switchTheme)(e)),n((0,d.closeModal)()))}},{key:"switchTools",value:function(e){var t=this.props.dispatch;t((0,d.toggleLeftBar)(e))}},{key:"resetIndicatorParams",value:function(e){var t=this.props.dispatch;t((0,d.setIndicatorParams)(e,v.default[e+"DefaultParams"]))}},{key:"handleIndicatorParamInputChange",value:function(e,t,n){var r=p.trim(n.target.value);if(r.length){if(r=parseInt(r),p.isNaN(r))return;r<0&&(r=0)}var i=this.props.dispatch;i((0,d.setIndicatorSingleParam)(e,t,r))}},{key:"onIndicatorParamInputBlur",value:function(e,t,n){var r=p.trim(n.target.value);if(r=parseInt(r),p.isNaN(r)){if(r)return;r=0}r<0&&(r=0);var i=this.props.dispatch;i((0,d.setIndicatorSingleParam)(e,t,r))}},{key:"render",value:function(){var e=this,t=this.props,n=t.meta,r=t.selectSetting,i=t.selectMainIndicator,a=t.selectStickStyle,o=t.selectAxisScale,s=t.selectTheme,u=t.indicatorParams,l=t.leftBar;return c.default.createElement("div",null,c.default.createElement("div",{className:"modal-body no-padding"},c.default.createElement("ul",{id:"setting_list"},c.default.createElement("li",{className:r===y.SETTING_MAIN_INDICATOR?"active":""},c.default.createElement("h5",null,c.default.createElement("a",{onClick:function(){return e.showSetting(y.SETTING_MAIN_INDICATOR)}},"主指标")),c.default.createElement("ul",{className:"settings"},y.MAIN_INDICATORS.map(function(t){var n=t===y.INDICATOR_NONE;return c.default.createElement("li",{key:t},c.default.createElement("a",{className:"radio"+(i===t?" checked":""),onClick:function(){return e.switchMainIndicator(t)}},c.default.createElement("span",{className:"icon checkbox"}),n?"关闭":t))}))),c.default.createElement("li",{className:r===y.SETTING_STICK_STYLE?"active":""},c.default.createElement("h5",null,c.default.createElement("a",{onClick:function(){return e.showSetting(y.SETTING_STICK_STYLE)}},"主图样式")),c.default.createElement("ul",{className:"settings"},y.STICK_STYLES.map(function(t){return c.default.createElement("li",{key:t},c.default.createElement("a",{className:"radio"+(a===t?" checked":""),onClick:function(){return e.switchStickStyle(t)}},c.default.createElement("span",{className:"icon checkbox"}),t))}))),c.default.createElement("li",{className:r===y.SETTING_AXIS_SCALE?"active":""},c.default.createElement("h5",null,c.default.createElement("a",{onClick:function(){return e.showSetting(y.SETTING_AXIS_SCALE)}},"坐标比例")),c.default.createElement("ul",{className:"settings"},y.AXIS_SCALES.map(function(t){return c.default.createElement("li",{key:t.key},c.default.createElement("a",{className:"radio"+(o===t.key?" checked":""),onClick:function(){return e.switchAxisScale(t.key)}},c.default.createElement("span",{className:"icon checkbox"}),t.name))}))),n.onWidget&&n.disableThemeChange?null:c.default.createElement("li",{className:r===y.SETTING_THEME?"active":""},c.default.createElement("h5",null,c.default.createElement("a",{onClick:function(){return e.showSetting(y.SETTING_THEME)}},"主题选择")),c.default.createElement("ul",{className:"settings"},c.default.createElement("li",null,c.default.createElement("a",{className:"radio"+(s===g.THEME_DARK?" checked":""),onClick:function(){return e.switchTheme(g.THEME_DARK)}},c.default.createElement("span",{className:"icon checkbox"}),"暗色调")),c.default.createElement("li",null,c.default.createElement("a",{className:"radio"+(s===g.THEME_LIGHT?" checked":""),onClick:function(){return e.switchTheme(g.THEME_LIGHT)}},c.default.createElement("span",{className:"icon checkbox"}),"亮色调")))),c.default.createElement("li",{className:r===y.SETTING_TOOLS?"active":""},c.default.createElement("h5",null,c.default.createElement("a",{onClick:function(){return e.showSetting(y.SETTING_TOOLS)}},"画图工具")),c.default.createElement("ul",{className:"settings"},c.default.createElement("li",null,c.default.createElement("a",{className:"radio"+(l===!0?" checked":""),onClick:function(){return e.switchTools(!0)}},c.default.createElement("span",{className:"icon checkbox"}),"打开")),c.default.createElement("li",null,c.default.createElement("a",{className:"radio"+(l!==!0?" checked":""),onClick:function(){return e.switchTools(!1)}},c.default.createElement("span",{className:"icon checkbox"}),"关闭")))),c.default.createElement("li",{className:r===y.SETTING_INDICATOR_PARAMS?"active":""},c.default.createElement("h5",null,c.default.createElement("a",{onClick:function(){return e.showSetting(y.SETTING_INDICATOR_PARAMS)}},"指标参数设置")),c.default.createElement("ul",{className:"settings indicator-params"},y.PARAM_INDICATORS.map(function(t){var n=v.default[t+"DefaultParams"],r=n.length,i=u[t];Array.isArray(i)||(i=n.slice());for(var a=[],o=0;o<r;++o)a.push(c.default.createElement("input",{key:o,type:"text",value:i[o],onChange:e.handleIndicatorParamInputChange.bind(e,t,o),onBlur:e.onIndicatorParamInputBlur.bind(e,t,o)}));return c.default.createElement("li",{key:t},c.default.createElement("label",null,t),a,c.default.createElement("button",{onClick:function(){return e.resetIndicatorParams(t)}},"默认值"))}))))))}}]),t}(c.default.Component);t.default=m,m.propNames=["meta","selectSetting","selectMainIndicator","selectStickStyle","selectAxisScale","selectTheme","indicatorParams","leftBar"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),l=r(u),c=n(276),f=(r(c),n(255)),h=n(157),p=n(297),d=n(300),y=n(301),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.closeModal=s.closeModal.bind(s),s}return o(t,e),s(t,[{key:"closeModal",value:function(){var e=this.props.dispatch;e((0,p.showMarket)(null)),e((0,p.closeModal)())}},{key:"showMarket",value:function(e){var t=this.props.dispatch;t((0,p.showMarket)(e))}},{key:"render",value:function(){var e=this,t=this.props.selectMarket,n=t.coin,r=t.showMarket;return l.default.createElement("div",null,l.default.createElement("div",{className:"modal-body no-padding"},l.default.createElement("ul",{id:"market_list"},d.MARKETS.filter(function(e){return!e.hidden||!e.hide_other}).map(function(t){var i=!1,a=n.mid===t.mid;i="string"==typeof r&&r.length?r===t.mid:a;var o=void 0;return a&&(o=l.default.createElement("span",{className:"icon star"})),l.default.createElement("li",{key:t.mid,className:i?"active":""},l.default.createElement("h5",null,o,l.default.createElement("a",{className:"name",onClick:function(){return e.showMarket(t.mid)}},y.get(t.name)),l.default.createElement("a",{href:t.url,target:"_blank",className:"icon link",rel:"nofollow"})),Array.isArray(t.currencies)&&t.currencies.length?l.default.createElement("dl",null,t.currencies.map(function(e){return[l.default.createElement("dt",{key:"header"},e.toUpperCase(),"定价")].concat(t[e+"_coins"].map(function(e){var t=e.symbol===n.symbol;return l.default.createElement("dd",{key:e.symbol,className:t?"active":""},l.default.createElement(h.Link,{to:"/"+e.coin+"_"+e.mid+".html"},(0,f.uniq)((0,d.getCoinName)(e,!0).slice(0,2)).join("")))}))})):null)}))))}}]),t}(l.default.Component);t.default=g,g.propNames=["selectMarket"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),l=r(u),c=n(276),f=(r(c),n(255)),h=(n(157),n(297)),p=n(300),d=n(301),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.closeModal=s.closeModal.bind(s),s.selectMarket=s.selectMarket.bind(s),s}return o(t,e),s(t,[{key:"closeModal",value:function(){var e=this.props.dispatch;e((0,h.showMarket)(null)),e((0,h.closeModal)())}},{key:"showMarket",value:function(e){var t=this.props.dispatch;t((0,h.showMarket)(e))}},{key:"selectMarket",value:function(e,t){var n=this.props.dispatch;n((0,h.switchMarket)(e,t)),n((0,h.closeModal)())}},{key:"render",value:function(){var e=this,t=this.props.selectMarket,n=t.coin;t.showMarket;return l.default.createElement("div",null,l.default.createElement("div",{className:"modal-body no-padding"},l.default.createElement("ul",{id:"dex_market_list"},p.COINS.map(function(t){var r=n.db_key===t.db_key,i=(0,f.find)(p.MARKETS,{mid:t.mid});return l.default.createElement("li",{key:t.mid,className:r?"active":""},l.default.createElement("a",{onClick:function(){return e.selectMarket(i,t)}},d.get(i.name),"-",(0,f.uniq)((0,p.getCoinName)(t,!0).slice(1)).join("/")))}))))}}]),t}(l.default.Component);t.default=y,y.propNames=["selectMarket"]},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),l=r(u),c=n(256),f=r(c),h=n(255),p=n(157),d=n(300),y=n(297),g=n(512),_=r(g),v=n(301),m=r(v),b=void 0,E=void 0,O=void 0,T=void 0;f.default.canUseDOM&&(b=m.default.get("global.coin_names.btc"),E=m.default.get("global.coin_names.ltc"),O=m.default.get("global.coin_names.eth"),T=m.default.get("global.coin_names.doge"));var w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.commonTickers=d.BTCTICKERKEYS.concat(d.LTCTICKERKEYS,d.ETHTICKERKEYS,d.DOGETICKERKEYS),n.tickerKeys=(0,h.union)(e.$user.tickers,n.commonTickers),n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.subscribeTickers;e(this.tickerKeys)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=(t.dispatch,t.subscribeTickers),r=t.unsubscribeTickers,i=!1,a=(0,h.union)(e.$user.tickers,this.commonTickers),o=(0,h.difference)(this.tickerKeys,a);o.length&&(i=!0,r(o));var s=(0,h.difference)(a,this.tickerKeys);s.length&&(i=!0,n(s)),i&&(this.tickerKeys=a)}},{key:"componentWillUnmount",value:function(){var e=this.props.unsubscribeTickers;e(this.tickerKeys)}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.$user,r=e.$tickers,i=e.tickerList,a=(0,h.pick)(r,n.tickers),o=(0,h.pick)(r,d.BTCTICKERKEYS),s=(0,h.pick)(r,d.LTCTICKERKEYS),u=(0,h.pick)(r,d.ETHTICKERKEYS),c=(0,h.pick)(r,d.DOGETICKERKEYS);return l.default.createElement("div",{id:"sub_component"},l.default.createElement("div",{id:"sub_component_header",className:"flex-none"},l.default.createElement("h3",null,"交易市场")),l.default.createElement("div",{id:"sub_component_body"},l.default.createElement("div",{id:"tickers",ref:"tickers"},l.default.createElement(P,{dispatch:t,tickers:n.tickerMarkets,$user:n,type:"custom",name:"自选市场",data:a}),d.BTCTICKERS.length?l.default.createElement(P,{dispatch:t,tickers:d.BTCTICKERS,type:"BTC",name:b,data:o,open:i.BTC}):null,d.LTCTICKERS.length?l.default.createElement(P,{dispatch:t,tickers:d.LTCTICKERS,type:"LTC",name:E,data:s,open:i.LTC}):null,d.ETHTICKERS.length?l.default.createElement(P,{dispatch:t,tickers:d.ETHTICKERS,type:"ETH",name:O,data:u,open:i.ETH}):null,d.DOGETICKERS.length?l.default.createElement(P,{dispatch:t,tickers:d.DOGETICKERS,type:"DOGE",name:T,data:c,open:i.DOGE}):null)))}}]),t}(l.default.Component);t.default=w;var P=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isCustom="custom"===e.type,n.isCustom?n.title=e.name:n.title=[e.name,e.type].join("/"),n.hasMore=!n.isCustom&&e.tickers.length>7,n.onCollapseClick=n.onCollapseClick.bind(n),n.onAddClick=n.onAddClick.bind(n),n}return o(t,e),s(t,[{key:"onCollapseClick",value:function(){var e=this.props,t=e.dispatch,n=e.type;t((0,y.toggleMoreTickers)(n))}},{key:"onAddClick",value:function(){var e=this.props,t=e.dispatch,n=e.$user;return n.logged?void t((0,y.openModal)("自选市场",_.default,"ticker-modal")):t((0,y.addNotification)({uid:"NOTLOGNOTIFICATION",title:"应用提示",message:"您还没有登录。请登录后再操作",autoDismiss:0,level:"error"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.tickers,i=t.data,a=t.open,o=!this.hasMore||a===!0;return l.default.createElement("table",{className:"tickers"+(this.isCustom?" custom-tickers":"")+(o?" collapsed":"")},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{className:"text-left"},this.title),l.default.createElement("th",null,"价格"),l.default.createElement("th",{className:"fixed-right"},"涨幅"))),l.default.createElement("tbody",null,[].concat(o?r:r.slice(0,7)).map(function(t){return l.default.createElement(x,{dispatch:n,ticker:t,data:i[t.db_key]||{},showFullName:e.isCustom,key:t.symbol})}).concat(this.isCustom?l.default.createElement("tr",{className:"add-row"},l.default.createElement("td",{colSpan:"3"},l.default.createElement("a",{href:"javascript:void(0);",className:"btn-add",title:"添加自选市场",onClick:this.onAddClick},l.default.createElement("span",{className:"add"})))):[]).concat(this.hasMore?l.default.createElement("tr",{className:"collapse-row"},l.default.createElement("td",{colSpan:"3"},l.default.createElement("a",{href:"javascript:void(0);",className:"btn-collapse",onClick:this.onCollapseClick,title:a?"收起":"展开更多"},l.default.createElement("span",{className:"chevron"})))):[])))}}]),t}(l.default.Component),x=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.ticker;return n.currencySymbol=(0,d.getCurrencySymbol)(r.currency),n.displayName=r.marketName,n.onTickerClick=n.onTickerClick.bind(n),n}return o(t,e),s(t,[{key:"onTickerClick",value:function(){var e=this.props,t=e.dispatch,n=e.ticker,r=e.showFullName;r&&t((0,y.deleteTicker)(n.db_key))}},{key:"render",value:function(){var e=this.props,t=e.ticker,n=e.data,r=e.showFullName,i=e.key,a=void 0!==n.degree?n.degree>0?"up":n.degree<0?"down":"":"",o=r?[t.coinName,"<span>"+t.marketName+"</span>"].join("<br>"):this.displayName,s=r?l.default.createElement("a",{className:"btn-delete",onClick:this.onTickerClick}):null;return l.default.createElement("tr",{key:i,className:a},l.default.createElement("td",{className:"text-left"},l.default.createElement(p.Link,{to:"/"+t.coin+"_"+t.mid+".html"},l.default.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),l.default.createElement("td",null,n.last?this.currencySymbol+(0,d.noExponents)(n.last):"--"),l.default.createElement("td",{className:"fixed-right"},void 0!==n.degree?n.degree+"%":"--",s))}}]),t}(l.default.Component);w.propNames=["$user","$tickers","tickerList","subscribeTickers","unsubscribeTickers"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),l=r(u),c=n(276),f=(r(c),n(255)),h=(n(513),n(297)),p=n(300),d=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeModal=n.closeModal.bind(n),n.tickerChange=!1,n.initTickers=e.$user.tickers.slice(),n}return o(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){(0,f.isEqual)(e.$user.tickers,this.props.$user.tickers)||(this.tickerChange=!(0,f.isEqual)(e.$user.tickers,this.initTickers))}},{key:"closeModal",value:function(){var e=this.props,t=e.dispatch,n=e.$user;this.tickerChange&&t((0,h.postTickers)(n.tickers)),t((0,h.closeModal)())}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.$user,r=e.tickerModal;return l.default.createElement("div",null,l.default.createElement("div",{className:"modal-body"},l.default.createElement(y,{dispatch:t,type:"btc",heading:"比特币",markets:p.BTCTICKERS,close:r.btc!==!1,selection:(0,f.intersection)(n.tickers,p.BTCTICKERKEYS),userLogged:n.logged,showMarketName:!0}),l.default.createElement(y,{dispatch:t,type:"ltc",heading:"莱特币",markets:p.LTCTICKERS,close:r.ltc!==!1,selection:(0,f.intersection)(n.tickers,p.LTCTICKERKEYS),userLogged:n.logged,showMarketName:!0}),l.default.createElement(y,{dispatch:t,type:"other",heading:"其他币",markets:p.OTHERTICKERS,close:r.other!==!1,selection:(0,f.intersection)(n.tickers,p.OTHERTICKERKEYS),userLogged:n.logged,showMarketName:!0,showCoinName:!0}),l.default.createElement(y,{dispatch:t,type:"poloniex",heading:"P网",markets:p.POLONIEXTICKERS,close:r.poloniex!==!1,selection:(0,f.intersection)(n.tickers,p.POLONIEXTICKERKEYS),userLogged:n.logged,showCoinName:!0}),l.default.createElement(y,{dispatch:t,type:"bittrex",heading:"B网",markets:p.BITTREXTICKERS,close:r.bittrex!==!1,selection:(0,f.intersection)(n.tickers,p.BITTREXTICKERKEYS),userLogged:n.logged,showCoinName:!0}),l.default.createElement(y,{dispatch:t,type:"btc38",heading:"比特时代",markets:p.BTC38TICKERS,close:r.btc38!==!1,selection:(0,f.intersection)(n.tickers,p.BTC38TICKERKEYS),userLogged:n.logged,showCoinName:!0})))}}]),t}(l.default.Component);t.default=d;var y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCollapseClick=n.onCollapseClick.bind(n),n}return o(t,e),s(t,[{key:"onCollapseClick",value:function(){var e=this.props,t=e.dispatch,n=e.type;t((0,h.toggleTickerModalList)(n))}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.userLogged,r=e.markets,i=e.heading,a=(e.type,e.close),o=e.showMarketName,s=e.showCoinName,u=e.selection;return l.default.createElement("div",{className:"collapse-list clearfix"+(a?" closed":"")},l.default.createElement("div",{className:"collapse-heading"},l.default.createElement("h5",{onClick:this.onCollapseClick},l.default.createElement("a",{href:"javascript:void(0);"},i)),l.default.createElement("a",{href:"javascript:void(0);",className:"btn-collapse",onClick:this.onCollapseClick},l.default.createElement("span",{className:"chevron"}))),l.default.createElement("div",{className:"collapse-body"},a?null:l.default.createElement("ul",{className:"clearfix"},r.map(function(e){return l.default.createElement(g,{dispatch:t,market:e,isChecked:u.indexOf(e.db_key)>-1,userLogged:n,showMarketName:o,showCoinName:s})}))))}}]),t}(l.default.Component);y.defaultProps={showMarketName:!1,showCoinName:!1};var g=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTickerClick=n.onTickerClick.bind(n),n}return o(t,e),s(t,[{key:"onTickerClick",value:function(){var e=this.props,t=e.dispatch,n=e.userLogged,r=e.market,i=e.isChecked;t(n?i?(0,h.removeUserTicker)(r.db_key):(0,h.pushUserTicker)(r.db_key):(0,h.addNotification)({uid:"NOTLOGNOTIFICATION",title:"应用提示",message:"您还没有登录。请登录后再操作",autoDismiss:0,level:"error"}))}},{key:"render",value:function(){var e=this.props,t=e.market,n=e.isChecked,r=e.showMarketName,i=e.showCoinName,a=void 0;return r&&(a=t.marketName),i&&(a=a?t.coinName+"（"+a+"）":t.coinName),l.default.createElement("li",null,l.default.createElement("a",{href:"javascript:void(0);",className:n?"checked":"",onClick:this.onTickerClick},l.default.createElement("span",{className:"icon checkbox"}),l.default.createElement("span",null,a)))}}]),t}(l.default.Component);d.propNames=["$user","tickerModal"]},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t;return t=(0,x.noExponents)(e.toPrecision(10)).substr(0,10).replace(/(.[^.])(0+)$/,"$1<g>$2</g>")}function l(e){return e.replace(/(.[^.])(0+)$/,"$1")}function c(e){var t;return t=e.toPrecision(6).substr(0,6).replace(/(.[^.])(0+)$/,"$1<g>$2</g>")}function f(e){var t;return t=e<1e8?e:(e/1e3).toPrecision(8).substr(0,8)+"K"}function h(e){return e.toString().replace(/\.[\dK]+/,"<g>$&</g>")}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(4),g=r(y),_=n(257),v=r(_),m=n(255),b=n(517),E=r(b),O=n(519),T=r(O),w=n(415),P=n(416),x=(r(P),n(300)),I=n(297),S=n(366),C=n(365),A=(r(C),{global:{useUTC:!1},lang:{loading:"正在加载...",numericSymbols:["k","M","G","T","P","E"]},credits:{enabled:!1},colors:["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],chart:{animation:!1,backgroundColor:"transparent",borderWidth:0,borderRadius:0,plotShadow:!1,plotBorderWidth:0,height:167,margin:[0,0,24,0],type:"area"},title:{text:""},subtitle:{text:""},xAxis:{lineWidth:0,tickWidth:0,title:{text:""},labels:{style:{font:"11px Consolas, monospace"},formatter:function(){return x.currencySymbol+this.value}}},yAxis:{lineWidth:0,gridLineWidth:0,tickWidth:0,labels:{reserveSpace:!1,style:{font:"11px Consolas, monospace"},x:5,y:0},title:{text:""},startOnTick:!1,endOnTick:!1,opposite:!0,showFirstLabel:!1,minPadding:0,offset:-245},legend:{borderWidth:0,itemStyle:{font:"11px Trebuchet MS, Verdana, sans-serif"},symbolHeight:10,symbolWidth:12,itemHoverStyle:{},itemHiddenStyle:{},align:"center",verticalAlign:"top",y:-10,x:0,floating:!0},labels:{style:{color:"#99b"}},plotOptions:{area:{marker:{enabled:!1,symbol:"circle",radius:2,states:{hover:{enabled:!0}}}}},navigation:{buttonOptions:{theme:{stroke:"#CCCCCC"}}},tooltip:{crosshairs:[!0,!0],useHTML:!0,formatter:function(){return x.currencySymbol+this.x+" <br />"+this.series.name+":"+this.y.toFixed(4)},borderWidth:1,borderRadius:0},series:[{name:"买单",data:[]},{name:"卖单",data:[]}]}),R=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.limit=20,n.maxDepthLimit=180,n.minDepthLimit=20,n.clearDepth(n.props),n.loadDepthChartTheme(A),n.redrawDepthChartDebounced=(0,m.debounce)(n.redrawDepthChart.bind(n),240),n.onWinResize=n.onWinResize.bind(n),n.onWinResizeDebounced=(0,m.debounce)(n.onWinResize,120),n}return s(t,e),d(t,[{key:"loadDepthChartTheme",value:function(e){var t=e.xAxis,n=e.yAxis,r={labels:{style:{color:(0,S.getThemeStyle)(S.AXISFONT)}},crosshair:{color:(0,S.getThemeStyle)(S.CROSSHAIR)}};Array.isArray(t)?(t=(0,m.merge)([],t,[r]),n=(0,m.merge)([],n,[r])):(t=(0,m.merge)({},t,r),n=(0,m.merge)({},n,r)),A=(0,m.merge)({},e,{chart:{backgroundColor:"transparent",plotBackgroundColor:(0,S.getThemeStyle)(S.DEPTHCHARTBACKGROUND)},xAxis:t,yAxis:n,legend:{backgroundColor:(0,S.getThemeStyle)(S.LEGENDBACKGROUND),itemStyle:{color:(0,S.getThemeStyle)(S.LEGENDITEM)},itemHoverStyle:{color:(0,S.getThemeStyle)(S.LEGENDITEMHOVER)},itemHiddenStyle:{color:(0,S.getThemeStyle)(S.LEGENDITEMHIDDEN)}},tooltip:{backgroundColor:(0,S.getThemeStyle)(S.TOOLTIPBACKGROUND),borderColor:(0,S.getThemeStyle)(S.TOOLTIPBORDER),style:{color:(0,S.getThemeStyle)(S.TOOLTIPFONT)}},series:[{color:(0,S.getThemeStyle)(S.BIDALPHABACKGROUND)},{color:(0,S.getThemeStyle)(S.ASKALPHABACKGROUND)}]})}},{key:"componentDidMount",value:function(){var e=this.props,t=(e.$depth,e.dispatch);this.updateDepth(this.props),this.initProps();var n=this.refs.depthChart.getChart(),r=void 0,i=void 0;this.depthUpdated&&(n.series[1].setData(this.sumAsks,!1),r=this.sumAsks[this.sumAsks.length-1][0],n.series[0].setData(this.sumBids,!1),i=this.sumBids[0][0],n.axes[0].setExtremes(i,r),this.redrawDepthChartDebounced()),t((0,I.depthViewMounted)()),this.onWinResize(),window.addEventListener("resize",this.onWinResizeDebounced)}},{key:"calcRange",value:function(){var e=this.latestPrice-this.dayOpenPrice,t=this.props.scale,n=t.val,r=t.enlarge,i=t.fixed;return 0!==this.firstAskPrice&&0!==this.lastBidPrice&&0!==this.dayOpenPrice&&0!==this.latestPrice&&(this.diff=e,void(e>0?(this.orderRangeMin=parseFloat((Math.min.apply(Math,[this.lastBidPrice,this.dayOpenPrice].filter(function(e){return e>0}))*(1-n/this.dayOpenPrice)*r).toFixed(i)),this.orderRangeMax=parseFloat((Math.max.apply(Math,[this.firstAskPrice,this.latestPrice].filter(function(e){return e>0}))*(1+2*n/this.dayOpenPrice)*r).toFixed(i))):e<0?(this.orderRangeMin=parseFloat((Math.min.apply(Math,[this.lastBidPrice,this.latestPrice].filter(function(e){return e>0}))*(1-2*n/this.dayOpenPrice)*r).toFixed(i)),this.orderRangeMax=parseFloat((Math.max.apply(Math,[this.firstAskPrice,this.dayOpenPrice].filter(function(e){return e>0}))*(1+n/this.dayOpenPrice)*r).toFixed(i))):(this.orderRangeMin=parseFloat((Math.min.apply(Math,[this.lastBidPrice,this.dayOpenPrice].filter(function(e){return e>0}))*(1-n/this.dayOpenPrice)*r).toFixed(i)),this.orderRangeMax=parseFloat((Math.max.apply(Math,[this.firstAskPrice,this.dayOpenPrice].filter(function(e){return e>0}))*(1+n/this.dayOpenPrice)*r).toFixed(i)))))}},{key:"clearDepth",value:function(e){var t=(0,m.at)(e,["$trade.latest_price","dayOpen.price"]),n=p(t,2),r=n[0],i=n[1],a=r||{price:0,style:null},o=a.price,s=a.style;this.asks=[],this.bids=[],this.gasks=[],this.gbids=[],this.nextAsks=[],this.nextBids=[],this.nextGasks=[],this.nextGbids=[],this.sumAsks=[],this.sumBids=[],this.firstAskPrice=0,this.lastBidPrice=0,this.latestPrice=o,this.latestPriceStyle=s,this.orderRangeMin=0,this.orderRangeMax=0,this.dayOpenPrice=i||0,this.diff=0,this.askRows={},this.bidRows={},this.animate=!1,this.depthUpdated=!1,this.initRender=!1}},{key:"updateDepth",value:function(e){var t,n,r,i,a,o,s,u,l,c=e.$depth,f=this.limit;for(this.nextAsks=c.data[w.ASK].slice(0,f-1).reverse(),this.nextBids=c.data[w.BID].slice(-f,-1).reverse(),t=c.data[w.ASK_GROUPED].slice(0,f-1),n=[],r=0,u=0,l=t.length;u<l;u++)i=t[u],r+=i[1],n.push([i[0],r]);for(n.reverse(),this.nextGasks=n,o=c.data[w.BID_GROUPED].slice(-f,-1).reverse(),s=[],r=0,u=0,l=o.length;u<l;u++)a=o[u],r+=a[1],s.push([a[0],r]);this.nextGbids=s}},{key:"initProps",value:function(){var e=this,t=this.props,n=t.$depth,r=n.depthLimit;this.dayOpenPrice=t.dayOpen.price,this.latestPrice=t.$trade.latest_price.price,this.latestPriceStyle=t.$trade.latest_price.style;var i=this.nextAsks;this.askRows={},this.asks.forEach(function(t){var n=p(t,2),r=n[0],i=n[1],a=r.toPrecision(9),o=i.toPrecision(6).substr(0,6);r=parseFloat(a),i=parseFloat(o),e.askRows[r]=i}),this.asks=i,i=n.data[w.ASK].slice(0,r-1);var a=[],o=void 0,s=void 0,u=void 0,l=void 0,c=void 0;for(this.depthUpdated=!1,o=0,l=0,c=i.length;l<c;l++)s=i[l],o+=s[1],a.push([s[0],o]);a.length&&(this.depthUpdated=!0,this.sumAsks=a,this.firstAskPrice=a[0][0]);var f=this.nextBids;this.bidRows={},this.bids.forEach(function(t){var n=p(t,2),r=n[0],i=n[1],a=r.toPrecision(9),o=i.toPrecision(6).substr(0,6);r=parseFloat(a),i=parseFloat(o),e.bidRows[r]=i}),this.bids=f,f=n.data[w.BID].slice(-r,-1).reverse();var h=[];for(o=0,l=0,c=f.length;l<c;l++)u=f[l],o+=u[1],h.push([u[0],o]);h.reverse(),h.length&&(this.depthUpdated=!0,this.sumBids=h,this.lastBidPrice=h[h.length-1][0]),this.gasks=this.nextGasks,this.gbids=this.nextGbids,this.calcRange()}},{key:"onWinResize",value:function(){var e=this.refs,t=e.subComponent,n=e.subComponentHeader,r=e.price,i=e.orderDetail,a=e.asksRef,o=e.gasksRef,s=e.bidsRef,u=e.gbidsRef;if(t.offsetHeight>0){var l=Math.floor((t.offsetHeight-n.offsetHeight-r.offsetHeight-i.offsetHeight-20)/26);if(l=l>20?20:l,l=l<2?2:l,l!==this.limit){this.animate=!1;var c=13*l;a.style.height=o.style.height=s.style.height=u.style.height=c+"px",this.limit=l}}}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.$depth,r=n.depthLimit,i=this.refs.depthChart.getChart();this.animate=this.initRender,(0,m.isEqual)(e.selectMarket.coin,this.props.selectMarket.coin)||this.clearDepth(e),(0,m.isEqual)(e.dayOpen,this.props.dayOpen)||(this.dayOpenPrice=e.dayOpen.price),(0,m.isEqual)(e.$trade.latest_price,this.props.$trade.latest_price)||(this.latestPrice=e.$trade.latest_price.price,this.latestPriceStyle=e.$trade.latest_price.style),this.updateDepth(e);var a=this.nextAsks;(0,m.isEqual)(a,this.asks)||(this.askRows={},a.length&&this.asks.forEach(function(e){var n=p(e,2),r=n[0],i=n[1],a=r.toPrecision(9),o=i.toPrecision(6).substr(0,6);r=parseFloat(a),i=parseFloat(o),t.askRows[r]=i}),this.asks=a);var o=i.axes[0].getExtremes(),s=o.dataMax,u=o.dataMin;a=n.data[w.ASK].slice(0,r-1);var l=[],c=void 0,f=void 0,h=void 0,d=void 0,y=void 0,g=!1;for(c=0,d=0,y=a.length;d<y;d++)f=a[d],c+=f[1],l.push([f[0],c]);(0,m.isEqual)(l,this.sumAsks)||(i.series[1].setData(l,!1),g=!0,this.sumAsks=l,l.length&&(s=l[l.length-1][0],this.firstAskPrice=l[0][0]));var _=this.nextBids;(0,m.isEqual)(_,this.bids)||(this.bidRows={},_.length&&this.bids.forEach(function(e){var n=p(e,2),r=n[0],i=n[1],a=r.toPrecision(9),o=i.toPrecision(6).substr(0,6);r=parseFloat(a),i=parseFloat(o),t.bidRows[r]=i}),this.bids=_),_=n.data[w.BID].slice(-r,-1).reverse();var v=[];for(c=0,d=0,y=_.length;d<y;d++)h=_[d],c+=h[1],v.push([h[0],c]);v.reverse(),v.length&&!(0,m.isEqual)(v,this.sumBids)&&(i.series[0].setData(v,!1),g=!0,this.sumBids=v,v.length&&(u=v[0][0],this.lastBidPrice=v[v.length-1][0]));var b=this.nextGasks;(0,m.isEqual)(b,this.gasks)||(this.gasks=b);var E=this.nextGbids;(0,m.isEqual)(E,this.gbids)||(this.gbids=E),this.calcRange(),e.selectTheme!==this.props.selectTheme?(this.loadDepthChartTheme((0,m.merge)({},i.options,{xAxis:[{min:u,max:s}]})),this.redrawDepthChartDebounced()):g&&(i.axes[0].setExtremes(u,s),this.redrawDepthChartDebounced())}},{key:"redrawDepthChart",value:function(){var e=this.refs.depthChart;e&&e.getChart().redraw()}},{key:"changeDepthLimit",value:function(e){var t=this.props,n=t.dispatch,r=t.$depth;1===e?(e=r.depthLimit-20,e<this.minDepthLimit&&(e=this.minDepthLimit)):e===-1&&(e=r.depthLimit+20,e>this.maxDepthLimit&&(e=this.maxDepthLimit)),n((0,I.changeDepthLimit)(Math.abs(e)))}},{key:"componentDidUpdate",value:function(){this.asks.length&&(this.initRender=!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWinResizeDebounced)}},{key:"render",value:function(){var e,t=this,n=this.props.scale,r=n.enlarge,a=n.fixed,o=r.toString().length+1,s=void 0,d=void 0,y=void 0,_=void 0,m=void 0;return s=-1,d=this.asks.map(function(e){var n=p(e,2),r=n[0],i=n[1],a=r.toPrecision(10),o=i.toPrecision(6).substr(0,6);r=parseFloat(a),i=parseFloat(o),a=u(r),o=h(c(i)),s===parseInt((0,x.noExponents)(r))?a=a.replace(/(\d+)\./,"<h>$&</h>"):s=parseInt((0,x.noExponents)(r));var l=t.askRows[r],f="";return l&&l!==i&&(i>l?f="up":i<l&&(f="down"),f.length&&setTimeout(function(){delete t.askRows[r]},1e3)),g.default.createElement("div",{key:e[0],className:"row"},g.default.createElement("span",{className:"price",dangerouslySetInnerHTML:{__html:a}})," ",g.default.createElement("span",{className:"amount "+f,dangerouslySetInnerHTML:{__html:o}}))}),s=-1,y=this.bids.map(function(e){var n=p(e,2),r=n[0],i=n[1],a=r.toPrecision(9),o=i.toPrecision(6).substr(0,6);r=parseFloat(a),i=parseFloat(o),a=u(r),o=h(c(i)),s===parseInt((0,x.noExponents)(r))?a=a.replace(/(\d+)\./,"<h>$&</h>"):s=parseInt((0,x.noExponents)(r));var l=t.bidRows[r],f="";return l&&l!==i&&(i>l?f="up":i<l&&(f="down"),f.length&&setTimeout(function(){delete t.bidRows[r]},1e3)),g.default.createElement("div",{key:e[0],className:"row"},g.default.createElement("span",{className:"price",dangerouslySetInnerHTML:{__html:a}})," ",g.default.createElement("span",{className:"amount "+f,dangerouslySetInnerHTML:{__html:o}}))}),s=-1,_=this.gasks.map(function(e){var t=p(e,2),n=t[0],i=t[1],o=(n*r).toFixed(a),u=Math.round(i);return n=parseFloat(o),i=parseFloat(u),u=h(f(i)),s===parseInt(n)?o=o.replace(/(\d+)\./,"<h>$&</h>"):s=parseInt(n),g.default.createElement("div",{key:e[0],className:"row"},g.default.createElement("span",{className:"price",dangerouslySetInnerHTML:{__html:o}})," ",g.default.createElement("span",{className:"amount",dangerouslySetInnerHTML:{__html:u}}))}),s=-1,m=this.gbids.map(function(e){var t=p(e,2),n=t[0],i=t[1],o=(n*r).toFixed(a),u=Math.round(i);return n=parseFloat(o),i=parseFloat(u),u=h(f(i)),s===parseInt(n)?o=o.replace(/(\d+)\./,"<h>$&</h>"):s=parseInt(n),g.default.createElement("div",{key:e[0],className:"row"},g.default.createElement("span",{className:"price",dangerouslySetInnerHTML:{__html:o}})," ",g.default.createElement("span",{className:"amount",dangerouslySetInnerHTML:{__html:u}}))}),g.default.createElement("div",{id:"sub_component",ref:"subComponent"},g.default.createElement("div",{id:"sub_component_header",className:"flex-none",ref:"subComponentHeader"},g.default.createElement("h3",null,"委单信息")),g.default.createElement("div",{id:"sub_component_body"},g.default.createElement("div",{id:"orderbook"},g.default.createElement("div",{className:"orderbook"},g.default.createElement("div",{id:"asks",ref:"asksRef"},g.default.createElement("div",{className:"table"},g.default.createElement(v.default,{transitionName:"row",transitionEnterTimeout:1500,transitionLeaveTimeout:1200,transitionEnter:this.animate,transitionLeave:this.animate},d))),g.default.createElement("div",{id:"gasks",ref:"gasksRef"},g.default.createElement("div",{className:"table"},g.default.createElement(v.default,{transitionName:"row",transitionEnterTimeout:1500,transitionLeaveTimeout:1200,transitionEnter:this.animate,transitionLeave:this.animate},_)))),g.default.createElement("div",{ref:"price",id:"price",className:this.latestPriceStyle},(0,x.noExponents)(this.latestPrice)),g.default.createElement("div",{className:"orderbook"},g.default.createElement("div",{id:"bids",ref:"bidsRef"},g.default.createElement("div",{className:"table"},g.default.createElement(v.default,{transitionName:"row",transitionEnterTimeout:1500,transitionLeaveTimeout:1200,transitionEnter:this.animate,transitionLeave:this.animate},y))),g.default.createElement("div",{id:"gbids",ref:"gbidsRef"},g.default.createElement("div",{
className:"table"},g.default.createElement(v.default,{transitionName:"row",transitionEnterTimeout:1500,transitionLeaveTimeout:1200,transitionEnter:this.animate,transitionLeave:this.animate},m))))),g.default.createElement("div",{ref:"orderDetail",id:"order_detail"},g.default.createElement("div",{id:"order_data"},this.lastBidPrice>0&&this.dayOpenPrice>0&&this.latestPrice>0&&this.firstAskPrice>0&&this.orderRangeMax>this.orderRangeMin&&g.default.createElement("div",{id:"order_figures",className:this.diff>0?"up":this.diff<0?"down":""},g.default.createElement("span",{className:"change"},l(this.diff.toFixed(o))),g.default.createElement("span",{className:"percentage"},"(",(this.diff/this.dayOpenPrice*100).toFixed(2),"%)")),this.lastBidPrice>0&&this.dayOpenPrice>0&&this.latestPrice>0&&this.firstAskPrice>0&&this.orderRangeMax>this.orderRangeMin&&g.default.createElement("div",{id:"order_spread"},g.default.createElement("span",{className:"bid",title:"买一价"},x.currencySymbol+(0,x.noExponents)(this.lastBidPrice)),g.default.createElement("span",{className:"ask",title:"卖一价"},x.currencySymbol+(0,x.noExponents)(this.firstAskPrice))),this.lastBidPrice>0&&this.dayOpenPrice>0&&this.latestPrice>0&&this.firstAskPrice>0&&this.orderRangeMax>this.orderRangeMin&&g.default.createElement("div",{id:"order_range",className:this.diff>0?"plus":this.diff<0?"minus":""},g.default.createElement(T.default,{tipFormatter:null,min:this.orderRangeMin,max:this.orderRangeMax,range:!0,allowCross:!1,included:!0,step:parseFloat(((this.orderRangeMax-this.orderRangeMin)/10).toFixed(2)),value:[this.dayOpenPrice*r,this.latestPrice*r].sort(function(e,t){return e-t}),marks:(e={},i(e,this.orderRangeMin,{className:"min",label:x.currencySymbol+(0,x.noExponents)(this.orderRangeMin/r)}),i(e,this.lastBidPrice*r,{className:"bid",label:""}),i(e,this.firstAskPrice*r,{className:"ask",label:""}),i(e,this.orderRangeMax,{className:"max",label:x.currencySymbol+(0,x.noExponents)(this.orderRangeMax/r)}),e)}),g.default.createElement("div",{id:"range_tip"},"日涨跌")),g.default.createElement("div",{id:"order_graph"},g.default.createElement(E.default,{ref:"depthChart",config:A,isPureConfig:!0}),this.lastBidPrice>0&&this.dayOpenPrice>0&&this.latestPrice>0&&this.firstAskPrice>0&&this.orderRangeMax>this.orderRangeMin&&g.default.createElement("div",{className:"depth-slider"},g.default.createElement(T.default,{tipFormatter:null,min:-this.maxDepthLimit,max:-this.minDepthLimit,step:20,value:-this.props.$depth.depthLimit,onChange:function(e){return t.changeDepthLimit(e)}}),g.default.createElement("button",{className:"plus",onClick:function(e){return e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),t.changeDepthLimit(1),!1}},"+"),g.default.createElement("button",{className:"minus",onClick:function(e){return e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),t.changeDepthLimit(-1),!1}},"-")))))))}}]),t}(g.default.Component);t.default=R,R.propNames=["dayOpen","$depth","$trade","scale","selectMarket","selectTheme"]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),c=r(l),f=n(264),h=r(f),p=n(255),d=n(621),y=r(d),g=n(300),_=n(297),v=n(301),m=r(v),b=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),u(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.exchange,r=e.warnings,i=e.$tickers,a=e.alarmForm,o=e.selectMarket,s=e.subscribeTickers,u=e.unsubscribeTickers;return c.default.createElement("div",{id:"sub_component"},c.default.createElement("div",{id:"sub_component_header",className:"flex-none"},c.default.createElement("h3",null,"价格预警")),c.default.createElement("div",{id:"sub_component_body"},c.default.createElement(O,{dispatch:t,exchange:n,$tickers:i,alarmForm:a,selectMarket:o,subscribeTickers:s,unsubscribeTickers:u}),c.default.createElement(E,{dispatch:t,warnings:r})))}}]),t}(c.default.Component);t.default=b;var E=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.warningTypes=["上涨价","下跌价","区间价","振幅"],n.onCollapseClick=n.onCollapseClick.bind(n),n.onDeleteClick=n.onDeleteClick.bind(n),n}return o(t,e),u(t,[{key:"onCollapseClick",value:function(e){var t=this.props.dispatch;t((0,_.toggleWarnings)(e))}},{key:"onDeleteClick",value:function(e){var t=this.props.dispatch;t((0,_.deleteWarning)(e)).then(function(e){}).catch(function(e){503!==e.response.status&&e.response.json().then(function(e){return t((0,_.addNotification)({title:"价格预警提示",message:e.message?e.message:"抱歉！删除失败，请重试。",level:"error"}))}).catch(function(e){return t((0,_.addNotification)({title:"价格预警提示",message:"抱歉！删除失败，请重试。",level:"error"}))})})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.warnings,n=t.list.map(function(t){var n=[];return t.list.map(function(t){n=n.concat(t.list.map(function(n){var r=parseInt(n.mode),i=void 0;return 1===r?null!=n.high?(r=0,i=(0,g.noExponents)(n.high)):i=(0,g.noExponents)(n.low):i=(0,g.noExponents)(n.mode_info),3===r?i+="%":i=t.currencySymbol+i,c.default.createElement("li",{key:n.id},c.default.createElement("div",{className:"warning"+(n.active?" active":"")},c.default.createElement("span",{className:"text-primary"},t.name,"："),c.default.createElement("span",null,e.warningTypes[r]," ",i),c.default.createElement("a",{href:"javascript:void(0);",className:"btn btn-delete",onClick:function(){return e.onDeleteClick(n)}},"×")))}))}),c.default.createElement("div",{key:t.mid,className:"panel panel-default"+(t.close?"":" opened")},c.default.createElement("div",{className:"panel-heading",onClick:function(){return e.onCollapseClick(t)}},c.default.createElement("h4",{className:"panel-title"},c.default.createElement("a",{href:"javascript:void(0);"},t.name)),c.default.createElement("a",{href:"javascript:void(0);",className:"btn btn-toggle"})),c.default.createElement("div",{className:"panel-collapse"},c.default.createElement("ul",{className:"warnings"},n)))});return c.default.createElement("div",{id:"warnings"},n.length?n:c.default.createElement("div",{className:"empty"},"没有预警设置，请添加"))}}]),t}(c.default.Component),O=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.disabled=!0,n.alarmMarket=null,n.alarmCoin=null;var r=g.MARKETS.filter(function(e){return!e.hidden&&!e.hide_other});return n.markets=(0,p.keyBy)(r,"mid"),n.marketSelectOptions=r.map(function(e){return{value:e.mid,label:m.default.get(e.name)}}),n.coinSelectOptions=[],n.onMarketChange=n.onMarketChange.bind(n),n.onCoinChange=n.onCoinChange.bind(n),n.onWarningValueChange=n.onWarningValueChange.bind(n),n.onWarningClick=n.onWarningClick.bind(n),n}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.selectMarket;e.subscribeTickers,e.unsubscribeTickers;h.default.rebuild();var r=n.market,i=n.coin,a=[];r.currencies.forEach(function(e){a=a.concat(r[e+"_coins"])}),t((0,_.selectAlarmMarket)(r.mid)),this.coinSelectOptions=a.map(function(e){var t=(0,g.getCoinName)(e),n=s(t,3),r=n[0],i=n[1],a=n[2];return{value:e.coin,label:r+" "+i+"/"+a,currency:e.currency}}),t((0,_.selectAlarmCoin)(i.coin,i.currency))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.subscribeTickers,r=t.unsubscribeTickers,i=e.alarmForm,a=i.mid,o=i.cid;i.showCurrency,i.currency,i.high,i.low,i.interval,i.amplitude;a===this.props.alarmForm.mid&&o===this.props.alarmForm.cid||(this.props.alarmForm.mid&&this.props.alarmForm.cid&&r(this.props.alarmForm.cid+":"+this.props.alarmForm.mid),a&&o&&n(o+":"+a))}},{key:"onMarketChange",value:function(e){var t=this.props,n=t.dispatch,r=t.alarmForm;if(!e||!this.markets[e.value])return n((0,_.selectAlarmMarket)(null));var i=this.markets[e.value],a=[];if(i.currencies.forEach(function(e){a=a.concat(i[e+"_coins"])}),n((0,_.selectAlarmMarket)(e.value)),this.coinSelectOptions=a.map(function(e){var t=(0,g.getCoinName)(e),n=s(t,3),r=n[0],i=n[1],a=n[2];return{value:e.coin,label:r+" "+i+"/"+a,currency:e.currency}}),r.cid){var o=void 0;return n((o=(0,p.find)(this.coinSelectOptions,{value:r.cid}))?(0,_.selectAlarmCoin)(o.value,o.currency):(0,_.selectAlarmCoin)(null))}}},{key:"onCoinChange",value:function(e){var t=this.props.dispatch;return e?void t((0,_.selectAlarmCoin)(e.value,e.currency)):t((0,_.selectAlarmCoin)(null))}},{key:"onCurrencyClick",value:function(e){var t=this.props,n=t.dispatch,r=t.alarmForm;if(r.showCurrency!==e)return n((0,_.selectAlarmCurrency)(e))}},{key:"onWarningValueChange",value:function(e,t){var n=this.props.dispatch;n((0,_.changeWarningValue)(e,t))}},{key:"onWarningClick",value:function(e,t,n){var r=this.props,i=r.dispatch,a=r.exchange,o=this.props.alarmForm,s=o.mid,u=o.cid,l=o.currency,c=o.showCurrency;if(n=(0,p.trim)(n),n.length){if(!(0,g.isNumeric)(n))return i((0,_.addNotification)({title:"价格预警提示",message:"不是合法的值！请输入数值。",level:"error"}));if(n=parseFloat(n),"high"===e&&t>=n)return i((0,_.addNotification)({title:"价格预警提示",message:"当前价格已到达该上涨价！",level:"error"}));if("low"===e&&t<=n)return i((0,_.addNotification)({title:"价格预警提示",message:"当前价格已到达该下跌价！",level:"error"}));c!==l&&"amplitude"!==e&&(n=a(s,c,l,n)),i((0,_.postWarning)({mid:s,cid:u,type:e,value:n})).then(function(t){return i((0,_.changeWarningValue)(e,null)),i((0,_.addNotification)({title:"价格预警提示",message:"设置成功！",level:"success"}))}).catch(function(e){503!==e.response.status&&e.response.json().then(function(e){return i((0,_.addNotification)({title:"价格预警提示",message:e.message?e.message:"抱歉！设置失败，请重试。",level:"error"}))})})}}},{key:"render",value:function(){var e=this,t=this.props.alarmForm,n=t.mid,r=t.cid,i=t.currency,a=t.showCurrency,o=t.high,s=t.low,u=t.interval,l=t.amplitude,f=(0,g.getCurrencySymbol)(a),h=r+":"+n,p=this.props,d=p.exchange,_=p.$tickers,v=void 0,m=void 0,b=[],E=void 0;return this.disabled=!0,n&&r?(_[h]?(v=d(n,i,a,_[h].last),m=f+(0,g.noExponents)(v),this.disabled=!1):m="--",b.push(i),"cny"===i?b.push("usd"):b.push("cny"),E=b.map(function(t){return c.default.createElement("button",{key:t,className:"btn btn-toggle"+(a===t?" active":""),onClick:function(){return e.onCurrencyClick(t)}},t.toUpperCase())})):(m="请选择"+(!n&&r?"交易平台":n&&!r?"币种":"交易平台/币种"),E=c.default.createElement("span",null,m)),c.default.createElement("div",{id:"alarm_form"},c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:""},"平       台"),c.default.createElement("span",{className:"comma"},"："),c.default.createElement(y.default,{name:"market-selector",placeholder:"选择平台",clearable:!1,value:n,options:this.marketSelectOptions,onChange:this.onMarketChange,noResultsText:"没有数据"})),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:""},"币       种"),c.default.createElement("span",{className:"comma"},"："),c.default.createElement(y.default,{name:"coin-selector",placeholder:"选择币种",clearable:!1,noResultsText:"没有数据",options:this.coinSelectOptions,onChange:this.onCoinChange,value:r})),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:""},"当前价格"),c.default.createElement("span",{className:"comma"},"："),c.default.createElement("div",{className:"form-val"},c.default.createElement("span",null,m))),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:""},"定       价"),c.default.createElement("span",{className:"comma"},"："),c.default.createElement("div",{className:"form-val"},E)),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:"","data-tip":"上涨价：以当前价格为始，向上<br>突破触发预警的价格","data-for":"tooltip_top","data-multiline":!0},"上涨价",f),c.default.createElement("span",{className:"comma"},"："),c.default.createElement("div",{className:"form-val"},c.default.createElement("input",{className:"input-val",type:"text",maxLength:"10",value:o,onChange:function(t){return e.onWarningValueChange("high",t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.onWarningClick("high",v,o)},disabled:this.disabled}),c.default.createElement("button",{className:"btn btn-add",onClick:function(){return e.onWarningClick("high",v,o)},disabled:this.disabled},c.default.createElement("span",{className:"icon icon-plus"})))),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:"","data-tip":"下跌价：以当前价格为始，向下<br>跌破触发预警的价格","data-for":"tooltip_top","data-multiline":!0},"下跌价",f),c.default.createElement("span",{className:"comma"},"："),c.default.createElement("div",{className:"form-val"},c.default.createElement("input",{className:"input-val",type:"text",maxLength:"10",value:s,onChange:function(t){return e.onWarningValueChange("low",t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.onWarningClick("low",v,s)},disabled:this.disabled}),c.default.createElement("button",{className:"btn btn-add",onClick:function(){return e.onWarningClick("low",v,s)},disabled:this.disabled},c.default.createElement("span",{className:"icon icon-plus"})))),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:"","data-tip":"区间价：以当前价格为始，在一个区<br>间内上下波动触发预警的价格，如当<br>前价￥4000，区间价“10”，则触发预<br>警的价格是￥3990和￥4010","data-for":"tooltip_top","data-multiline":!0},"区间价",f),c.default.createElement("span",{className:"comma"},"："),c.default.createElement("div",{className:"form-val"},c.default.createElement("input",{className:"input-val",type:"text",maxLength:"10",value:u,onChange:function(t){return e.onWarningValueChange("interval",t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.onWarningClick("interval",v,u)},disabled:this.disabled}),c.default.createElement("button",{className:"btn btn-add",onClick:function(){return e.onWarningClick("interval",v,u)},disabled:this.disabled},c.default.createElement("span",{className:"icon icon-plus"})))),c.default.createElement("div",{className:"form-row"},c.default.createElement("label",{htmlFor:"","data-tip":"振幅：以当前价格为始，在一个振幅<br>百分比内上下波动触发预警的价格，<br>如当前价￥4000，振幅“0.1%”，则触<br>发预警的价格是￥3996和￥4004","data-for":"tooltip_top","data-multiline":!0},"振  幅  %"),c.default.createElement("span",{className:"comma"},"："),c.default.createElement("div",{className:"form-val"},c.default.createElement("input",{className:"input-val",type:"text",maxLength:"10",value:l,onChange:function(t){return e.onWarningValueChange("amplitude",t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.onWarningClick("amplitude",v,l)},disabled:this.disabled}),c.default.createElement("button",{className:"btn btn-add",onClick:function(){return e.onWarningClick("amplitude",v,l)},disabled:this.disabled},c.default.createElement("span",{className:"icon icon-plus"})))))}}]),t}(c.default.Component);b.propNames=["warnings","exchange","$tickers","alarmForm","selectMarket","subscribeTickers","unsubscribeTickers"]},function(e,t,n){/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/react-select
	*/
"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=typeof e;return"string"===t?e:"object"===t?JSON.stringify(e):"number"===t||"boolean"===t?String(e):""}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(4),l=r(u),c=n(156),f=r(c),h=n(622),p=r(h),d=n(265),y=r(d),g=n(623),_=r(g),v=n(624),m=r(v),b=n(626),E=r(b),O=n(627),T=r(O),w=n(628),P=r(w),x=n(629),I=r(x),S=n(630),C=r(S),A=n(631),R=r(A),k=l.default.PropTypes.oneOfType([l.default.PropTypes.string,l.default.PropTypes.node]),M=1,D=l.default.createClass({displayName:"Select",propTypes:{addLabelText:l.default.PropTypes.string,"aria-label":l.default.PropTypes.string,"aria-labelledby":l.default.PropTypes.string,arrowRenderer:l.default.PropTypes.func,autoBlur:l.default.PropTypes.bool,autofocus:l.default.PropTypes.bool,autosize:l.default.PropTypes.bool,backspaceRemoves:l.default.PropTypes.bool,backspaceToRemoveMessage:l.default.PropTypes.string,className:l.default.PropTypes.string,clearAllText:k,clearValueText:k,clearable:l.default.PropTypes.bool,delimiter:l.default.PropTypes.string,disabled:l.default.PropTypes.bool,escapeClearsValue:l.default.PropTypes.bool,filterOption:l.default.PropTypes.func,filterOptions:l.default.PropTypes.any,ignoreAccents:l.default.PropTypes.bool,ignoreCase:l.default.PropTypes.bool,inputProps:l.default.PropTypes.object,inputRenderer:l.default.PropTypes.func,instanceId:l.default.PropTypes.string,isLoading:l.default.PropTypes.bool,joinValues:l.default.PropTypes.bool,labelKey:l.default.PropTypes.string,matchPos:l.default.PropTypes.string,matchProp:l.default.PropTypes.string,menuBuffer:l.default.PropTypes.number,menuContainerStyle:l.default.PropTypes.object,menuRenderer:l.default.PropTypes.func,menuStyle:l.default.PropTypes.object,multi:l.default.PropTypes.bool,name:l.default.PropTypes.string,noResultsText:k,onBlur:l.default.PropTypes.func,onBlurResetsInput:l.default.PropTypes.bool,onChange:l.default.PropTypes.func,onClose:l.default.PropTypes.func,onCloseResetsInput:l.default.PropTypes.bool,onFocus:l.default.PropTypes.func,onInputChange:l.default.PropTypes.func,onInputKeyDown:l.default.PropTypes.func,onMenuScrollToBottom:l.default.PropTypes.func,onOpen:l.default.PropTypes.func,onValueClick:l.default.PropTypes.func,openAfterFocus:l.default.PropTypes.bool,openOnFocus:l.default.PropTypes.bool,optionClassName:l.default.PropTypes.string,optionComponent:l.default.PropTypes.func,optionRenderer:l.default.PropTypes.func,options:l.default.PropTypes.array,pageSize:l.default.PropTypes.number,placeholder:k,required:l.default.PropTypes.bool,resetValue:l.default.PropTypes.any,scrollMenuIntoView:l.default.PropTypes.bool,searchable:l.default.PropTypes.bool,simpleValue:l.default.PropTypes.bool,style:l.default.PropTypes.object,tabIndex:l.default.PropTypes.string,tabSelectsValue:l.default.PropTypes.bool,value:l.default.PropTypes.any,valueComponent:l.default.PropTypes.func,valueKey:l.default.PropTypes.string,valueRenderer:l.default.PropTypes.func,wrapperStyle:l.default.PropTypes.object},statics:{Async:T.default,AsyncCreatable:P.default,Creatable:I.default},getDefaultProps:function(){return{addLabelText:'Add "{label}"?',arrowRenderer:_.default,autosize:!0,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearValueText:"Clear value",delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:m.default,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,menuRenderer:E.default,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,onCloseResetsInput:!0,openAfterFocus:!1,optionComponent:C.default,pageSize:5,placeholder:"Select...",required:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,valueComponent:R.default,valueKey:"value"}},getInitialState:function(){return{inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1,required:!1}},componentWillMount:function(){this._instancePrefix="react-select-"+(this.props.instanceId||++M)+"-";var e=this.getValueArray(this.props.value);this.props.required&&this.setState({required:this.handleRequired(e[0],this.props.multi)})},componentDidMount:function(){this.props.autofocus&&this.focus()},componentWillReceiveProps:function(e){var t=this.getValueArray(e.value,e);e.required&&this.setState({required:this.handleRequired(t[0],e.multi)})},componentWillUpdate:function(e,t){if(t.isOpen!==this.state.isOpen){this.toggleTouchOutsideEvent(t.isOpen);var n=t.isOpen?e.onOpen:e.onClose;n&&n()}},componentDidUpdate:function(e,t){if(this.menu&&this.focused&&this.state.isOpen&&!this.hasScrolledToOption){var n=f.default.findDOMNode(this.focused),r=f.default.findDOMNode(this.menu);r.scrollTop=n.offsetTop,this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(this._scrollToFocusedOptionOnUpdate&&this.focused&&this.menu){this._scrollToFocusedOptionOnUpdate=!1;var i=f.default.findDOMNode(this.focused),a=f.default.findDOMNode(this.menu),o=i.getBoundingClientRect(),s=a.getBoundingClientRect();(o.bottom>s.bottom||o.top<s.top)&&(a.scrollTop=i.offsetTop+i.clientHeight-a.offsetHeight)}if(this.props.scrollMenuIntoView&&this.menuContainer){var u=this.menuContainer.getBoundingClientRect();window.innerHeight<u.bottom+this.props.menuBuffer&&window.scrollBy(0,u.bottom+this.props.menuBuffer-window.innerHeight)}e.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu())},componentWillUnmount:function(){document.removeEventListener("touchstart",this.handleTouchOutside)},toggleTouchOutsideEvent:function(e){e?document.addEventListener("touchstart",this.handleTouchOutside):document.removeEventListener("touchstart",this.handleTouchOutside)},handleTouchOutside:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&this.closeMenu()},focus:function(){this.input&&(this.input.focus(),this.props.openAfterFocus&&this.setState({isOpen:!0}))},blurInput:function(){this.input&&this.input.blur()},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},handleTouchEnd:function(e){this.dragging||this.handleMouseDown(e)},handleTouchEndClearValue:function(e){this.dragging||this.clearValue(e)},handleMouseDown:function(e){if(!(this.props.disabled||"mousedown"===e.type&&0!==e.button)&&"INPUT"!==e.target.tagName){if(e.stopPropagation(),e.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen});if(this.state.isFocused){this.focus();var t=this.input;"function"==typeof t.getInput&&(t=t.getInput()),t.value="",this.setState({isOpen:!0,isPseudoFocused:!1})}else this._openAfterFocus=!0,this.focus()}},handleMouseDownOnArrow:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||this.state.isOpen&&(e.stopPropagation(),e.preventDefault(),this.closeMenu())},handleMouseDownOnMenu:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())},closeMenu:function(){this.props.onCloseResetsInput?this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi,inputValue:""}):this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi,inputValue:this.state.inputValue}),this.hasScrolledToOption=!1},handleInputFocus:function(e){if(!this.props.disabled){var t=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus;this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:t}),this._openAfterFocus=!1}},handleInputBlur:function(e){if(this.menu&&(this.menu===document.activeElement||this.menu.contains(document.activeElement)))return void this.focus();this.props.onBlur&&this.props.onBlur(e);var t={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(t.inputValue=""),this.setState(t)},handleInputChange:function(e){var t=e.target.value;if(this.state.inputValue!==e.target.value&&this.props.onInputChange){var n=this.props.onInputChange(t);null!=n&&"object"!=typeof n&&(t=""+n)}this.setState({isOpen:!0,isPseudoFocused:!1,inputValue:t})},handleKeyDown:function(e){if(!(this.props.disabled||"function"==typeof this.props.onInputKeyDown&&(this.props.onInputKeyDown(e),e.defaultPrevented))){switch(e.keyCode){case 8:return void(!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue()));case 9:if(e.shiftKey||!this.state.isOpen||!this.props.tabSelectsValue)return;return void this.selectFocusedOption();case 13:if(!this.state.isOpen)return;e.stopPropagation(),this.selectFocusedOption();break;case 27:this.state.isOpen?(this.closeMenu(),e.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(e),e.stopPropagation());break;case 38:this.focusPreviousOption();break;case 40:this.focusNextOption();break;case 33:this.focusPageUpOption();break;case 34:this.focusPageDownOption();break;case 35:if(e.shiftKey)return;this.focusEndOption();break;case 36:if(e.shiftKey)return;this.focusStartOption();break;default:return}e.preventDefault()}},handleValueClick:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)},handleMenuScroll:function(e){if(this.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&!(t.scrollHeight-t.offsetHeight-t.scrollTop)&&this.props.onMenuScrollToBottom()}},handleRequired:function(e,t){return!e||(t?0===e.length:0===Object.keys(e).length)},getOptionLabel:function(e){return e[this.props.labelKey]},getValueArray:function(e,t){var n=this,r="object"==typeof t?t:this.props;if(r.multi){if("string"==typeof e&&(e=e.split(r.delimiter)),!Array.isArray(e)){if(null===e||void 0===e)return[];e=[e]}return e.map(function(e){return n.expandValue(e,r)}).filter(function(e){return e})}var i=this.expandValue(e,r);return i?[i]:[]},expandValue:function(e,t){var n=typeof e;if("string"!==n&&"number"!==n&&"boolean"!==n)return e;var r=t.options,i=t.valueKey;if(r)for(var a=0;a<r.length;a++)if(r[a][i]===e)return r[a]},setValue:function(e){var t=this;if(this.props.autoBlur&&this.blurInput(),this.props.onChange){if(this.props.required){var n=this.handleRequired(e,this.props.multi);this.setState({required:n})}this.props.simpleValue&&e&&(e=this.props.multi?e.map(function(e){return e[t.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e)}},selectValue:function(e){var t=this;this.hasScrolledToOption=!1,this.props.multi?this.setState({inputValue:"",focusedIndex:null},function(){t.addValue(e)}):this.setState({isOpen:!1,inputValue:"",isPseudoFocused:this.state.isFocused},function(){t.setValue(e)})},addValue:function(e){var t=this.getValueArray(this.props.value);this.setValue(t.concat(e))},popValue:function(){var e=this.getValueArray(this.props.value);e.length&&e[e.length-1].clearableValue!==!1&&this.setValue(e.slice(0,e.length-1))},removeValue:function(e){var t=this.getValueArray(this.props.value);this.setValue(t.filter(function(t){return t!==e})),this.focus()},clearValue:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.setValue(this.getResetValue()),this.setState({isOpen:!1,inputValue:""},this.focus))},getResetValue:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null},focusOption:function(e){this.setState({focusedOption:e})},focusNextOption:function(){this.focusAdjacentOption("next")},focusPreviousOption:function(){this.focusAdjacentOption("previous")},focusPageUpOption:function(){this.focusAdjacentOption("page_up")},focusPageDownOption:function(){this.focusAdjacentOption("page_down")},focusStartOption:function(){this.focusAdjacentOption("start")},focusEndOption:function(){this.focusAdjacentOption("end")},focusAdjacentOption:function(e){var t=this._visibleOptions.map(function(e,t){return{option:e,index:t}}).filter(function(e){return!e.option.disabled});if(this._scrollToFocusedOptionOnUpdate=!0,!this.state.isOpen)return void this.setState({isOpen:!0,inputValue:"",focusedOption:this._focusedOption||t["next"===e?0:t.length-1].option});if(t.length){for(var n=-1,r=0;r<t.length;r++)if(this._focusedOption===t[r].option){n=r;break}if("next"===e&&n!==-1)n=(n+1)%t.length;else if("previous"===e)n>0?n-=1:n=t.length-1;else if("start"===e)n=0;else if("end"===e)n=t.length-1;else if("page_up"===e){var i=n-this.props.pageSize;n=i<0?0:i}else if("page_down"===e){var i=n+this.props.pageSize;n=i>t.length-1?t.length-1:i}n===-1&&(n=0),this.setState({focusedIndex:t[n].index,focusedOption:t[n].option})}},getFocusedOption:function(){return this._focusedOption},getInputValue:function(){return this.state.inputValue},selectFocusedOption:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)},renderLoading:function(){if(this.props.isLoading)return l.default.createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},l.default.createElement("span",{className:"Select-loading"}))},renderValue:function(e,t){var n=this,r=this.props.valueRenderer||this.getOptionLabel,i=this.props.valueComponent;if(!e.length)return this.state.inputValue?null:l.default.createElement("div",{className:"Select-placeholder"},this.props.placeholder);var a=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?e.map(function(e,t){return l.default.createElement(i,{id:n._instancePrefix+"-value-"+t,instancePrefix:n._instancePrefix,disabled:n.props.disabled||e.clearableValue===!1,key:"value-"+t+"-"+e[n.props.valueKey],onClick:a,onRemove:n.removeValue,value:e},r(e,t),l.default.createElement("span",{className:"Select-aria-only"}," "))}):this.state.inputValue?void 0:(t&&(a=null),l.default.createElement(i,{id:this._instancePrefix+"-value-item",disabled:this.props.disabled,instancePrefix:this._instancePrefix,onClick:a,value:e[0]},r(e[0])))},renderInput:function(e,t){var n=this;if(this.props.inputRenderer)return this.props.inputRenderer();var r,o=(0,y.default)("Select-input",this.props.inputProps.className),u=!!this.state.isOpen,c=(0,y.default)((r={},a(r,this._instancePrefix+"-list",u),a(r,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),r)),f=s({},this.props.inputProps,{role:"combobox","aria-expanded":""+u,"aria-owns":c,"aria-haspopup":""+u,"aria-activedescendant":u?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-labelledby":this.props["aria-labelledby"],"aria-label":this.props["aria-label"],className:o,tabIndex:this.props.tabIndex,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(e){return n.input=e},required:this.state.required,value:this.state.inputValue});if(this.props.disabled||!this.props.searchable){var h=this.props.inputProps,d=(h.inputClassName,i(h,["inputClassName"]));return l.default.createElement("div",s({},d,{role:"combobox","aria-expanded":u,"aria-owns":u?this._instancePrefix+"-list":this._instancePrefix+"-value","aria-activedescendant":u?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value",className:o,tabIndex:this.props.tabIndex||0,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(e){return n.input=e},"aria-readonly":""+!!this.props.disabled,style:{border:0,width:1,display:"inline-block"}}))}return this.props.autosize?l.default.createElement(p.default,s({},f,{minWidth:"5px"})):l.default.createElement("div",{className:o},l.default.createElement("input",f))},renderClear:function(){if(this.props.clearable&&this.props.value&&0!==this.props.value&&(!this.props.multi||this.props.value.length)&&!this.props.disabled&&!this.props.isLoading)return l.default.createElement("span",{className:"Select-clear-zone",title:this.props.multi?this.props.clearAllText:this.props.clearValueText,"aria-label":this.props.multi?this.props.clearAllText:this.props.clearValueText,onMouseDown:this.clearValue,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEndClearValue},l.default.createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}}))},renderArrow:function(){var e=this.handleMouseDownOnArrow,t=this.props.arrowRenderer({onMouseDown:e});return l.default.createElement("span",{className:"Select-arrow-zone",onMouseDown:e},t)},filterOptions:function e(t){var n=this.state.inputValue,r=this.props.options||[];if(this.props.filterOptions){var e="function"==typeof this.props.filterOptions?this.props.filterOptions:m.default;return e(r,n,t,{filterOption:this.props.filterOption,ignoreAccents:this.props.ignoreAccents,ignoreCase:this.props.ignoreCase,labelKey:this.props.labelKey,matchPos:this.props.matchPos,matchProp:this.props.matchProp,valueKey:this.props.valueKey})}return r},onOptionRef:function(e,t){t&&(this.focused=e)},renderMenu:function(e,t,n){return e&&e.length?this.props.menuRenderer({focusedOption:n,focusOption:this.focusOption,instancePrefix:this._instancePrefix,labelKey:this.props.labelKey,onFocus:this.focusOption,onSelect:this.selectValue,optionClassName:this.props.optionClassName,optionComponent:this.props.optionComponent,optionRenderer:this.props.optionRenderer||this.getOptionLabel,options:e,selectValue:this.selectValue,valueArray:t,valueKey:this.props.valueKey,onOptionRef:this.onOptionRef}):this.props.noResultsText?l.default.createElement("div",{className:"Select-noresults"},this.props.noResultsText):null},renderHiddenField:function(e){var t=this;if(this.props.name){if(this.props.joinValues){var n=e.map(function(e){return o(e[t.props.valueKey])}).join(this.props.delimiter);return l.default.createElement("input",{type:"hidden",ref:function(e){return t.value=e},name:this.props.name,value:n,disabled:this.props.disabled})}return e.map(function(e,n){return l.default.createElement("input",{key:"hidden."+n,type:"hidden",ref:"value"+n,name:t.props.name,value:o(e[t.props.valueKey]),disabled:t.props.disabled})})}},getFocusableOptionIndex:function(e){var t=this._visibleOptions;if(!t.length)return null;var n=this.state.focusedOption||e;if(n&&!n.disabled){var r=t.indexOf(n);if(r!==-1)return r}for(var i=0;i<t.length;i++)if(!t[i].disabled)return i;return null},renderOuter:function(e,t,n){var r=this,i=this.renderMenu(e,t,n);return i?l.default.createElement("div",{ref:function(e){return r.menuContainer=e},className:"Select-menu-outer",style:this.props.menuContainerStyle},l.default.createElement("div",{ref:function(e){return r.menu=e},role:"listbox",className:"Select-menu",id:this._instancePrefix+"-list",style:this.props.menuStyle,onScroll:this.handleMenuScroll,onMouseDown:this.handleMouseDownOnMenu},i)):null},render:function(){var e=this,t=this.getValueArray(this.props.value),n=this._visibleOptions=this.filterOptions(this.props.multi?this.getValueArray(this.props.value):null),r=this.state.isOpen;this.props.multi&&!n.length&&t.length&&!this.state.inputValue&&(r=!1);var i=this.getFocusableOptionIndex(t[0]),a=null;a=null!==i?this._focusedOption=n[i]:this._focusedOption=null;var o=(0,y.default)("Select",this.props.className,{"Select--multi":this.props.multi,"Select--single":!this.props.multi,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":r,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"has-value":t.length}),s=null;return this.props.multi&&!this.props.disabled&&t.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(s=l.default.createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",t[t.length-1][this.props.labelKey]))),l.default.createElement("div",{ref:function(t){return e.wrapper=t},className:o,style:this.props.wrapperStyle},this.renderHiddenField(t),l.default.createElement("div",{ref:function(t){return e.control=t},className:"Select-control",style:this.props.style,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},l.default.createElement("span",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(t,r),this.renderInput(t,i)),s,this.renderLoading(),this.renderClear(),this.renderArrow()),r?this.renderOuter(n,this.props.multi?null:t,a):null)}});t.default=D,e.exports=t.default},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(4),a={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},o=i.createClass({displayName:"AutosizeInput",propTypes:{className:i.PropTypes.string,defaultValue:i.PropTypes.any,inputClassName:i.PropTypes.string,inputStyle:i.PropTypes.object,minWidth:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.string]),onChange:i.PropTypes.func,placeholder:i.PropTypes.string,placeholderIsMinWidth:i.PropTypes.bool,style:i.PropTypes.object,value:i.PropTypes.any},getDefaultProps:function(){return{minWidth:1}},getInitialState:function(){return{inputWidth:this.props.minWidth}},componentDidMount:function(){this.copyInputStyles(),this.updateInputWidth()},componentDidUpdate:function(){this.updateInputWidth()},copyInputStyles:function(){if(this.isMounted()&&window.getComputedStyle){var e=window.getComputedStyle(this.refs.input);if(e){var t=this.refs.sizer;if(t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,this.props.placeholder){var n=this.refs.placeholderSizer;n.style.fontSize=e.fontSize,n.style.fontFamily=e.fontFamily,n.style.fontWeight=e.fontWeight,n.style.fontStyle=e.fontStyle,n.style.letterSpacing=e.letterSpacing}}}},updateInputWidth:function(){if(this.isMounted()&&"undefined"!=typeof this.refs.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.refs.sizer.scrollWidth,this.refs.placeholderSizer.scrollWidth)+2:this.refs.sizer.scrollWidth+2,e<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}},getInput:function(){return this.refs.input},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},select:function(){this.refs.input.select()},render:function(){var e=this.props.defaultValue||this.props.value||"",t=this.props.style||{};t.display||(t.display="inline-block");var n=r({},this.props.inputStyle);n.width=this.state.inputWidth+"px",n.boxSizing="content-box";var o=r({},this.props);return o.className=this.props.inputClassName,o.style=n,delete o.inputClassName,delete o.inputStyle,delete o.minWidth,delete o.placeholderIsMinWidth,i.createElement("div",{className:this.props.className,style:t},i.createElement("input",r({},o,{ref:"input"})),i.createElement("div",{ref:"sizer",style:a},e),this.props.placeholder?i.createElement("div",{ref:"placeholderSizer",style:a},this.props.placeholder):null)}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.onMouseDown;return o.default.createElement("span",{className:"Select-arrow",onMouseDown:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(4),o=r(a);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){var i=this;return r.ignoreAccents&&(t=(0,o.default)(t)),r.ignoreCase&&(t=t.toLowerCase()),n&&(n=n.map(function(e){return e[r.valueKey]})),e.filter(function(e){if(n&&n.indexOf(e[r.valueKey])>-1)return!1;if(r.filterOption)return r.filterOption.call(i,e,t);if(!t)return!0;var a=String(e[r.valueKey]),s=String(e[r.labelKey]);return r.ignoreAccents&&("label"!==r.matchProp&&(a=(0,o.default)(a)),"value"!==r.matchProp&&(s=(0,o.default)(s))),r.ignoreCase&&("label"!==r.matchProp&&(a=a.toLowerCase()),"value"!==r.matchProp&&(s=s.toLowerCase())),"start"===r.matchPos?"label"!==r.matchProp&&a.substr(0,t.length)===t||"value"!==r.matchProp&&s.substr(0,t.length)===t:"label"!==r.matchProp&&a.indexOf(t)>=0||"value"!==r.matchProp&&s.indexOf(t)>=0})}var a=n(625),o=r(a);e.exports=i},function(e,t){"use strict";var n=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g
}];e.exports=function(e){for(var t=0;t<n.length;t++)e=e.replace(n[t].letters,n[t].base);return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.focusedOption,n=e.instancePrefix,r=(e.labelKey,e.onFocus),i=e.onSelect,a=e.optionClassName,s=e.optionComponent,l=e.optionRenderer,c=e.options,f=e.valueArray,h=e.valueKey,p=e.onOptionRef,d=s;return c.map(function(e,s){var c=f&&f.indexOf(e)>-1,y=e===t,g=(0,o.default)(a,{"Select-option":!0,"is-selected":c,"is-focused":y,"is-disabled":e.disabled});return u.default.createElement(d,{className:g,instancePrefix:n,isDisabled:e.disabled,isFocused:y,isSelected:c,key:"option-"+s+"-"+e[h],onFocus:r,onSelect:i,option:e,optionIndex:s,ref:function(e){p(e,y)}},l(e,s))})}var a=n(265),o=r(a),s=n(4),u=r(s);e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return h.default.createElement(d.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}},f=n(4),h=r(f),p=n(621),d=r(p),y=n(625),g=r(y),_={autoload:h.default.PropTypes.bool.isRequired,cache:h.default.PropTypes.any,children:h.default.PropTypes.func.isRequired,ignoreAccents:h.default.PropTypes.bool,ignoreCase:h.default.PropTypes.bool,loadingPlaceholder:f.PropTypes.string.isRequired,loadOptions:h.default.PropTypes.func.isRequired,options:f.PropTypes.array.isRequired,placeholder:h.default.PropTypes.oneOfType([h.default.PropTypes.string,h.default.PropTypes.node]),searchPromptText:h.default.PropTypes.oneOfType([h.default.PropTypes.string,h.default.PropTypes.node])},v={autoload:!0,cache:{},children:s,ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",options:[],searchPromptText:"Type to search"},m=function(e){function t(e,n){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.state={isLoading:!1,options:e.options},this._onInputChange=this._onInputChange.bind(this)}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.autoload;e&&this.loadOptions("")}},{key:"componentWillUpdate",value:function(e,t){var n=this,r=["options"];r.forEach(function(t){n.props[t]!==e[t]&&n.setState(i({},t,e[t]))})}},{key:"loadOptions",value:function e(t){var n=this,r=this.props,i=r.cache,e=r.loadOptions;if(i&&i.hasOwnProperty(t))return void this.setState({options:i[t]});var a=function e(r,a){if(e===n._callback){n._callback=null;var o=a&&a.options||[];i&&(i[t]=o),n.setState({isLoading:!1,options:o})}};this._callback=a;var o=e(t,a);return o&&o.then(function(e){return a(null,e)},function(e){return a(e)}),this._callback&&!this.state.isLoading&&this.setState({isLoading:!0}),t}},{key:"_onInputChange",value:function(e){var t=this.props,n=t.ignoreAccents,r=t.ignoreCase;return n&&(e=(0,g.default)(e)),r&&(e=e.toLowerCase()),this.loadOptions(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.loadingPlaceholder,r=e.placeholder,i=e.searchPromptText,a=this.state,o=a.isLoading,s=a.options,l={noResultsText:o?n:i,placeholder:o?n:r,options:o?[]:s};return t(u({},this.props,l,{isLoading:o,onInputChange:this._onInputChange}))}}]),t}(f.Component);t.default=m,m.propTypes=_,m.defaultProps=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),o=r(a),s=n(621),u=r(s),l=o.default.createClass({displayName:"AsyncCreatableSelect",render:function(){var e=this;return o.default.createElement(u.default.Async,this.props,function(t){return o.default.createElement(u.default.Creatable,e.props,function(e){return o.default.createElement(u.default,i({},t,e,{onInputChange:function(n){return e.onInputChange(n),t.onInputChange(n)}}))})})}});e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){return p.default.createElement(y.default,e)}function o(e){var t=e.option,n=e.options,r=e.labelKey,i=e.valueKey;return 0===n.filter(function(e){return e[r]===t[r]||e[i]===t[i]}).length}function s(e){var t=e.label;return!!t}function u(e){var t=e.label,n=e.labelKey,r=e.valueKey,i={};return i[r]=t,i[n]=t,i.className="Select-create-option-placeholder",i}function l(e){return'Create option "'+e+'"'}function c(e){var t=e.keyCode;switch(t){case 9:case 13:case 188:return!0}return!1}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=n(4),p=r(h),d=n(621),y=r(d),g=n(624),_=r(g),v=n(626),m=r(v),b=p.default.createClass({displayName:"CreatableSelect",propTypes:{children:p.default.PropTypes.func,filterOptions:p.default.PropTypes.any,isOptionUnique:p.default.PropTypes.func,isValidNewOption:p.default.PropTypes.func,menuRenderer:p.default.PropTypes.any,newOptionCreator:p.default.PropTypes.func,options:p.default.PropTypes.array,promptTextCreator:p.default.PropTypes.func,shouldKeyDownEventCreateNewOption:p.default.PropTypes.func},statics:{isOptionUnique:o,isValidNewOption:s,newOptionCreator:u,promptTextCreator:l,shouldKeyDownEventCreateNewOption:c},getDefaultProps:function(){return{filterOptions:_.default,isOptionUnique:o,isValidNewOption:s,menuRenderer:m.default,newOptionCreator:u,promptTextCreator:l,shouldKeyDownEventCreateNewOption:c}},createNewOption:function(){var e=this.props,t=e.isValidNewOption,n=e.newOptionCreator,r=e.options,i=void 0===r?[]:r;e.shouldKeyDownEventCreateNewOption;if(t({label:this.inputValue})){var a=n({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),o=this.isOptionUnique({option:a});o&&(i.unshift(a),this.select.selectValue(a))}},filterOptions:function e(){var t=this.props,e=t.filterOptions,n=t.isValidNewOption,r=(t.options,t.promptTextCreator),i=arguments[2]||[],a=e.apply(void 0,arguments)||[];if(n({label:this.inputValue})){var o=this.props.newOptionCreator,s=o({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),u=this.isOptionUnique({option:s,options:i.concat(a)});if(u){var l=r(this.inputValue);this._createPlaceholderOption=o({label:l,labelKey:this.labelKey,valueKey:this.valueKey}),a.unshift(this._createPlaceholderOption)}}return a},isOptionUnique:function e(t){var n=t.option,r=t.options,e=this.props.isOptionUnique;return r=r||this.select.filterOptions(),e({labelKey:this.labelKey,option:n,options:r,valueKey:this.valueKey})},menuRenderer:function e(t){var e=this.props.menuRenderer;return e(f({},t,{onSelect:this.onOptionSelect}))},onInputChange:function(e){this.inputValue=e},onInputKeyDown:function(e){var t=this.props.shouldKeyDownEventCreateNewOption,n=this.select.getFocusedOption();n&&n===this._createPlaceholderOption&&t({keyCode:e.keyCode})&&(this.createNewOption(),e.preventDefault())},onOptionSelect:function(e,t){e===this._createPlaceholderOption?this.createNewOption():this.select.selectValue(e)},render:function(){var e=this,t=this.props,n=t.children,r=void 0===n?a:n,o=(t.newOptionCreator,t.shouldKeyDownEventCreateNewOption,i(t,["children","newOptionCreator","shouldKeyDownEventCreateNewOption"])),s=f({},o,{allowCreate:!0,filterOptions:this.filterOptions,menuRenderer:this.menuRenderer,onInputChange:this.onInputChange,onInputKeyDown:this.onInputKeyDown,ref:function(t){e.select=t,t&&(e.labelKey=t.props.labelKey,e.valueKey=t.props.valueKey)}});return r(s)}});e.exports=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(4),a=r(i),o=n(265),s=r(o),u=a.default.createClass({displayName:"Option",propTypes:{children:a.default.PropTypes.node,className:a.default.PropTypes.string,instancePrefix:a.default.PropTypes.string.isRequired,isDisabled:a.default.PropTypes.bool,isFocused:a.default.PropTypes.bool,isSelected:a.default.PropTypes.bool,onFocus:a.default.PropTypes.func,onSelect:a.default.PropTypes.func,onUnfocus:a.default.PropTypes.func,option:a.default.PropTypes.object.isRequired,optionIndex:a.default.PropTypes.number},blockEvent:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)},handleMouseDown:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)},handleMouseEnter:function(e){this.onFocus(e)},handleMouseMove:function(e){this.onFocus(e)},handleTouchEnd:function(e){this.dragging||this.handleMouseDown(e)},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},onFocus:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)},render:function(){var e=this.props,t=e.option,n=e.instancePrefix,r=e.optionIndex,i=(0,s.default)(this.props.className,t.className);return t.disabled?a.default.createElement("div",{className:i,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.props.children):a.default.createElement("div",{className:i,style:t.style,role:"option",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:n+"-option-"+r,title:t.title},this.props.children)}});e.exports=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(4),a=r(i),o=n(265),s=r(o),u=a.default.createClass({displayName:"Value",propTypes:{children:a.default.PropTypes.node,disabled:a.default.PropTypes.bool,id:a.default.PropTypes.string,onClick:a.default.PropTypes.func,onRemove:a.default.PropTypes.func,value:a.default.PropTypes.object.isRequired},handleMouseDown:function(e){if("mousedown"!==e.type||0===e.button)return this.props.onClick?(e.stopPropagation(),void this.props.onClick(this.props.value,e)):void(this.props.value.href&&e.stopPropagation())},onRemove:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)},handleTouchEndRemove:function(e){this.dragging||this.onRemove(e)},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},renderRemoveIcon:function(){if(!this.props.disabled&&this.props.onRemove)return a.default.createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"×")},renderLabel:function(){var e="Select-value-label";return this.props.onClick||this.props.value.href?a.default.createElement("a",{className:e,href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):a.default.createElement("span",{className:e,role:"option","aria-selected":"true",id:this.props.id},this.props.children)},render:function(){return a.default.createElement("div",{className:(0,s.default)("Select-value",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}});e.exports=u},,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=f(c.default,t,(0,a.compose)((0,a.applyMiddleware)((0,u.routerMiddleware)(e))));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=i;var a=n(227),o=n(639),s=r(o),u=n(248),l=n(640),c=r(l),f=(0,a.applyMiddleware)(s.default)(a.createStore)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onWidget:!1,disableThemeChange:!1};arguments[1];return e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{logged:!1,uid:null,username:"",avatar:"",bifuVIP:!1,bitreeToken:null,tickers:[],tickerMarkets:[],tickerDraggingIndex:null},t=arguments[1],n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0;switch(t.type){case ue.REQUEST_LOGIN_STATUS:return e;case ue.RECEIVE_LOGIN_STATUS:return parseInt(t.id)>0?(s=[],u=t.tickers.map(function(e){var t=e.split(":"),o=J(t,2);return n=o[0],r=o[1],!!(i=ne.find(se.MARKETS,{mid:r}))&&(!!(a=ne.find(se.COINS,{coin:n,mid:r}))&&(s.push(e),a))}).filter(Boolean),(0,oe.default)({},e,{logged:!0,uid:parseInt(t.id),username:t.name,avatar:t.avatar,bifuVIP:t.bifuVIP,tickers:s,tickerMarkets:u})):e;case ue.RECEIVE_BITREES_TOKEN:return ne.assign({},e,{bitreeToken:t.token});case ue.PUSH_USER_TICKER:if(!e.logged)return e;var f=t.ticker.split(":"),h=J(f,2);return n=h[0],r=h[1],(i=ne.find(se.MARKETS,{mid:r}))?(a=ne.find(se.COINS,{coin:n,mid:r}),a?(0,oe.default)({},e,{tickers:[].concat(o(e.tickers),[t.ticker]),tickerMarkets:[].concat(o(e.tickerMarkets),[a])}):e):e;case ue.REMOVE_USER_TICKER:return e.logged?(l=e.tickers.indexOf(t.ticker),l===-1?e:(0,oe.default)({},e,{tickers:[].concat(o(e.tickers.slice(0,l)),o(e.tickers.slice(l+1))),tickerMarkets:[].concat(o(e.tickerMarkets.slice(0,l)),o(e.tickerMarkets.slice(l+1)))})):e;case ue.UPDATE_CUSTOM_TICKERS:return e.logged?(c="delete"===t.action?t.tickers:ne.difference(e.tickers,t.tickers),c.length?(s=e.tickers.slice(),u=e.tickerMarkets.slice(),c.forEach(function(e){l=s.indexOf(e),l>=0&&(s.splice(l,1),u.splice(l,1))}),(0,oe.default)({},e,{tickers:s,tickerMarkets:u})):e):e;case ue.UPDATE_TICKER_DRAGGING_INDEX:return s=t.items?[].concat(o(t.items.map(function(e){return e.db_key}))):[].concat(o(e.tickers)),u=t.items?[].concat(o(t.items)):[].concat(o(e.tickerMarkets)),(0,oe.default)({},e,{tickerDraggingIndex:t.index,tickers:s,tickerMarkets:u});default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uploaded:!1,uploading:!1,file:null,url:""},t=arguments[1];switch(t.type){case ue.UPLOAD_IMAGE:return ne.assign({},e,{uploading:!0,uploaded:!1,file:null,url:""});case ue.IMAGE_UPLOADED:return ne.assign({},e,{uploaded:!0,uploading:!1,file:t.file,url:t.result.data});default:return e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{library:!1,authorize:!1},t=arguments[1];switch(t.type){case ue.RECEIVE_RONGIM:return(0,oe.default)({},e,{library:!0});case ue.AUTH_RONGIM:return(0,oe.default)({},e,{authorize:!0});default:return e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{val:1,enlarge:1,fixed:1};arguments[1];return e}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case ue.RECEIVE_PERIOD_DATA:return t.data;default:return e}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1,Component:"div",title:"",className:null,initProps:{}},t=arguments[1];switch(t.type){case ue.CLOSE_MODAL:return(0,oe.default)({},e,{open:!1,Component:"div",title:"",className:null,initProps:{}});case ue.OPEN_MODAL:return(0,oe.default)({},e,{open:!0,Component:t.component,title:t.title,className:t.className,initProps:Q({},t.initProps)});default:return e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indicators:[],maxIndicator:3,indicatorNav:!0},t=arguments[1];switch(t.type){case ue.ADD_INDICATOR:return e.indicators.length>=e.maxIndicator?e:(0,oe.default)({},e,{indicators:[].concat(o(e.indicators),[t.indicator])});case ue.DEL_INDICATOR:var n=ne.indexOf(e.indicators,t.indicator);return n===-1?e:(0,oe.default)({},e,{indicators:[].concat(o(e.indicators.slice(0,n)),o(e.indicators.slice(n+1)))});case ue.SET_INDICATORS:return(0,oe.default)({},e,{indicators:t.indicators.slice(0,e.maxIndicator)});case ue.SET_INDICATOR_BY_INDEX:return e.indicators.indexOf(t.indicator)>-1?e:(0,oe.default)({},e,{indicators:[].concat(o(e.indicators.slice(0,t.index)),[t.indicator],o(e.indicators.slice(t.index+1)))});case ue.SWITCH_INDICATOR_NAV:return(0,oe.default)({},e,{indicatorNav:t.show});case ue.MAX_INDICATOR_LENGTH:return(0,oe.default)({},e,{maxIndicator:4});default:return e}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{coin:null,market:null,showMarket:null,marketName:null,coinSymbol:null,currency:null},t=arguments[1];switch(t.type){case ue.SWITCH_MARKET:if(e.coin.symbol===t.coin.symbol)return e;var n=(0,se.getCoinName)(t.coin,!0),r=J(n,3),i=r[1],a=r[2],o=ve.default.get(t.market.name);return(0,oe.default)({},e,{coin:t.coin,market:t.market,marketName:o,coinSymbol:i,currency:a});case ue.SHOW_MARKET:return e.showMarket===t.mid?e:(0,oe.default)({},e,{showMarket:t.mid});default:return e}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se.PERIOD_15MINUTES,t=arguments[1];switch(t.type){case ue.SWITCH_PERIOD:return t.period;default:return e}}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le.THEME_DARK,t=arguments[1];switch(t.type){case ue.TOGGLE_THEME:return e===le.THEME_LIGHT?le.THEME_DARK:le.THEME_LIGHT;case ue.SWITCH_THEME:return t.theme;default:return e}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{top:0,right:0},t=arguments[1];switch(t.type){case ue.SHOW_PERIODS:return e.top===t.top&&e.right===t.right?e:(0,oe.default)({},e,{top:t.top,right:t.right});default:return e}}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case ue.TOGGLE_FULL_SCREEN:return!e;default:return e}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{update:0,counter:0},t=arguments[1];switch(t.type){case ue.UPDATE_TIMER:return(0,oe.default)({},e,{update:1^e.update,counter:0});case ue.INCR_TIMER:return(0,oe.default)({},e,{counter:e.counter+1});default:return e}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se.SETTING_MAIN_INDICATOR,t=arguments[1];switch(t.type){case ue.SHOW_SETTING:return t.setting;default:return e}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se.INDICATOR_MA,t=arguments[1];switch(t.type){case ue.SWITCH_MAIN_INDICATOR:return t.indicator;default:return e}}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se.STICK_STYLE_CANDLE,t=arguments[1];switch(t.type){case ue.SWITCH_STICK_STYLE:return t.style;default:return e}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se.AXIS_SCALE_LINEAR,t=arguments[1];switch(t.type){case ue.SWITCH_AXIS_SCALE:return t.scale;default:return e}}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments[1];switch(t.type){case ue.SET_INDICATOR_PARAMS:return(0,oe.default)({},e,a({},t.indicator,t.params.slice(0)));case ue.SET_INDICATOR_SINGLE_PARAM:var n=e[t.indicator];return(0,oe.default)({},e,a({},t.indicator,[].concat(o(n.slice(0,t.index)),[t.value],o(n.slice(t.index+1)))));default:return e}}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,request:0},t=arguments[1],n=void 0;switch(t.type){case ue.REQUEST_DEPTH_DATA:case ue.REQUEST_PERIOD_DATA:case ue.REQUEST_TRADE_DATA:return t.showLoading?(n=e.request+1,(0,oe.default)({},e,{loading:!0,request:n})):e;case ue.RECEIVE_DEPTH_DATA:case ue.RECEIVE_PERIOD_DATA:case ue.RECEIVE_TRADE_DATA:n=e.request-1;var r=n>0;return(0,oe.default)({},e,{request:n,loading:r});default:return e}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initPoint:null,tool:se.TOOL_CROSSCURSOR},t=arguments[1];switch(t.type){case ue.SWITCH_TOOL:return Q({},e,{initPoint:t.initPoint||null,tool:t.tool});default:return e}}function S(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e={},a(e,se.INDICATOR_BTI,{}),a(e,se.INDICATOR_LSI,{}),a(e,se.INDICATOR_NEWBIE,{}),e),n=arguments[1];switch(n.type){case ue.RECEIVE_QUOTA_DATA:var r=void 0,i=void 0,s=void 0,u=void 0;s={};for(var l=0,c=n.params.length;l<c;++l)if(r=n.params[l],i=n.data[r.type.toLowerCase()],Array.isArray(i)&&i.length){u=i[0].slice(),i=i.map(function(e){return e[0]*=1e3,e});var f=ne.at(t,r.type+"."+n.step+".data")[0]||[];s[r.type]=a({},n.step,{data:[].concat(o(i),o(f.slice(1))).slice(0,1e3),newColumn:f.length?i.slice():[],last:u})}return ne.assign({},t,s);default:return t}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{latest_price:{price:0,style:0},last_tid:0,need_refresh_trade:!1,applied_txes:{},cached_txes:[],unsorted_txes:[]},t=arguments[1];switch(t.type){case ue.SWITCH_MARKET:return{latest_price:{price:0,style:0},last_tid:0,need_refresh_trade:!1,applied_txes:{},cached_txes:[],unsorted_txes:[]};case ue.RECEIVE_TRADE_DATA:var n=void 0,r=void 0;n=function(){var e=void 0,n=void 0,r=void 0,i=void 0,a=void 0;for(i=t.data.reverse(),r=[],e=0,n=i.length;e<n;++e)a=i[e],r.push(a);return r}();var i=e.last_tid,a=e.applied_txes,o=e.cached_txes,s=!1,u=[],l={price:e.latest_price.price,style:e.latest_price.style},c=void 0;if(n.length){var f=R(a,o,u,i,n),h=J(f,2),p=h[0];h[1];if(p){for(i=p;(r=o[0])&&r[se.TX_CREATED_AT]<Date.now()-3e5;)delete a[r[se.TX_TID]],o.shift();return s=!t.reload,u.sort(function(e,t){return e[se.TX_TID]-t[se.TX_TID]}),c=ne.last(u),c&&(l.price=c[se.TX_PRICE],l.style="bid"===c[se.TX_TYPE]?"up":"down",se.onWidget||(document.title=""+(0,se.noExponents)(l.price)+se.currencyName+" "+se.pageTitle)),{latest_price:l,last_tid:i,need_refresh_trade:s,applied_txes:a,cached_txes:o,unsorted_txes:u}}}return e;default:return e}}function A(e){var t=void 0;return t={},t[se.TX_TID]=parseInt(e.tid),t[se.TX_COM_TID]=t[se.TX_TID],t[se.TX_PRICE]=parseFloat(e.price),t[se.TX_AMOUNT]=parseFloat(e.amount),t[se.TX_TICK]=parseInt(e.date),t[se.TX_CREATED_AT]=Date.now(),t[se.TX_TYPE]=e.trade_type,t}function R(e,t,n,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0;for(s=null,o=0,l=0,c=i.length;l<c;++l)a=i[l],s=a.tid=parseInt(a.tid),e[a.tid]||a.tid<=r||(u=A(a),e[s]=u,t.push(u),n.push(u),++o);return[s,o]}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:se.SUB_COMPONENT_ORDERS,Component:pe.default},t=arguments[1];switch(t.type){case ue.SWITCH_SUB_COMPONENT:return(0,oe.default)({},e,{id:t.id,Component:t.Component});default:return e}}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{depthLimit:100,updatedByHttp:!0,data:(0,ge.depth_init)(1),viewMounted:!1},t=arguments[1];switch(t.type){case ue.INIT_DEPTH:return(0,oe.default)({},e,{data:(0,ge.depth_init)(t.group)});case ue.CLEAR_DEPTH:case ue.SWITCH_MARKET:return e=(0,se.clone)(e),(0,ge.depth_clear)(e.data),e;case ue.CHANGE_DEPTH_LIMIT:return(0,oe.default)({},e,{depthLimit:t.limit});case ue.DEPTH_VIEW_MOUNTED:return(0,oe.default)({},e,{viewMounted:!0});case ue.UPDATE_DEPTH:var n=t.updatedByHttp||!1,r=[["ask",t.data.asks.sort(function(e,t){return e[0]-t[0]})],["bid",t.data.bids.sort(function(e,t){return t[0]-e[0]})]];(0,ge.depth_clear)(e.data);for(var i=0,a=r.length;i<a;i++)for(var o=J(r[i],2),s=o[0],u=o[1],l=0,c=u.length;l<c;l++){var f=u[l];f[2]=s,(0,ge.depth_update)(e.data,f)}return(0,oe.default)({},e,{updatedByHttp:n});case ue.CLEAN_DEPTH:return(0,ge.depth_clean)(e.data,t.price),e;case ue.RECEIVE_TRADE_DATA:if(t.reload)return e;var h=void 0,p=void 0,d=void 0,y=void 0;for(d=t.data.reverse(),h=0,p=d.length;h<p;++h)y=d[h],(0,ge.depth_clean)(e.data,parseFloat(y.price));return e;default:return e}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tick:null,price:0},t=arguments[1];switch(t.type){case ue.UPDATE_DAY_OPEN:return{tick:t.tick,price:t.price};default:return e}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case ue.ADD_NOTIFICATION:return e.indexOf(t.notification)===-1?(t.notification.uid=t.notification.uid||Te++,t.notification.level=t.notification.level||"info","number"!=typeof t.notification.autoDismiss&&0!==t.notification.autoDismiss&&(t.notification.autoDismiss=5e3),[t.notification].concat(o(e))):e;case ue.REMOVE_NOTIFICATION:var n=void 0;return(n=e.indexOf(t.notification))>-1?[].concat(o(e.slice(0,n)),o(e.slice(n+1))):e;default:return e}}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[],users:{}},t=arguments[1],n=function(){switch(t.type){case ue.RECEIVE_LOGIN_STATUS:return parseInt(t.id)>0?{v:ne.assign({},e,{users:Q({},e.users,a({},t.id.toString(),"我（"+t.name+"）"))})}:{v:e};case ue.PUSH_BITREES_MESSAGE:return Array.isArray(t.messages)||(t.messages=[t.messages]),{v:ne.assign({},e,{messages:[].concat(o(e.messages),o(t.messages)).map(function(t){return t.senderUserId=""+t.senderUserId,!t.__html&&t.senderUserId in e.users&&(t.__html=['<span class="name">',e.users[t.senderUserId],"：</span>",'<span class="msg">',t.content.content,"</span>"].join("")),t})})};case ue.RECEIVE_USERNAMES:var n=Q({},e.users,t.usernames);return{v:ne.assign({},e,{users:n,messages:[].concat(o(e.messages)).map(function(e){return e.senderUserId=""+e.senderUserId,!e.__html&&e.senderUserId in n&&(e.__html=['<span class="name">',n[e.senderUserId],"：</span>",'<span class="msg">',e.content.content,"</span>"].join("")),e})})};default:return{v:e}}}();if("object"===("undefined"==typeof n?"undefined":$(n)))return n.v}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];switch(t.type){case ue.EDIT_MESSAGE:return t.text=ne.trimStart(t.text).replace(/\s{2,}/g," "),t.text.length>140?e:t.text;case ue.APPEND_MESSAGE:return t.text=e+ne.trimStart(t.text).replace(/\s{2,}/g," "),t.text.length>140?e:t.text;default:return e}}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1,loading:!1,error:null,imageUri:null},t=arguments[1];switch(t.type){case ue.OPEN_IMAGE_VIEWER:return ne.assign({},e,{open:!0,loading:!0});case ue.CLOSE_IMAGE_VIEWER:return ne.assign({},e,{open:!1,loading:!1,error:null,imageUri:null});case ue.IMAGE_VIEWER_LOADED:return ne.assign({},e,{loading:!1,error:t.error,imageUri:t.imageUri});default:return e}}function B(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case ue.OPEN_EMOJI:return!0;case ue.CLOSE_EMOJI:return!1;case ue.TOGGLE_EMOJI:return!e;default:return e}}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case ue.UPDATE_TICKER:return ne.assign({},e,a({},t.symbol,t.data));default:return e}}function V(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case ue.TOGGLE_TOP_NAV:return!e;default:return e}}function U(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case ue.TOGGLE_LEFT_BAR:return null===t.open?!e:Boolean(t.open);default:return e}}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mid:null,cid:null,currency:null,showCurrency:"cny",high:null,low:null,interval:null,amplitude:null},t=arguments[1];switch(t.type){case ue.SELECT_ALARM_MARKET:return(0,oe.default)({},e,{mid:t.mid});case ue.SELECT_ALARM_COIN:return(0,oe.default)({},e,{cid:t.cid,currency:t.currency,showCurrency:t.currency});case ue.SELECT_ALARM_CURRENCY:return(0,oe.default)({},e,{showCurrency:t.currency});case ue.CHANGE_WARNING_VALUE:return(0,oe.default)({},e,a({},t.warning,t.value));default:return e}}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case ue.UPDATE_SYS_ROE:return(0,oe.default)({},e,t.roe);default:return e}}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tickers:[],list:[],mapping:{}},t=arguments[1],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=void 0,p=void 0,d=void 0,y=void 0,g=void 0,_=void 0,v=void 0,m=void 0;switch(t.type){case ue.TOGGLE_WARNINGS:return e=(0,se.clone)(e),t.warnings.close=!t.warnings.close,e;case ue.DELETE_WARNING:e=(0,se.clone)(e),e.tickers=e.tickers.slice();var b=e;if(d=b.tickers,y=b.list,g=b.mapping,u=ne.find(y,{mid:t.warning.mid}),!u)return e;if(c=ne.find(u.list,{cid:t.warning.cid}),!c)return e;var E=c.list.indexOf(t.warning);if(E===-1)return e;c.list.splice(E,1),c.list.length||(u.list.splice(u.list.indexOf(c),1),u.list.length||y.splice(y.indexOf(u),1));var O=t.warning.cid+":"+t.warning.mid;return s=g[O],E=s.indexOf(t.warning),E!==-1&&s.splice(E,1),s.length||delete g[O],E=d.indexOf(O),E!==-1&&0===s.length&&d.splice(E,1),e;case ue.RECEIVE_WARNINGS:e=(0,se.clone)(e),e.tickers=e.tickers.slice();var T=e;d=T.tickers,y=T.list,g=T.mapping,t.warnings.reverse();var w=Ee.default.groupWarnings(t.warnings,["mid","cid"]);for(n=0,r=w.length;n<r;++n)if(o=w[n],O=o.cid+":"+o.mid,h=ne.find(se.MARKETS,{mid:o.mid}),h&&(p=ne.find(h[o.currency+"_coins"],{coin:o.cid}))){for(s=g[O],s||(d.push(O),s=g[O]=[]),g[O]=s.concat(o.list),l&&o.mid===l||(l=o.mid,f=null,u=ne.find(y,{mid:o.mid})),u?(y.splice(y.indexOf(u),1),_=u.name,u.maxTimestamp=Math.max(u.maxTimestamp,o.maxTimestamp)):(_=ve.default.get(h.name),u={mid:o.mid,name:_,maxTimestamp:o.maxTimestamp,list:[]}),i=0,a=y.length;i<a&&y[i].maxTimestamp>=o.maxTimestamp;++i);if(y.splice(i,0,u),f&&o.cid===f||(f=o.cid,c=ne.find(u.list,{cid:o.cid})),c)u.list.splice(u.list.indexOf(c),1),v=c.name,c.maxTimestamp=Math.max(c.maxTimestamp,o.maxTimestamp);else{var P=(0,se.getCoinName)(p),x=J(P,2);v=x[0],m=x[1],v.length||(v=m),c={cid:o.cid,name:v,currencySymbol:(0,se.getCurrencySymbol)(p.currency),maxTimestamp:o.maxTimestamp,list:[]}}for(i=0,a=u.list.length;i<a&&u.list[i].maxTimestamp>=o.maxTimestamp;++i);u.list.splice(i,0,c),o.list.forEach(function(e){e.name=_+" "+v,c.list.unshift(e)})}return e;default:return e}}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case ue.TOGGLE_MORE_TICKERS:return(0,oe.default)({},e,a({},t.cat,!e[t.cat]));default:return e}}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{btc:!1,ltc:!1},t=arguments[1];switch(t.type){case ue.TOGGLE_TICKER_MODAL_LIST:return(0,oe.default)({},e,a({},t.cat,"undefined"!=typeof e[t.cat]&&!e[t.cat]));default:return e}}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{top:[],list:[],init:!1,loading:!1},t=arguments[1];switch(t.type){case ue.REQUEST_NEWS_LIST:var n=t.refresh;return(0,oe.default)({},e,{loading:!0,list:n?[]:e.list,top:n?[]:e.top});case ue.RECEIVE_NEWS_LIST:if(t.append)return(0,oe.default)({},e,{list:[].concat(o(e.list),o(t.data.list.map(function(e){var t=J(e,3),n=t[0],r=t[1],i=t[2];
return{id:n,title:r,createtime:i}}))),loading:!1});var r=t.data.top.map(function(e){var t=J(e,3),n=t[0],r=t[1],i=t[2];return{id:n,title:r,createtime:i}}),i=t.data.list.map(function(e){var t=J(e,3),n=t[0],r=t[1],i=t[2];return{id:n,title:r,createtime:i}});return(0,oe.default)({},e,{list:i,top:r,init:!0,loading:!1});default:return e}}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],count:0,init:!1,loading:!1},t=arguments[1];switch(t.type){case ue.REQUEST_WEIBO_LIST:var n=t.replace;return(0,oe.default)({},e,{loading:!0,list:n?[]:e.list});case ue.RECEIVE_WEIBO_LIST:return"post"==t.append?(0,oe.default)({},e,{list:[].concat(o(e.list),o(t.data.list)),loading:!1}):"pre"==t.append?(0,oe.default)({},e,{list:[].concat(o(t.data.list),o(e.list)),count:0,loading:!1}):(0,oe.default)({},e,{list:t.data.list,init:!0,count:0,loading:!1});case ue.RECEIVE_WEIBO_COUNT:return(0,oe.default)({},e,{count:t.data.count,loading:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Z=n(227),ee=n(248),te=n(255),ne=i(te),re=n(256),ie=r(re),ae=n(534),oe=r(ae),se=n(300),ue=n(297),le=n(366),ce=n(367),fe=r(ce),he=n(516),pe=r(he),de=n(620),ye=(r(de),n(511)),ge=(r(ye),n(415)),_e=n(301),ve=r(_e),me=n(416),be=(r(me),n(641)),Ee=r(be),Oe={};[se.INDICATOR_MA,se.INDICATOR_EMA,se.INDICATOR_VOLUME,se.INDICATOR_MACD,se.INDICATOR_DMI,se.INDICATOR_DMA,se.INDICATOR_TRIX,se.INDICATOR_BRAR,se.INDICATOR_VR,se.INDICATOR_OBV,se.INDICATOR_EMV,se.INDICATOR_RSI,se.INDICATOR_WR,se.INDICATOR_KDJ,se.INDICATOR_ROC,se.INDICATOR_MTM,se.INDICATOR_BOLL,se.INDICATOR_PSY,se.INDICATOR_StochRSI].forEach(function(e){Oe[e]=ie.default.canUseDOM?fe.default[e+"Params"]:fe.default[e+"DefaultParams"]});var Te=0,we=(0,Z.combineReducers)({meta:s,sysRoe:W,warnings:K,alarmForm:G,leftBar:U,topNav:V,$tickers:H,tickerList:Y,imageViewer:F,emojiStatus:B,$notifications:N,$user:u,$message:j,uploadStatus:l,RongIMLibStatus:c,bitrees:L,scale:f,dayOpen:D,periodData:h,$depth:M,$trade:C,selectIndicators:d,toggleModal:p,selectMarket:y,selectPeriod:g,selectTheme:_,periodsPopupBodyStyle:v,fullscreen:m,timer:b,selectSetting:E,selectMainIndicator:O,selectStickStyle:T,selectAxisScale:w,indicatorParams:P,asyncStatus:x,selectTool:I,asyncQuotaStatus:S,selectSubComponent:k,tickerModal:X,routing:ee.routerReducer,news:z,weibo:q});t.default=we},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(255),a=r(i),o=function(){var e=function(e,t){return a.some(e,function(e){return a.isEqual(e,t)})},t=function(t,n){return a.reduce(t,function(t,r){var i=a.pick(r,n);return e(t,i)||t.push(i),t},[])},n=function(e,n){var r=t(e,n);return a.map(r,function(t){return{key:t,vals:a.map(a.filter(e,t),function(e){return a.omit(e,n)})}})};return n.register=function(e,t){return n[e]=function(e,r){return a.map(n(e,r),t)}},n}();o.register("groupMarkets",function(e){return a.assign({},e.key,{coins:a.map(e.vals,function(t){return a.assign({},e.key,t)})})}),o.register("groupWarnings",function(e){var t=0,n=void 0,r=a.map(e.vals,function(r){return n||(n=r.currency),t=Math.max(t,new Date(r.created_at).getTime()),a.assign({},e.key,r)});return a.assign({},e.key,{list:r,maxTimestamp:t,currency:n})}),t.default=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(157),s=n(710),u=r(s),l=a.default.createElement(o.Route,{path:"/widget",component:u.default});t.default=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=(e.selectMarket,e.$trade,e.$depth),r=0;if(ve&&(e.periodData.length?r=e.periodData[0][1]:e.$trade.latest_price.price?r=e.$trade.latest_price.price:e.dayOpen.price&&(r=e.dayOpen.price),r>0)){var i,a,o,s,u,c;i=l([5,2,1],.01,r),1e-7>=i?(u=1e8,a=1e8):(u=Math.pow(10,Math.ceil(Math.log(1/i)/Math.log(10))),a=1),c=0,1>u?u=1:10===u?(u=1,c=1):100===u&&(o=1,c=2),s=i,e.scale={val:s,enlarge:u,fixed:c},n=F.clone(n),n.data=(0,A.depth_init)(s),e.$depth=n,ve=!1}return e}function l(e,t,n){var r,i,a,o,s,u,l;for(a=null,i=o=8;o>=-8;i=--o){for(s=0,u=e.length;u>s;s++)if(r=e[s],l=parseFloat((r*Math.pow(10,i)).toPrecision(8)),!(l/n>t)){a=l;break}if(a)break}return null==a&&(a=1e-8),a}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(4),p=i(h),d=(n(157),n(220)),y=n(255),g=n(256),_=i(g),v=n(257),m=i(v),b=n(302),E=(i(b),n(264)),O=i(E),T=n(275),w=i(T),P=n(296),x=i(P),I=n(490),S=i(I),C=n(297),A=n(415),R=n(366),k=n(355),M=i(k),D=n(367),N=i(D),L=n(492),j=n(300),F=r(j),B=n(301),H=(i(B),_.default.canUseDOM?n(637):null),V=(F.MARKETS,F.COINS,F.INDICATOR_BTI),U=F.INDICATOR_LSI,G=F.INDICATOR_NEWBIE,W=F.INDICATOR_MA,K=F.INDICATOR_EMA,Y=F.INDICATOR_VOLUME,X=F.INDICATOR_MACD,z=F.INDICATOR_DMI,q=F.INDICATOR_DMA,$=F.INDICATOR_TRIX,Q=F.INDICATOR_BRAR,J=F.INDICATOR_VR,Z=F.INDICATOR_OBV,ee=F.INDICATOR_EMV,te=F.INDICATOR_RSI,ne=F.INDICATOR_WR,re=F.INDICATOR_KDJ,ie=F.INDICATOR_ROC,ae=F.INDICATOR_MTM,oe=F.INDICATOR_BOLL,se=F.INDICATOR_PSY,ue=F.INDICATOR_StochRSI,le=F.INDICATORS,ce=(F.PERIOD_BTI,F.PERIOD_LSI,F.PERIOD_NEWBIE,F.TOOL_CURSOR,F.TOOL_CROSSCURSOR,F.TOP_TICKERS,F.TOPTICKERPRIORITY),fe=(F.WARNINGTICKERPRIORITY,F.TICKERPRIORITY,F.sleep),he=(F.serialize,F.__hasProp),pe=F.persistTicker,de=(F.removePersistTicker,F.PERSISTTICKERS),ye=(F.SOCKET_ADDRESS,F.getCurrencyName,F.getCurrencySymbol,F.getCoinName,F.ga,F.socket),ge=[V,U,G],_e=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.removeNotification=n.removeNotification.bind(n),n.onImageViewerClick=n.onImageViewerClick.bind(n),n.resumeSocketStream=n.resumeSocketStream.bind(n),n.subscribeTickers=n.subscribeTickers.bind(n),n.unsubscribeTickers=n.unsubscribeTickers.bind(n),n.exchange=n.exchange.bind(n),n.initRongIM=!1,n.networkNotification={uid:"NETWORKNOTIFICATION",title:"应用提示",message:"网络异常，请刷新页面",autoDismiss:0,level:"error"},n.topTickers=[],n.topTickers.push("btc:btc38","btc:poloniex","btc:bittrex"),n.connectingNotification={title:"币区势提示",message:"正在链接聊天室",autoDismiss:0},n.warningNotification={uid:"WARNINGNOTIFICATION",title:"价格预警提示",message:"",autoDismiss:0,level:"info",onClick:function(){n.sound.stop()}},n.asyncQuotaTimer=null,_.default.canUseDOM){n.sound=new H.sound("/audio/alert",{formats:["ogg","mp3","aac"]}),pe(n.topTickers,ce);var r=e.dispatch,i=M.default.getInstance(),s=e.selectMarket.coin,u=e.selectPeriod;i.setDataScale(e.scale),i.setDispatch(r),i.setCoin(s),i.setStep(u.period),r((0,C.login)()),r((0,C.switchMainIndicator)(N.default.mainIndicator)),r((0,C.switchStickStyle)(N.default.stickStyle)),r((0,C.switchIndicatorNav)(N.default.indicatorNav)),r((0,C.switchAxisScale)(N.default.axisScale));var l=N.default.indicators;Array.isArray(l)&&l.length>0&&r((0,C.setIndicators)(l))}return n}return s(t,e),f(t,[{key:"resumeSocketStream",value:function(){this.pauseSocketStream=!1}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.dispatch;t.selectMarket;ye.on("update:depth",function(t){e.pauseSocketStream||(t.asks=JSON.parse("["+t.asks+"]"),t.bids=JSON.parse("["+t.bids+"]"),n((0,C.updateDepth)(t)),n((0,C.updateTimer)()))}),ye.on("update:trades",function(t){e.pauseSocketStream||(n((0,C.receiveTradeData)(t)),n((0,C.updateTimer)()))}),ye.on("sys:tick",function(t){console.clear&&console.clear(),console.info("We started!");var r=0,i=void 0;(i=function(){e.pauseSocketStream||ye.emit("market.dayOpen",function(e,a){if(null==e&&Array.isArray(a)&&a.length){if(a[0]>=t)return n((0,C.updateDayOpen)(a[0],a[1]));r>=10||(r++,fe(3e3,i))}else r>=10||(r++,fe(5e3,i))})})()}),ye.on("sys:roe",function(e){n((0,C.updateSysRoe)(e))}),ye.on("update:ticker",function(e){for(var t in e)he.call(e,t)&&n((0,C.updateTicker)(t,e[t]))}),ye.on("reconnect",function(e){console.log("attempt:",e),M.default.getInstance().updateDataAndDisplay()}),ye.on("connect",function(){})}},{key:"subscribeTickers",value:function(e){"string"==typeof e&&(e=[e]),ye.emit("channel.ticker.subscribe",e)}},{key:"unsubscribeTickers",value:function(e){"string"==typeof e&&(e=[e]),e=(0,y.difference)(e,de),e.length&&ye.emit("channel.ticker.unsubscribe",e)}},{key:"subscribeTopTickers",value:function(){ye.emit("channel.ticker.subscribe",this.topTickers)}},{key:"componentWillReceiveProps",value:function(e){var t=M.default.getInstance();e.dispatch,e.$user;if(e.leftBar!==this.props.leftBar&&(N.default.tools=e.leftBar),(0,y.isEqual)(e.scale,this.props.scale)||t.setDataScale(e.scale),!(0,y.isEqual)(e.$trade.last_tid,this.props.$trade.last_tid)&&e.$trade.need_refresh_trade&&(t.pushData("frame0.k0",e.$trade.unsorted_txes.slice()),t.redraw("All",!0)),e.periodData.length&&!(0,y.isEqual)(e.periodData,this.props.periodData)&&(0,L.updateData)(e.periodData),(0,y.isEqual)(e.$depth,this.props.$depth)?null===t.getDepth()&&t.updateDepth(this.props.$depth):t.updateDepth(e.$depth),e.selectIndicators.indicatorNav!==this.props.selectIndicators.indicatorNav&&(N.default.indicatorNav=e.selectIndicators.indicatorNav,t.switchIndicatorNav(N.default.indicatorNav),t.redraw("All",!0)),(0,y.isEqual)(e.selectIndicators.indicators,this.props.selectIndicators.indicators)||(N.default.indicators=e.selectIndicators.indicators,t.setIndicators(e.selectIndicators.indicators.filter(function(e){return void 0!==(0,y.find)(le,{key:e})}))),!(0,y.isEqual)(e.selectMarket.coin,this.props.selectMarket.coin)){this.pauseSocketStream=!0;var n=e.selectMarket.coin;ye.emit("market.unsubscribe"),t.setCoin(n),t.updateDataAndDisplay(!0,this.resumeSocketStream)}if(!(0,y.isEqual)(e.selectPeriod,this.props.selectPeriod)){this.pauseSocketStream=!0,N.default.step=e.selectPeriod.period,t.setStep(e.selectPeriod.period);var r=(0,y.intersection)(ge,this.props.selectIndicators.indicators);r.length&&fetchQuotaDataLoop(r,parseInt(e.selectPeriod.period/60)),t.updateDataAndDisplay(!1,this.resumeSocketStream)}e.selectMainIndicator!==this.props.selectMainIndicator&&(N.default.mainIndicator=e.selectMainIndicator,t.setMainIndicatorInterface(e.selectMainIndicator)),e.selectStickStyle!==this.props.selectStickStyle&&(N.default.stickStyle=e.selectStickStyle,t.setChartStyle("frame0.k0",e.selectStickStyle),t.redraw("All",!0)),e.selectAxisScale!==this.props.selectAxisScale&&(N.default.axisScale=e.selectAxisScale,t.setAxisScale("frame0.k0",e.selectAxisScale),t.redraw("All",!0)),e.selectTheme!==this.props.selectTheme&&(N.default.theme=e.selectTheme,(0,R.setTheme)(e.selectTheme),t.redraw("All",!0)),e.selectTool.tool!==this.props.selectTool.tool&&t.setRunningMode(e.selectTool.tool);var i=this.props.indicatorParams,a=e.indicatorParams;[W,K,Y,X,z,q,$,Q,J,Z,ee,te,ne,re,ie,ae,oe,se,ue].every(function(e){var n=a[e];if(!Array.isArray(n))return!0;n=n.map(function(e){return parseInt(e)||0});var r=i[e],o=N.default[e+"DefaultParams"],s=e+"Params";return!!(0,y.isEqual)(n,r)||((0,y.isEqual)(n,o)?(N.default[s]=null,r=o):(N.default[s]=n,r=n),t.setIndicatorParameters(e,r),t.redraw("All",!0),!1)})}},{key:"removeNotification",value:function(e){var t=this.props.dispatch;t((0,C.removeNotification)(e))}},{key:"onImageViewerClick",value:function(){var e=this.props.dispatch;e((0,C.closeImageViewer)())}},{key:"exchange",value:function(e,t,n,r){var i=this.props,a=i.sysRoe,o=i.$tickers;if(r=parseFloat(r),t===n)return r;var s=6;"btc"===t?(t="btc38"===e?"cny":"usd",r*=o["btc:"+e].last):"btc"===n&&(n="btc38"===e?"cny":"usd",s=9,r/=o["btc:"+e].last);var u=t+"2"+n,l=a[u]||1;return l?parseFloat(String.fromFloat(r*l,s)):r}},{key:"render",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.meta,i=(t.warnings,t.sysRoe,t.alarmForm,t.leftBar),a=(t.$tickers,t.tickerList,t.imageViewer),o=(t.emojiStatus,t.$notifications),s=(t.$user,t.$message,t.uploadStatus,t.RongIMLibStatus,t.bitrees,t.dayOpen,t.scale,t.$depth,t.$trade,t.selectTheme),u=t.fullscreen,l=t.selectTool,f=(t.selectSubComponent,t.selectMarket);t.toggleModal,t.tickerModal;return p.default.createElement("div",{id:"container",className:s+(r.onWidget?" on-widget":""),ref:"container"},u?null:p.default.createElement(x.default,{dispatch:n,meta:r,fullscreen:u,selectTool:l.tool,leftBar:i,selectMarket:f}),p.default.createElement(S.default,c({},this.props,{resumeSocketStream:this.resumeSocketStream})),p.default.createElement("div",{id:"notifications"},p.default.createElement(m.default,{transitionName:"notification",transitionEnterTimeout:300,transitionLeaveTimeout:300},o.map(function(t){return t.autoDismiss>0&&function(t){setTimeout(function(){e.removeNotification(t)},t.autoDismiss)}(t),p.default.createElement("div",{key:t.uid,className:"notification notification-"+t.level,onClick:function(){e.removeNotification(t),"function"==typeof t.onClick&&t.onClick()}},p.default.createElement("h4",{className:"notification-title"},t.title),p.default.createElement("div",{className:"notification-message"},t.message),p.default.createElement("span",{className:"notification-dismiss"},"×"))}))),p.default.createElement("div",{id:"imageViewer",className:a.open?"opened":"",onClick:this.onImageViewerClick},p.default.createElement("div",{className:"viewer-wrap"},p.default.createElement("div",{className:"viewer-body"},a.loading?"正在加载…":a.error?a.error:p.default.createElement("img",{src:a.imageUri})),p.default.createElement("button",{className:"icon-btn icon-close"}))),p.default.createElement(w.default,this.props),p.default.createElement(O.default,{id:"tooltip_left",place:"left",type:s,effect:"solid",border:!0}),p.default.createElement(O.default,{id:"tooltip_right",place:"right",type:s,effect:"solid",border:!0}),p.default.createElement(O.default,{id:"tooltip_bottom",place:"bottom",type:s,effect:"solid",globalEventOff:"click",border:!0}))}}]),t}(h.Component),ve=!0;t.default=(0,d.connect)(u)(_e)}]);