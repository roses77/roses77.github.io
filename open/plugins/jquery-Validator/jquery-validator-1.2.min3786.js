var V,v;!function(a){a&&!V&&(V=function(){},V.fn=V.prototype,V.pattern={},V.fn.pre={trim:function(b){return a.trim(b)},trimAll:function(a){return V.pattern.__whiteSpace||(V.pattern.__whiteSpace=/\s/g),a?a.replace(V.pattern.__whiteSpace,""):a},lower:function(a){return a?a.toLowerCase():a},upper:function(a){return a?a.toUpperCase():a},flush:function(a,b){return b&&b.val(a),a}},V.util={parseFormat:function(a){var b=a.indexOf("/"),c=[a,""];return b>0&&(c[0]=a.substring(0,b),c[1]=a.substr(b+1)),c},parseIntervalPattern:function(a){if(!V.pattern[a]){if(V.pattern.__interval||(V.pattern.__interval=/^([\[\(])(\d+(\.\d+)?)?(,)?(\d+(\.\d+)?)?([\]\)])$/),!V.pattern.__interval.test(a)||!RegExp.$2&&!RegExp.$4)throw"Unexpected pattern:"+a;var b={min:RegExp.$2,max:RegExp.$5};RegExp.$4==RegExp.$5?b.equals=!0:(b.left="["==RegExp.$1?">=":">",b.right="]"==RegExp.$7?"<=":"<"),V.pattern[a]=b}return V.pattern[a]},parseMessage:function(b,c,d){return b.replace(V.pattern.__message||(V.pattern.__message=/\{([^}]+)\}/g),function(b,e){var g,h,f=e.charAt(0);return"#"==f||"$"==f?(h=e.substr(1),g=c.domContext&&c.domContext[h]?d.getLabel(c.domContext[h]):d.getLabel(a("#"==f?"#"+h:"[name='"+h+"']"))):g=c[e],g||(g=""),g})},pushDomContext:function(a,b,c){a.domContext||(a.domContext=[]),b||(b=c.prop("name")),a.domContext.push(c),b&&(a.domContext[b]=c)}},V.fn.formatter={number:function(a,b,c){var d,f,e,g,h;if(2==arguments.length&&(c=b,b=V.util.parseFormat(c.format)[1]),d=V.pattern[c.format],!d){switch(b||(b="+int"),e=b.charAt(0)){case"+":f="";break;case"-":f="-";break;case"?":f="-?";break;default:e="+",f="",b=e+b}switch(g=b.substr(1)){case"int":case"integer":d=new RegExp("^"+f+"\\d+$");break;case"money":d=new RegExp("^"+f+"\\d+(\\.\\d{1,2})?$");break;case"float":case"double":d=new RegExp("^"+f+"\\d+(\\.\\d+)?$");break;default:h=g.split(".",2),d="^"+f+"\\d"+h[0],h[1]&&(d+="\\.\\d"+h[1]),d=new RegExp(d+"$")}V.pattern[c.format]=d}return d.test(a)?parseFloat(a):!1},date:function(a,b,c){var e,d,f,g,h;if(2==arguments.length&&(c=b,b=V.util.parseFormat(c.format)[1]),b?"datetime"==b?b="yyyy-MM-dd HH:mm:ss":"time"==b&&(b="HH:mm:ss"):b="yyyy-MM-dd",!a||a.length!=b.length)return!1;if(d=V.pattern[c.format],!d){for(f=V.pattern.__date||(V.pattern.__date=new RegExp("yyyy|MM|dd|HH|mm|ss","g")),d={},f.lastIndex=0;e=f.exec(b);)d[e[0]]=[e.index,e.index+e[0].length];V.pattern[c.format]=d}g={};for(h in d)if(e=d[h],e=a.substring(e[0],e[1]),g[h]=parseInt(e,10),g[h]!=e)return!1;return g.MM&&g.MM--,new Date(g.yyyy,g.MM||0,g.dd||1,g.HH||0,g.mm||0,g.ss||0)},idcard:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;if(2==arguments.length&&(c=b,b=V.util.parseFormat(c.format)[1]),d=V.pattern[c.format],d||(d=b?b.split(":",2):["?"],1==d.length&&d[0].length>2&&(d=["?",d[0]]),V.pattern[c.format]=d),!a||"?"==d[0]&&15!=a.length&&18!=a.length||a.length!=d[0])return!1;if(e=15==a.length,f=6,g=a.substring(f,f+=e?2:4),h=a.substring(f,f+=2),i=a.substring(f,f+=2),e&&(g="19"+g),h--,j=new Date(g,h,i),isNaN(j.getTime()))return!1;if(k=new Date,j.getTime()>k.getTime())return!1;if(d[1]&&(l=k.getFullYear()-j.getFullYear(),k.setFullYear(k.getFullYear()-l),j.getTime()>k.getTime()&&l--,this.validator.range.call(this,l,c,"range",d[1])===!1))return!1;if(18==a.length){for(m=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,o=0;o<m.length;o++)n+=a.charAt(o)*m[o];if(isNaN(n)||a.charAt(17)!="10X98765432".charAt(n%11))return!1}return j}},V.fn.applyDefaultSetting=function(b,c){return b.extend&&(c=this.rules[b.extend]),a.extend({required:!0},c,b)},V.fn.validator={required:function(b,c){var e,f,g,d=!1;if(c.dom&&c.dom.length&&(e=c.dom[0],f=e.nodeName,"INPUT"==f||"input"==f?"radio"==e.type?c.actual=b=c.dom.filter(":checked").length:"text"==e.type?(g=c.dom.attr("placeholder"),g&&g==c.dom.val()&&(c.actual=b="")):"checkbox"==e.type&&(c.actual=b=a('input[name="'+e.name+'"]:checked').length):("A"==f||"a"==f)&&(c.actual=b=c.dom.attr("ok"),d=!0)),b)this.sendSuccess("required","",b,null,c);else{if(c.required)return d&&"false"!=b&&c.event&&"focusout"==c.event.type?!1:(this.sendError("required","",b,null,c),!1);this.sendSuccess("requiredfalse","",b,null,c),c._stop=!0}},format:function(a,b){var c=V.util.parseFormat(b.format),d="format",e=this.formatter[c[0]];return e?(a=e.call(this,a,c[1],b),a===!1?(this.sendError(d,b.format,a,c[1],b),!1):(this.sendSuccess(d,b.format,a,c[1],b),a)):(this.sendError(d,"invalid",a,null,b),!1)},text:function(b,c){var d="text",e=a.type(c.text);switch(e){case"string":if(c.text!=b)return this.sendError(d,"==",b,c.text,c),!1;this.sendSuccess(d,"==",b,c.text,c);break;case"regexp":if(!c.text.test(b))return this.sendError(d,"regexp",b,c.text,c),!1;this.sendSuccess(d,"regexp",b,c.text,c);break;case"function":if(c.text.call(this,b,c)===!1)return this.sendError(d,"function",b,c.text,c),!1;this.sendSuccess(d,"function",b,c.text,c);break;default:throw"Unexpected text validator:"+c.text}},length:function(a,b){return this.validator.range.call(this,b.value.length,b,"length",b.length)},range:function(a,b,c,d){var e,f,g;if(arguments.length<=2&&(c="range",d=b.range),e=V.util.parseIntervalPattern(d),e.equals){if(a!=e.min)return this.sendError(c,"==",a,e.min,b),!1;this.sendSuccess(c,"==",a,e.min,b)}else{if(e.min){if(f=a>e.min||">="==e.left&&e.min==a,!f)return this.sendError(c,e.left,a,e.min,b),f;this.sendSuccess(c,e.left,a,e.min,b)}if(e.max){if(g=a<e.max||"<="==e.right&&e.max==a,!g)return this.sendError(c,e.right,a,e.max,b),g;this.sendSuccess(c,e.right,a,e.max,b)}}},equalsTo:function(b,c){var d=a("[name='"+c.equalsTo+"']"),e=d.val();return b!=e?(V.util.pushDomContext(c,c.equalsTo,d),this.sendError("equalsTo","",b,e,c),!1):(this.sendSuccess("equalsTo","",b,e,c),void 0)},compare:function(b,c){var f,d={},e=this,g=!0,h=c.compare.replace(V.pattern.__compare||(V.pattern.__compare=/\b(this|now)\b|([$#])([^\s=+*\/%&|-]+)/g),function(h,i,j,k){var m,n,o,p,l=i||k;return g&&("this"==l?null==d[l]&&(d[l]=b):"now"==l?null==d[l]&&(d[l]=new Date):(m="#"==j?"#"+l:"[name='"+l+"']",n=a(m),o=n.val(),null!=o&&(c.propagation&&(p=a.extend({},c),delete p.compare,e.validate(n,p)===!1&&(g=!1)),V.util.pushDomContext(c,l,n),g&&(c.format?(f=f||V.util.parseFormat(c.format),o=e.formatter[f[0]].call(e,o,f[1],c),o!==!1&&(d[l]=o)):d[l]=o)))),'this["'+l+'"]'});return g?(this.devMode&&console&&(console.log(h),console.log(d)),f=new Function("return ("+h+")").call(d),f===!1?(this.sendError("compare","pattern",b,c.compare,c),!1):(this.sendSuccess("compare","pattern",b,c.compare,c),void 0)):!1},cellphone:function(a,b){return V.pattern.cellhone||(V.pattern.cellhone=/^1\d{10}$/),V.pattern.cellhone.test(a)?(this.sendSuccess("cellphone","pattern",a,V.pattern.cellhone,b),void 0):(this.sendError("cellphone","pattern",a,V.pattern.cellhone,b),!1)},email:function(a,b){return V.pattern.email||(V.pattern.email=/^[\w._-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+$/),V.pattern.email.test(a)?(this.sendSuccess("email","pattern",a,V.pattern.email,b),void 0):(this.sendError("email","pattern",a,V.pattern.email,b),!1)},file:function(a,b){var c=new RegExp("\\.("+b.file+")$","i");return c.test(a)?(this.sendSuccess("file","pattern",a,b.file,b),void 0):(this.sendError("file","pattern",a,b.file,b),!1)},filesize:function(a,b){var e,f,g,h,c=/[a-zA-Z]+/.exec(b.filesize)[0],d=/^\d+/.exec(b.filesize)[0];return c&&"M"==c?e=1024*1024*d:c&&"KB"==c&&(e=1024*d),f="上传的附件文件不能超过"+b.filesize+"！！！",g="您的浏览器暂不支持计算上传文件的大小，确保上传文件不要超过2M，建议使用IE、FireFox、Chrome浏览器。",(h=checkfile(b.dom,e,f,g))?(this.sendSuccess("filesize","filesize",a,b.filesize,b),void 0):(this.sendError("filesize","filesize",a,b.filesize,b),!1)},fileupload:function(a,b){return"true"!=b.actual?(this.sendError("fileupload","",a,null,b),!1):(this.sendSuccess("fileupload","",a,null,b),void 0)},remoteSensitiveWord:function(b,c){var h,d=c.remote,f=(a.type(d),{type:"post",async:!1,dataType:"json",url:root+"/checkSensitiveWord",data:{sensitiveWord:encodeURI(b,"UTF-8")}}),g=null;return f.success=function(a){g=a},a.ajax(f),g?(g.msg&&(h=c.dom,h.hide(),h.prev(".swdiv").html(g.msg).show(),h.attr("ok","false"),this.sendError("remoteSensitiveWord","",b,null,c)),0==g.resultcode&&(c.dom.attr("ok","true"),this.sendSuccess("remoteSensitiveWord","",b,null,c)),0==g.resultcode):!1},sensitiveWord:function(a,b){var c=b.dom.attr("ok");return c&&"true"==c?(this.sendSuccess("remoteSensitiveWord","",a,null,b),void 0):(this.sendError("remoteSensitiveWord","",a,null,b),b.dom.prev(".swdiv")[0].focus(),!1)},pwd:function(a,b){return V.pattern.pwd||(V.pattern.pwd=/^(?!([a-zA-Z]+|\d+)$)[a-zA-Z\d]{6,16}$/i),V.pattern.pwd.test(a)?(this.sendSuccess("pwd","pattern",a,V.pattern.pwd,b),void 0):(b.dom.show(),this.sendError("pwd","pattern",a,V.pattern.pwd,b),!1)},imagewh:function(a,b){verifyImageWH(this,a,b)},remote:function(b,c){for(var g,h,d=c.remote,e=a.type(d),f={type:"post",async:!1,dataType:"json"};g="function"==e;)d=d.call(null,b,c),e=a.type(d);switch(e){case"string":f.url=d,!g&&c.dom&&(null==c.name&&(c.name=c.dom.prop("name")),f.data={},f.data[c.name]=b);break;case"object":a.extend(f,d);break;default:throw"Unexpected remote validator:"+c.remote}return h=null,f.success=function(a){h=a,0==h.resultcode&&h.url&&layer.msg(h.msg,{time:3e3},function(){location.href=h.url})},a.ajax(f),h?(h.msg&&(c.message=h.msg,this.sendError("remote","",b,null,c)),h.callback&&window[h.callback].call(c.dom,h,b,c),0==h.resultcode&&this.sendSuccess("remote","",b,null,c),0==h.resultcode):!1}},V.fn.rules={},V.define=function(b,c,d){var e,f,g;if("object"!=typeof b)"object"!=typeof c&&(f={},f[b]=c,c=f),d=this===V?V.prototype:this,c.extend&&(g=d.rules[c.extend],g&&(c=a.extend({},g,c)),delete c.extend),d.rules[b]=c;else for(e in b)this.define(e,b[e])},V.fn.define=function(a,b){V.define.call(this,a,b)},V.fn.execute=function(b,c,d,e){var f,g,h,i;return b instanceof a||(b=a(b)),b.length?(null==d&&(d=c,c=null),f=this,c?(b.on(c,function(a){var b="submit"==a.type,c=b?this:a.target,e=b?d:d[c.name];return e?f.execute(c,null,e,a):!1}),void 0):(g=0,h=0,b.each(function(){var i,b=a(this),c=this.nodeName;if("FORM"==c||"form"==c)for(i in d){if(g++,f.validate(b.find("[name='"+i+"']"),d[i],e)===!1)return!1;h++}else{if(g++,f.validate(b,d,e)===!1)return!1;h++}}),i=g==h,a.isFunction(this.callback)?this.callback.call(b,i,d,e)!==!1:i)):!1},V.fn.validate=function(b,c,d){var e,f,g,h,i,j;if("string"==typeof c&&(c=this.rules[c],!c))return!1;if(e=this.applyDefaultSetting(c),c=a.extend({},e),b instanceof a&&(e.dom=b,b=b.val()),c.preFilter){if(c.preFilter.call(this,b,e)===!1)return!0;delete c.preFilter}if(e.value=b,d&&(e.event=d),c.pre){if(e.dom&&e.dom.length&&(f=e.dom[0],g=f.nodeName,"INPUT"==g||"input"==g))if("radio"==f.type);else if("text"==f.type);else if("checkbox"==f.type)return e.actual=b=a('input[name="'+f.name+'"]:checked').length,e.actual&&e.actual>0?(this.sendSuccess("required","",b,null,e),!0):(this.sendError("required","",b,null,e),!1);h=c.pre.split(",");for(i in h)isFinite(i)&&(b=this.pre[h[i]].call(this,b,e.dom));e.value=b,delete c.pre}if(null!=c.required){if(this.validator.required.call(this,b,e)===!1)return!1;if(e._stop)return!0;delete c.required}if(c.format){if(b=this.validator.format.call(this,b,e),b===!1)return!1;if(e._stop)return!0;delete c.format}for(i in c)if(j=this.validator[i]){if(j.call(this,b,e)===!1)return!1;if(e._stop)return!0}return!0},V.fn.sendError=function(b,c,d,e,f){var g,h;this.silence||f.message===!1||(!f.name&&f.dom&&(f.name=f.dom.prop("name")),g=a.extend({validator:b,trigger:c,actual:d,expected:e,label:this.getLabel(f.dom)},f),h=a.isFunction(f.message)?f.message.call(this,d,g):this.getMessage(g),h!==!1&&this.render(h,g))},V.fn.sendSuccess=function(b,c,d,e,f){!f.name&&f.dom&&(f.name=f.dom.prop("name")),a.extend({validator:b,trigger:c,actual:d,expected:e,label:this.getLabel(f.dom)},f)},V.fn.messages={required:"{label}不能为空!",equalsTo:"{label}必须与{#0}输入一致!","==":"{label}必须等于{expected}!",">=":"{label}必须大于或等于{expected}!",">":"{label}必须大于{expected}!","<=":"{label}必须小于或等于{expected}!","<":"{label}必须小于{expected}!","length.==":"{label}的长度必须等于{expected}!","length.>=":"{label}的长度必须大于或等于{expected}!","length.>":"{label}的长度必须大于{expected}!","length.<=":"{label}的长度必须小于或等于{expected}!","length.<":"{label}的长度必须小于{expected}!","format.number":"{label}必须是有效的整数!","format.number/money":"{label}必须是整数或最多保留两位的小数!","format.number/double":"{label}必须是有效的整数或小数!","format.date":"{label}必须是有效的日期!",pattern:"{label}的格式不正确!",regexp:"{label}的格式不正确!","function":"{label}的格式不正确!",file:"{label}的文件格式不正确，必须为{expected}等格式!",filesize:"{label}的大小不能超过{expected}",fileupload:"{label}不能为空!",remoteSensitiveWord:"{label}中含有广告禁用词，请修改!",pwd:"密码由6-16位数字和字母组成，并注意区分大小写"},V.fn.getMessage=function(a){var b="object"==typeof a.message?a.message[a.validator+"."+a.trigger]||a.message[a.validator]||a.message[a.trigger]:a.message;return b||(b=this.messages[a.validator+"."+a.trigger]||this.messages[a.validator]||this.messages[a.trigger]),b?(this.devMode&&console&&console.log(a),b=V.util.parseMessage(b,a,this)):b=this.messages["default"]||"您输入的格式不正确!",b},V.fn.labels={},V.fn.setLabel=function(b,c){"object"==typeof b?a.extend(this.labels,b):this.labels[b]=c},V.fn.getLabel=function(a){if(a&&a.length){var b=a.prop("name"),c=b&&this.labels[b]||a.attr("label")||a.prev("label").text();if(c)return"*"==c.charAt(0)?c.substr(1):c}return""},V.fn.render=function(b,c){var e,f,g,d=c.dom;d&&d.tips&&(d.attr("password")&&"none"==d.css("display")&&(d=d.next()),d.tips(b)||alert(b)),"kaptcha"==c.dom.prop("name")?a(".layui-layer-tips").css("marginLeft","132px"):"checkbox"==c.dom.prop("type")?(e=c.dom.next("a"),f=100,e&&(f+=e.width()),a(".layui-layer-tips").css("marginLeft",f+"px")):a(".layui-layer-tips").css("marginLeft","0px"),g=c.event,(!g||"focusout"!=g.type&&"blur"!=g.type)&&d&&d.first().focus()},v=new V,a.fn.extend({v:function(a,b){return v.execute(this,a,b)}}),v.define({username:{pre:"trimAll,lower,flush",text:/^[a-z][a-z0-9_]{4,15}$/i,message:"{label}必须是英文、数字和下划线组成的5~16位字符，并且必须以字母开头!"},password:{length:"[6,16]"},age:{format:"number",range:"[18,100]"},"int":{format:"number"},"+int":{format:"number",range:"(0,)"},money:{format:"number/money"},"+money":{format:"number/money",range:"(0,)"},phoneCode:{format:"number",length:"[6]"},imageCode:{length:"[4]"},required:{pre:"trim,flush"},cellphone:!0,email:!0,idcard:{format:"idcard/18:[18,]"},file:"jpg|jpeg|gif|png|bmp",chinese:{length:"[2,5]",text:function(a){return/^[\u2E80-\u9FFF]{2,5}$/.test(a)},message:{text:"真实姓名必须为中文字符！"}},filesize:"2M",requiredTrim:{pre:"trimAll,flush"},realname:{text:function(a){return/^([\u4e00-\u9fa5]{2,20}|[a-zA-Z\.\s]{2,20})$/.test(a)},message:"请输入2-20个字符（非阿拉伯数字和特殊符号）"},fileupload:!0,remoteSensitiveWord:!0,sensitiveWord:!0,remoteKaptcha:{pre:"trimAll,flush",length:"[4]",remote:root+"/checkKaptcha"},pwd:!0}))}(jQuery);