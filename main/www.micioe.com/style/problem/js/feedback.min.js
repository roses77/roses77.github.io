!function(t){function a(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){t.exports=e(1)},function(t,a){MI.feedback=function(){function t(){return n.submitData.question[38]?n.submitData.question[39]?n.submitData.answer&&n.submitData.token?(n.submitData.question[40]||(n.submitData.question[40]=""),void $.ajax({url:n.urls.submitUrl,dataType:"jsonp",data:{answers:'{"38": '+n.submitData.question[38]+', "39": "'+n.submitData.question[39]+'", "40":"'+n.submitData.question[40]+'"}',event_code:n.submitData.event_code,answer:n.submitData.answer,token:n.submitData.token},jsonp:"jsonpcallback",timeout:1e4,error:function(){e("网络超时，请刷新页面重试！")},success:function(t){t&&0===t.code?e("提交成功，感谢你的反馈！",!0):e(t.msg)}})):($("#captcha_code").trigger("error",["请输入验证码"]),$("#captcha_code").focus(),!1):($("#b_name").trigger("error",["请输入您遇到的问题"]),$("#b_name").focus(),!1):(e("请选择问题类型！"),!1)}function a(){var t=function(){$("#captcha_code").trigger("error",["请输入正确验证码"]),$("#J_captchaChange").trigger("click"),n.submitData.answer=""};$("#captcha_code").on("blur",function(){var a=$.trim($(this).val());if(a){var i=n.urls.checkCaptchaUrl+a+"&v="+Math.random();n.submitData.answer=a,$.ajax({type:"post",url:i,dataType:"jsonp",jsonp:"callback",timeout:1e4,error:function(){e("抱歉！验证失败，请刷新页面重试!")},success:function(a){a.data&&a.data.result&&a.data.result===!0&&a.data.token?($("#captcha_code").trigger("valid"),n.submitData.token=a.data.token):t()}})}else t()})}function e(t,a){t?(a?$("#J_go").removeClass("hide").siblings("button").hide():$("#J_go").addClass("hide").siblings("button").show(),$("#J_modalAlert").on("show.bs.modal",function(){$("#J_alertMsg").html(t)}).modal("show").removeClass("hide").on("hide.bs.modal",function(){$(this).addClass("hide"),$("#J_alertMsg").html("")})):$("#J_modalAlert").modal("hide")}var n={urls:{submitUrl:"http://xmevent.mi.com/event/survey/saveAnswers",captchaUrl:"http://captcha.hd.mi.com/captcha?style=chinese&service=xmevent.mi.com&sessionId=​",checkCaptchaUrl:"http://captcha.hd.mi.com/captcha/auth?service=xmevent.mi.com&answer="},submitData:{question:{38:"",39:"",40:""},event_code:"8ygs6xte",answer:"",token:""}},i=function(t){return String(t).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},r=function(){MI.form.init(),$("#J_captchaImg").attr("src",n.urls.captchaUrl+Math.random()),$("#J_captchaChange").on("click",function(){$("#J_captchaImg").attr("src",n.urls.captchaUrl+Math.random())}),$("#J_submitQuestion").on("click",function(){return t(),!1}),$("#a_name").on("change",function(){var t=$(this).val();n.submitData.question[38]="0"!==t?t:""}),$("#b_name").on("blur",function(){var t=$.trim($(this).val());n.submitData.question[39]=i(t)}),$("#c_name").on("blur",function(){var t=$.trim($(this).val()),a=/http:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{3}/;""===t||a.test(t)?(n.submitData.question[40]=t,$(this).trigger("valid")):$(this).trigger("error",["请输入正确的页面链接"])}),a()};return{init:r}}(),$(document).ready(function(){MI.feedback.init()})}]);